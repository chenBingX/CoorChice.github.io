<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[è¿˜ä¸äº†è§£Calendarï¼Ÿå®žçŽ°è‡ªå®šä¹‰Androidæ—¥åŽ†ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†]]></title>
      <url>%2F2016%2F10%2F02%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2F%E8%BF%98%E4%B8%8D%E4%BA%86%E8%A7%A3Calendar%EF%BC%9F%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%97%A5%E5%8E%86%EF%BC%8C%E7%9C%8B%E8%BF%99%E7%AF%87%E5%B0%B1%E5%A4%9F%E4%BA%86%2F</url>
      <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç»æ—¥åŽ†å¯¹æˆ‘çš„ç”Ÿæ´»è€Œè¨€æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†ï¼Œè€Œåˆååˆ†é‡è¦çš„ä¸œè¥¿ã€‚åœ¨Androidä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸å¸¸éœ€è¦æ“ä½œæ—¥åŽ†åŽ»å®žçŽ°ä¸€äº›éœ€æ±‚ã€‚æ¯”å¦‚æ ¹æ®æ—¥æœŸèŽ·å–å¯¹åº”æ•°æ®ï¼Œæˆ–è€…æ‰¿è½½äº†ä¸€äº›éœ€æ±‚çš„è‡ªå®šä¹‰æ—¥åŽ†ã€‚ä¸ºäº†æ–¹ä¾¿å¯¹æ—¥æœŸçš„æ“ä½œï¼Œè¯žç”Ÿäº†Calendar ç±»ã€‚è¿™å¤§å¤§ç®€åŒ–äº†æˆ‘ä»¬çš„è®¡ç®—ã€‚äº‹å®žä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“å¦‚ä½•æ“ä½œCalendarå°±è¡Œäº†ã€‚æœ¬ç¯‡æˆ‘ä»¬å°†ä¸€èµ·æ¥äº†è§£ä¸‹Calendarï¼Œå¹¶ä¸”å®žçŽ°ä¸€ä¸ªè‡ªå®šä¹‰æ—¥åŽ†ã€‚ æ–¹ä¾¿çš„Calendarç±»Calendaræ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ The Calendar class is an abstract class that provides methods for converting between a specific instant in time and a set of calendar fields such as YEAR, MONTH, DAY_OF_MONTH, HOUR, and so on, and for manipulating the calendar fields, such as getting the date of the next week. ä¸Šé¢æ˜¯Androidæ–‡æ¡£ä¸­å¯¹Calendaræ˜¯ä»€ä¹ˆçš„ç®€å•ä»‹ç»ã€‚å¤§æ¦‚çš„æ„æ€å°±æ˜¯è¯´ï¼ŒCalendaræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚å®ƒæä¾›äº†ä¸€äº›ç”¨äºŽä¸€ä¸ªå…·ä½“æ—¶é—´å’ŒCalendarçš„å­—æ®µ(æ¯”å¦‚ï¼ŒYEARã€MONTHã€DAY_OF_MONTHã€HOURç­‰)äº’ç›¸è½¬æ¢çš„æ–¹æ³•ï¼Œä»¥åŠå¯¹Calendarçš„å­—æ®µçš„æ“ä½œæ–¹æ³•(æ¯”å¦‚ï¼ŒèŽ·å–ä¸‹ä¸€å‘¨çš„æ—¥æœŸ)ã€‚ç»¼ä¸Šæ‰€è¿°ï¼ŒCalendarå°±æ˜¯ä¸€ä¸ªæ“ä½œæ—¥åŽ†çš„å·¥å…·ç±»ã€‚ Calendarçš„ä½¿ç”¨èŽ·å¾—ä¸€ä¸ªCalendarå®žä¾‹12345678910111213Calendar calendar = Calendar.getInstance(); //è¿™ä¸ªæ–¹æ³•èŽ·å–åˆ°çš„æ˜¯é»˜è®¤çš„Calendarå®žä¾‹ã€‚//ä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„å°±å¥½ï¼Œå®ƒä¼šæ ¹æ®appè¿è¡Œçš„æ—¶åŒºã€è¯­è¨€çŽ¯å¢ƒè‡ªåŠ¨åˆ›å»ºç›¸åº”çš„Calendarå®žä¾‹ã€‚Calendar calendar = Calendar.getInstance(Locale.CHINA); //æ ¹æ®Localeæ¥èŽ·å–ç›¸åº”çš„Calendarå®žä¾‹ã€‚Calendar calendar = Calendar.getInstance(TimeZone.getDefaultRef(), Locale.CHINA);//æ ¹æ®TimeZoneå’ŒLocaleæ¥èŽ·å–ç›¸åº”çš„Calendarå®žä¾‹ã€‚//è¿™äº›æ–¹æ³•æœ€ç»ˆè°ƒç”¨çš„éƒ½æ˜¯createCalendar()private static Calendar createCalendar(TimeZone zone, Locale aLocale) &#123; return new GregorianCalendar(zone, aLocale); //Androidä¸­ä½¿ç”¨äº†GregorianCalendarã€‚ //æ³¨æ„è¿™é‡Œæ¯æ¬¡éƒ½æ˜¯newä¸€ä¸ªæ–°çš„Calendarå®žä¾‹ã€‚&#125; æŒ‘å‡ ä¸ªæ–¹æ³•ç‰¹åˆ«è¯´æ˜Žä¸‹ set(f, value) è°ƒç”¨è¯¥æ–¹æ³•å¯ä»¥æŠŠCalendarçš„æŸä¸ªå­—æ®µfçš„å€¼è®¾ç½®ä¸ºæŒ‡å®šå€¼valueã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ï¼šDAY_OF_MONTHå­—æ®µæ˜¯ä»Ž1å¼€å§‹ï¼Œå¦‚æžœè®¾ç½®0ï¼Œè¡¨ç¤ºä¸Šä¸ªæœˆçš„æœ€åŽä¸€å¤©ï¼›MONTHå­—æ®µæ˜¯ä»Ž0å¼€å§‹ï¼Œå¦‚æžœè®¾ç½®12ï¼Œè¡¨ç¤ºä¸‹ä¸€å¹´çš„ç¬¬ä¸€ä¸ªæœˆã€‚ set()æ–¹æ³•è®¾ç½®åŽï¼Œä»…ä»…æ˜¯æ”¹å˜äº†Calendarçš„æŒ‡å®šå­—æ®µçš„å€¼ï¼Œä½†æ˜¯Calendarè¡¨ç¤ºçš„æ—¥æœŸå¹¶æ²¡æœ‰é‡æ–°è®¡ç®—ã€‚Calendarå°†ä¼šåœ¨ä¸‹æ¬¡è°ƒç”¨get()ã€getTime()ã€getTimeInMillis()ã€add()æˆ–roll()æ–¹æ³•æ—¶ï¼ŒçœŸå®žçš„é‡æ–°è®¡ç®—æ—¥æœŸã€‚ add(f, delta)æ•ˆæžœç­‰åŒäºŽè°ƒç”¨äº†set(f, get(f) + delta)lã€‚ roll(f, delta)æ•ˆæžœå’Œadd()æœ‰äº›ç±»ä¼¼ã€‚ä½†æ˜¯å®ƒçš„ä½œç”¨èŒƒå›´é™åˆ¶åœ¨få­—æ®µä¸Šï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒå­—æ®µã€‚ä¸¾ä¸ªæ —å­ã€‚ 12345Calendar calendar = Calendar.getInstance();calendar.set(2016,1,1);calendar.roll(Calendar.DAY_OF_MONTH, 32);SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");System.out.println(dateFormat.format(calendar.getTime())); è¾“å‡ºï¼š12016-01-01 çœ‹å‡ºæ¥æ²¡ï¼Ÿå®ƒåªåœ¨DAY_OF_MONTHè¿™ä¸ªå­—æ®µé‡Œå¾ªçŽ¯ï¼Œè€Œä¸ä¼šå¯¼è‡´å…¶å®ƒå­—æ®µå‘ç”Ÿå˜åŒ–ã€‚ getFirstDayOfWeek()è¿™ä¸ªæ–¹æ³•ç”¨äºŽèŽ·å–ä¸€ä¸ªå‘¨çš„ç¬¬ä¸€å¤©æ˜¯å‘¨å‡ ã€‚ä¸€èˆ¬ä¸€ä¸ªå‘¨çš„ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå¤©ï¼Œä½†æ³•å›½çš„æ˜¯æ˜ŸæœŸä¸€ã€‚ clone()è¿™ä¸ªæ–¹æ³•æ˜¯ç”±ClonableæŽ¥å£æä¾›çš„ã€‚å¯ä»¥å…‹éš†ä¸€ä¸ªCalendarå®žä¾‹ã€‚è¿™å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥é¿å…æ··ä¹±çš„æ“ä½œCalendarã€‚ å…¶å®ƒæ–¹æ³•çš„ä½¿ç”¨è¯·ç‚¹å‡»é“¾æŽ¥çœ‹Calendarçš„æ–¹æ³•ä½¿ç”¨å¤§å…¨ å‡ ä¸ªç‰¹æ®Šçš„è§„åˆ™ GregorianCalendarçš„æ—¶é—´åŽŸç‚¹æ˜¯1970-01-01 00:00:00.000ã€‚æ‰€ä»¥é€šè¿‡getTimeInMillis()èŽ·å¾—çš„æ—¶é—´æˆ³å°±æ˜¯æ—¶é—´åŽŸç‚¹çš„åç§»é‡ã€‚ æ—¥æœŸå¤§å°è§„åˆ™Thus, 23:59 on Dec 31, 1999 &lt; 00:00 on Jan 1, 2000 &lt; 00:01 on Jan 1, 2000.12:00 am (midnight) &lt; 12:01 am, and 12:00 pm (noon) &lt; 12:01 pm. æ’¸ä¸ªè‡ªå®šä¹‰æ—¥åŽ†ä¸Šä¸ªæ•ˆæžœå›¾ï¼Œæ¯”è¾ƒç®€é™‹ï¼Œå„ä½çœ‹å®˜è§è°…å•Šã€‚ä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜Žä¸‹Calendarçš„ä½¿ç”¨ã€‚ä¸»è¦ä½¿ç”¨äº†ViewPager + Fragment + RecyclerViewå®Œæˆã€‚ä½†è¿™ä¸æ˜¯é‡ç‚¹ã€‚é‡ç‚¹æ˜¯Calendarï¼æ‰€ä»¥æˆ‘å°±æ”¾æ ¸å¿ƒçš„ä»£ç ã€‚å…¶å®ƒéƒ¨åˆ†å’Œå¤§å®¶å¹³æ—¶ä½¿ç”¨çš„ViewPager + Fragment + RecyclerViewä¹Ÿéƒ½å·®ä¸å¤šã€‚ä¸”çœ‹ï½ž1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192protected void initData() &#123; dateList.clear(); initialDate = (Date) getArguments().getSerializable(KEY_DATE); //èŽ·å–ä¼ è¿‡æ¥çš„Dateï¼Œç”¨äºŽç¡®å®šåˆå§‹çš„calendar Calendar calendar = Calendar.getInstance(Locale.CHINA); //èŽ·å–ChinaåŒºCalendarå®žä¾‹ï¼Œå®žé™…æ˜¯GregorianCalendarçš„ä¸€ä¸ªå®žä¾‹ calendar.setTime(initialDate); //åˆå§‹åŒ–æ—¥æœŸ int maxDay = calendar.getActualMaximum(Calendar.DAY_OF_MONTH); //èŽ·å¾—å½“å‰æ—¥æœŸæ‰€åœ¨æœˆä»½æœ‰å¤šå°‘å¤©ï¼ˆæˆ–è€…è¯´dayçš„æœ€å¤§å€¼)ï¼Œç”¨äºŽåŽé¢çš„è®¡ç®— Calendar calendarClone = (Calendar) calendar.clone(); //å…‹éš†ä¸€ä¸ªCalendarå†è¿›è¡Œæ“ä½œï¼Œé¿å…é€ æˆæ··ä¹± calendarClone.set(Calendar.DAY_OF_MONTH, 1); //å°†æ—¥æœŸè°ƒåˆ°å½“å‰æœˆä»½çš„ç¬¬ä¸€å¤© int startDayOfWeek = calendarClone.get(Calendar.DAY_OF_WEEK); //èŽ·å¾—å½“å‰æ—¥æœŸæ‰€åœ¨æœˆä»½çš„ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡  calendarClone.set(Calendar.DAY_OF_MONTH, maxDay); //å°†æ—¥æœŸè°ƒåˆ°å½“å‰æœˆä»½çš„æœ€åŽä¸€å¤© int endDayOfWeek = calendarClone.get(Calendar.DAY_OF_WEEK); //èŽ·å¾—å½“å‰æ—¥æœŸæ‰€åœ¨æœˆä»½çš„æœ€åŽä¸€å¤©æ˜¯æ˜ŸæœŸå‡  /** * è®¡ç®—ä¸Šä¸€ä¸ªæœˆåœ¨æœ¬æœˆæ—¥åŽ†é¡µå‡ºçŽ°çš„é‚£å‡ å¤©. * æ¯”å¦‚ï¼ŒstartDayOfWeek = 3ï¼Œè¡¨ç¤ºå½“æœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸäºŒï¼Œæ‰€ä»¥æ—¥åŽ†å‘å‰ä¼šç©ºå‡º2å¤©çš„ä½ç½®ï¼Œé‚£ä¹ˆè®©ä¸Šæœˆçš„æœ€åŽä¸¤å¤©æ˜¾ç¤ºåœ¨æ˜ŸæœŸæ—¥å’Œæ˜ŸæœŸä¸€çš„ä½ç½®ä¸Š. */ int startEmptyCount = startDayOfWeek - 1; //ä¸Šæœˆåœ¨æœ¬æœˆæ—¥åŽ†é¡µå› è¯¥å‡ºçŽ°çš„å¤©æ•°ã€‚ Calendar preCalendar = (Calendar) calendar.clone(); //å…‹éš†ä¸€ä»½å†æ“ä½œ preCalendar.set(Calendar.DAY_OF_MONTH, 1); //å°†æ—¥æœŸè°ƒåˆ°å½“æœˆç¬¬ä¸€å¤© preCalendar.add(Calendar.DAY_OF_MONTH, -startEmptyCount); //å‘å‰æŽ¨ç§»startEmptyCountå¤© for (int i = 0; i &lt; startEmptyCount; i++) &#123; DateInfo dateInfo = new DateInfo(); //ä½¿ç”¨DateInfoæ¥å‚¨å­˜æ‰€éœ€çš„ç›¸å…³ä¿¡æ¯ dateInfo.setDate(preCalendar.getTime()); dateInfo.setType(DateInfo.PRE_MONTH); //æ ‡è®°æ—¥æœŸä¿¡æ¯çš„ç±»åž‹ä¸ºä¸Šä¸ªæœˆ dateList.add(dateInfo); //å°†æ—¥æœŸæ·»åŠ åˆ°æ•°ç»„ä¸­ preCalendar.add(Calendar.DAY_OF_MONTH, 1); //å‘åŽæŽ¨ç§»ä¸€å¤© &#125; /** * è®¡ç®—å½“æœˆçš„æ¯ä¸€å¤©æ—¥æœŸ */ calendar.set(Calendar.DAY_OF_MONTH, 1); //ç”±äºŽæ˜¯èŽ·å–å½“æœˆæ—¥æœŸä¿¡æ¯ï¼Œæ‰€ä»¥ç›´æŽ¥æ“ä½œå½“æœˆCalendarå³å¯ã€‚å°†æ—¥æœŸè°ƒä¸ºå½“æœˆç¬¬ä¸€å¤© for (int i = 0; i &lt; maxDay; i++) &#123; DateInfo dateInfo = new DateInfo(); dateInfo.setDate(calendar.getTime()); dateInfo.setType(DateInfo.CURRENT_MONTH); //æ ‡è®°æ—¥æœŸä¿¡æ¯çš„ç±»åž‹ä¸ºå½“æœˆ dateList.add(dateInfo); calendar.add(Calendar.DAY_OF_MONTH, 1); //å‘åŽæŽ¨ç§»ä¸€å¤© &#125; /** * è®¡ç®—ä¸‹æœˆåœ¨æœ¬æœˆæ—¥åŽ†é¡µå‡ºçŽ°çš„é‚£å‡ å¤©ã€‚ * æ¯”å¦‚ï¼ŒendDayOfWeek = 6ï¼Œè¡¨ç¤ºå½“æœˆç¬¬äºŒå¤©æ˜¯æ˜ŸæœŸäº”ï¼Œæ‰€ä»¥æ—¥åŽ†å‘åŽä¼šç©ºå‡º1å¤©çš„ä½ç½®ï¼Œé‚£ä¹ˆè®©ä¸‹æœˆçš„ç¬¬ä¸€å¤©æ˜¾ç¤ºåœ¨æ˜ŸæœŸå…­çš„ä½ç½®ä¸Šã€‚ */ int endEmptyCount = 7 - endDayOfWeek; //ä¸‹æœˆåœ¨æœ¬æœˆæ—¥åŽ†é¡µä¸Šå› è¯¥å‡ºçŽ°çš„å¤©æ•° Calendar afterCalendar = (Calendar) calendar.clone(); //åŒæ ·ï¼Œå…‹éš†ä¸€ä»½åœ¨æ“ä½œ for (int i = 0; i &lt; endEmptyCount; i++) &#123; DateInfo dateInfo = new DateInfo(); dateInfo.setDate(afterCalendar.getTime()); dateInfo.setType(DateInfo.AFTER_MONTH); //å°†DateInfoç±»åž‹æ ‡è®°ä¸ºä¸‹ä¸ªæœˆ dateList.add(dateInfo); afterCalendar.add(Calendar.DAY_OF_MONTH, 1); //å‘åŽæŽ¨ç§»ä¸€å¤© &#125; &#125; //DateInfoæœ‰å¿…è¦æ”¾ä¸€ä¸‹ã€‚ä¸è¿‡è¿™ä»…ä»£è¡¨æˆ‘çš„æ€è·¯ã€‚ private static class DateInfo &#123; private static final int PRE_MONTH = 1; private static final int CURRENT_MONTH = PRE_MONTH + 1; private static final int AFTER_MONTH = CURRENT_MONTH + 1; private static final int WEEK_TITLE = AFTER_MONTH + 1; private Date date; private int type; private String weekTitle; public Date getDate() &#123; return date; &#125; public void setDate(Date date) &#123; this.date = date; &#125; public int getType() &#123; return type; &#125; public void setType(int type) &#123; this.type = type; &#125; public String getWeekTitle() &#123; return weekTitle; &#125; public void setWeekTitle(String weekTitle) &#123; this.weekTitle = weekTitle; &#125; &#125; åŽé¢åªéœ€è¦æŠŠdateList ä¸­çš„æ•°æ®æ”¾åˆ°RecyclerViewä¸­å°±å¯ä»¥ã€‚ æ€»ç»“åˆ°æ­¤æƒ³å¿…å¤§å®¶ä¹Ÿå¯¹Calendaræœ‰äº†ä¸ªåŸºæœ¬ç‚¹çš„äº†è§£ã€‚å¹³æ—¶ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯get(),getTime(),set(),add(),roll()ç­‰æ–¹æ³•ï¼Œæˆ‘åœ¨ä¸Šé¢æäº†å‡ ä¸ªç‰¹æ®Šç‚¹çš„ã€‚å…¶å®ƒçš„å¯ä»¥åˆ°ä¸Šé¢æåˆ°é‚£ä¸ªé“¾æŽ¥é‡Œç†Ÿæ‚‰ï¼Œå†™çš„æ¯”è¾ƒè¯¦ç»†çš„ã€‚è¿™æ³¢ã€å†œå¤«å±±æ³‰ã€‘æˆ‘å°±ä¸æ¬äº†ã€‚ å‚è€ƒé“¾æŽ¥ Androidæ–‡æ¡£ How Soft Works-Calendar]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä»€ä¹ˆï¼ŸIOSçš„ä¸“åˆ©ï¼ŸAndroidä¹Ÿèƒ½æµç•…å®žçŽ°æ¯›çŽ»ç’ƒæ•ˆæžœ(é«˜æ–¯æ¨¡ç³Š)æ•ˆæžœ]]></title>
      <url>%2F2016%2F09%2F20%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2F%E4%BB%80%E4%B9%88%EF%BC%9FIOS%E7%9A%84%E4%B8%93%E5%88%A9%EF%BC%9FAndroid%E4%B9%9F%E8%83%BD%E6%B5%81%E7%95%85%E5%AE%9E%E7%8E%B0%E6%AF%9B%E7%8E%BB%E7%92%83%E6%95%88%E6%9E%9C(%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A)%E6%95%88%E6%9E%9C%2F</url>
      <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç»ä¸Šå›¾å°±æ˜¯æˆ‘ä»¬åœ¨IOSè®¾å¤‡ä¸Šç»å¸¸èƒ½å¤Ÿè§åˆ°çš„æ¯›çŽ»ç’ƒ(é«˜æ–¯æ¨¡ç³Š)æ•ˆæžœã€‚ä¸å¾—ä¸è¯´ï¼Œè¿™ç§æ•ˆæžœåœ¨é€‚åˆçš„åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œèƒ½å¤ŸèŽ·å¾—ç»ä½³çš„ç¾Žæ„Ÿã€‚ä½†æ˜¯é‰´äºŽAndroidè®¾å¤‡æ€§èƒ½å’Œå…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸å¾ˆéš¾åœ¨Androidè®¾å¤‡ä¸Šè§åˆ°è¿™ç§æ•ˆæžœã€‚ä½†è¿™å¹¶ä¸æ˜¯IOSçš„ä¸“åˆ©æ•ˆæžœï¼ŒAndroidä¹Ÿèƒ½è½»æ¾æµç•…çš„å®žçŽ°ã€‚æœ¬ç¯‡æ–‡ç« å°†ä¼šè¯¦ç»†çš„è®²è§£å¦‚ä½•å®žçŽ°ã€‚ Androidä¸­çš„é«˜æ–¯æ¨¡ç³Šæˆ‘ä¸ºä»€ä¹ˆé€‰æ‹©RenderScriptå®žçŽ°é«˜æ–¯æ¨¡ç³Šç›®å‰Androidè®¾å¤‡ä¸Šå®žçŽ°é«˜æ–¯æ¨¡ç³Šæ•ˆæžœçš„æ–¹å¼é€šå¸¸æœ‰ï¼š äº‘ç«¯å¤„ç†ï¼Œç§»åŠ¨å®¢æˆ·ç«¯ç›´æŽ¥ä»Žç½‘ç»œèŽ·å–å¤„ç†å¥½çš„å›¾ç‰‡ã€‚è¿™ç§æ–¹å¼å±€é™æ€§å¾ˆå¤§ã€‚ FastBlurç­‰å¼€æºåº“ã€‚è¿™ç§æ–¹å¼å…¼å®¹æ€§ä¸é”™ï¼Œä½†æ˜¯æ•ˆçŽ‡æžä½Žã€‚ cå®žçŽ°ã€‚ä¸æ‡‚cçš„ç†è§£å›°éš¾ðŸ˜‚ã€‚ OpenGLå®žçŽ°ã€‚æ•ˆæžœå¾ˆå¥½ï¼Œä½†ç”µé‡å’Œå†…å­˜æ¶ˆè€—æ¯”è¾ƒé«˜ã€‚ RenderScriptå®žçŽ°ã€‚æ•ˆæžœç•¥å¼±äºŽç¬¬4ç§ï¼Œä½†æ˜¯ä½¿ç”¨æ–¹ä¾¿ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œæ€§èƒ½æ¶ˆè€—åœ¨å¯æŽ¥å—èŒƒå›´å†…ï¼ŒåŠ ä¸ŠGoogleçš„å…¼å®¹æ€§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è¯´æ˜¯èƒ½å¤Ÿä½œä¸ºä¼˜å…ˆè€ƒè™‘çš„æ–¹å¼ã€‚ RenderScript RenderScriptä¸»è¦åœ¨androidä¸­çš„å¯¹å›¾å½¢è¿›è¡Œå¤„ç†ï¼ŒRenderScripté‡‡ç”¨C99è¯­æ³•è¿›è¡Œç¼–å†™ï¼Œä¸»è¦ä¼˜åŠ¿åœ¨äºŽæ€§èƒ½è¾ƒé«˜ã€‚åœ¨Api11çš„æ—¶å€™è¢«åŠ å…¥åˆ°Androidä¸­ã€‚åŒæ—¶ï¼ŒGoogleæä¾›äº†android.support.v8.renderscriptå…¼å®¹åŒ…ï¼Œèƒ½å¤Ÿå®žçŽ°æ›´ä½Žç‰ˆæœ¬çš„å…¼å®¹ã€‚ RenderScriptæä¾›äº†ä¸€ä¸ªç”¨äºŽå®žçŽ°é«˜æ–¯æ¨¡ç³Šçš„å°è£…ç±»ScriptIntrinsicBlur ï¼Œè¿™è´§åœ¨Api17æ‰è¢«æ”¶ç¼–Androidæ‰€ä»¥åœ¨ä¸ä½¿ç”¨å…¼å®¹åŒ…çš„æƒ…å†µä¸‹åªèƒ½å…¼å®¹åˆ°4.2çš„è®¾å¤‡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ‰å…¼å®¹åŒ…å•ŠðŸ˜‰å‘ä¸‹å…¼å®¹ä¸æ˜¯æ¢¦ã€‚ å‡†å¤‡é˜¶æ®µå¼•å…¥å…¼å®¹åŒ…æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€åœ¨build.gradleä¸­åŠ å…¥:12345678defaultConfig &#123; ã€‚ ã€‚ ã€‚ //å°±æ˜¯è¿™ä¹ˆç®€å•ðŸ˜‰ renderscriptTargetApi 19 renderscriptSupportModeEnabled true &#125; ä½ ä»¥ä¸ºè¿™æ ·å°±å¥½äº†ï¼Ÿnononoã€‚ç”±äºŽä¸€äº›å‘äººçš„åŽ‚å•†ä¼šæ·±åº¦å®šåˆ¶Androidç³»ç»Ÿï¼Œæ‰€ä»¥ä¸€äº›å¿…è¦çš„ä¾èµ–æ–‡ä»¶ä¼šè¢«å®ƒä»¬ç›´æŽ¥åŽ»æŽ‰ï¼ï¼ðŸ˜‚è¿™å¯¼è‡´ä¸€äº›åž‹å·çš„è®¾å¤‡ä¸Šè°ƒç”¨RenderScriptdçš„éƒ¨åˆ†æ–¹æ³•æ—¶ä¼šæŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬å¾—åŠ ä¸Šè¿™äº›å¯èƒ½ä¸¢å¤±çš„æ–‡ä»¶ã€‚å…¶å®žä¹Ÿç®€å•ï¼Œæ‰“å¼€android_sdk/build-tools/é€‰æ‹©19ä»¥ä¸Šç‰ˆæœ¬/renderscript/lib/packagedæˆ‘ä»¬å¯ä»¥çœ‹è§3ä¸ªåŒ…å«.osæ–‡ä»¶çš„æ–‡ä»¶å¤¹ã€‚ ç›´æŽ¥å¤åˆ¶è¿™ä¸‰ä¸ªæ–‡ä»¶åŠ åˆ°é¡¹ç›®å·¥ç¨‹çš„jniLibs åŒ…ä¸‹ã€‚ä»€ä¹ˆï¼Ÿæ‰¾ä¸è§jniLibsåŒ…ï¼Ÿè‡ªå·±å»ºä¸€ä¸ªå–½ã€‚ æ³¨æ„ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½é‡åˆ°ä¸€ä¸ªå¥”æºƒï¼Œæ‰¾ä¸åˆ°.osæ–‡ä»¶ðŸ˜±ã€‚èŽ«æ…ŒèŽ«æ…Œâ€¦åœ¨build.gradleçš„android{}ä¸­åŠ å…¥ï¼š12345sourceSets &#123; main &#123; jniLibs.srcDirs = ['libs'] &#125; &#125; æ²¡å®Œæ²¡äº†!æœ€åŽä¸€æ­¥ðŸ˜’åªé’ˆå¯¹ä½¿ç”¨çš„æ··æ·†çš„åŒå­¦ï¼Œéœ€è¦åœ¨æ··æ·†ä¸­åŠ å…¥ï¼š1-keep class android.support.v8.renderscript.** &#123; *; &#125; å®žçŽ°é«˜æ–¯æ¨¡ç³Šç»ˆäºŽå¯ä»¥å¼€å§‹å†™ä»£ç äº†ã€‚å…ˆæ¥çœ‹çœ‹æ•ˆæžœã€‚ä¸‹å›¾é«˜æ–¯æ¨¡ç³ŠåŠå¾„é€æ¸å¢žå¤§çš„æ•ˆæžœï¼Œè¯·å¿½ç•¥æ¸£æ¸£å½•å±æ•ˆæžœðŸ˜ å°†ScriptIntrinsicBlurå°è£…æˆå·¥å…·ç±»ã€‚å’±ä»¬ä»£ç é‡ŒæŽ¥ç€æ¬¾ðŸ˜Ž1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import android.support.v8.renderscript.*; //è¿™å¥å¾ˆé‡è¦å•Šï¼Œv8åŒ…çš„ï¼Œä¸ç„¶ä¸èƒ½å‘ä¸‹å…¼å®¹å•Šã€‚public class RenderScriptGaussianBlur &#123; private RenderScript rs; public RenderScriptGaussianBlur(Context context) &#123; // åˆ›å»ºRenderScriptå†…æ ¸å¯¹è±¡ this.rs = RenderScript.create(context); &#125; /** * å°†å›¾ç‰‡é«˜æ–¯æ¨¡ç³ŠåŒ– * @param radius æ¨¡ç³ŠåŠå¾„ï¼Œç”±äºŽæ€§èƒ½é™åˆ¶ï¼Œè¿™ä¸ªå€¼çš„å–å€¼åŒºé—´ä¸º(0,25f] * @param bitmapOriginal æºBitmap */ public Bitmap blur(float radius, Bitmap bitmapOriginal) &#123; Bitmap bmp = Bitmap.createBitmap(bitmapOriginal); // ç”±äºŽRenderScriptå¹¶æ²¡æœ‰ä½¿ç”¨VMæ¥åˆ†é…å†…å­˜,æ‰€ä»¥éœ€è¦ä½¿ç”¨Allocationç±»æ¥åˆ›å»ºå’Œåˆ†é…å†…å­˜ç©ºé—´ã€‚ final Allocation input = Allocation.createFromBitmap(rs, bmp); //Type: â€œä¸€ä¸ªTypeæè¿°äº†ä¸€ä¸ªAllocationæˆ–è€…å¹¶è¡Œæ“ä½œçš„Elementå’Œdimensions â€ Type type = input.getType(); final Allocation output = Allocation.createTyped(rs, type); //åˆ›å»ºä¸€ä¸ªæ¨¡ç³Šæ•ˆæžœçš„RenderScriptçš„å·¥å…·å¯¹è±¡ //ç¬¬äºŒä¸ªå‚æ•°Elementç›¸å½“äºŽä¸€ç§åƒç´ å¤„ç†çš„ç®—æ³•ï¼Œé«˜æ–¯æ¨¡ç³Šçš„è¯ç”¨è¿™ä¸ªå°±å¥½ final ScriptIntrinsicBlur script = ScriptIntrinsicBlur.create(rs, Element.U8_4(rs)); //è®¾ç½®æ¸²æŸ“çš„æ¨¡ç³Šç¨‹åº¦, 25fæ˜¯æœ€å¤§æ¨¡ç³Šåº¦ script.setRadius(radius); // è®¾ç½®blurScriptå¯¹è±¡çš„è¾“å…¥å†…å­˜ script.setInput(input); // å°†è¾“å‡ºæ•°æ®ä¿å­˜åˆ°è¾“å‡ºåˆšåˆšåˆ›å»ºçš„è¾“å‡ºå†…å­˜ä¸­ script.forEach(output); // å°†æ•°æ®å¡«å……åˆ°bitmapä¸­ output.copyTo(bmp); //é”€æ¯å®ƒä»¬é‡Šæ”¾å†…å­˜ input.destroy(); output.destroy(); script.destroy(); type.destroy(); return bmp; &#125; public void destory()&#123; this.rs.destroy(); &#125;&#125; æŒºç®€å•çš„å‡ å¥ï¼ŒçŽ°åœ¨æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ã€‚ é™ä½Žéœ€è¦è¿›è¡Œé«˜æ–¯æ¨¡ç³Šçš„å›¾ç‰‡è´¨é‡è™½ç„¶è¯´ä½¿ç”¨RenderScriptèƒ½å¤Ÿé«˜æ•ˆçš„è¿›è¡Œå›¾ç‰‡çš„é«˜æ–¯æ¨¡ç³Šï¼Œä½†æ˜¯å¯¹äºŽè¾ƒå¤§çš„å›¾ç‰‡è¿˜æ˜¯æ˜¾çš„åŠ›ä¸ä»Žå¿ƒã€‚æ¯•ç«Ÿæ˜¯è¦å¯¹æ¯ä¸€ä¸ªåƒç´ ç‚¹éƒ½è¦è¿›è¡Œå¤„ç†ã€‚å†µä¸”ä¸€èˆ¬æ¥è¯´ï¼Œé«˜æ–¯æ¨¡ç³ŠåŽå›¾ç‰‡éƒ½æ¯”è¾ƒæ¨¡ç³Šï¼Œæˆ‘ä¸ºä½•è¦ç”¨é«˜æ¸…å›¾ï¼ŸðŸ¤£é™ä½Žå›¾ç‰‡è´¨é‡çš„ä»£ç ç›¸ä¿¡å¤§å®¶éƒ½å€’èƒŒå¦‚æµäº†ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤æ”¾ç äº†ã€‚ å›¾ç‰‡çš„é«˜æ–¯æ¨¡ç³ŠåŒ–ä¸€å®šè¦å¼‚æ­¥è¿›è¡Œ 12345678910111213141516171819202122232425262728293031323334353637383940//å¤„ç†åŒ–ä¸€ä¸ªRenderScriptGaussianBlurï¼Œè®°å¾—åœ¨Activityçš„onDestory()ä¸­è°ƒç”¨destroy()é‡Šæ”¾å†…å­˜blurRender = new RenderScriptGaussianBlur(this);//è¿™æ®µä»£ç çš„æ•ˆæžœå°±æ˜¯æ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œé«˜æ–¯æ¨¡ç³ŠåŠå¾„blurRadiuså°±+1ï¼Œ//ç„¶åŽåœ¨RxJavaçš„Schedulers.computation()çº¿ç¨‹ä¸­è¿›è¡ŒBitmapçš„é«˜æ–¯æ¨¡ç³ŠåŒ–ï¼Œ//æŽ¥ç€åœ¨onNext()ä¸­å°†å¤„ç†åŽèŽ·å¾—çš„å›¾ç‰‡è®¾ç½®æ˜¾ç¤ºã€‚//ä¹Ÿå°±æ˜¯ä¸Šå›¾çš„æ•ˆæžœbtn2.setOnClickListener(v -&gt; &#123; if (mBitmap != null &amp;&amp; blurRadius &lt;= 25) &#123; Disposable d = Observable.create(new ObservableOnSubscribe&lt;Bitmap&gt;() &#123; @Override public void subscribe(ObservableEmitter&lt;Bitmap&gt; e) throws Exception &#123; LogUtils.e("å½“å‰blurRadius = " + blurRadius); //å¯¹å›¾ç‰‡è¿›è¡Œé«˜æ–¯æ¨¡ç³Šå¤„ç† Bitmap bitmap = blurRender.blur(blurRadius, mBitmap); blurRadius++; if (blurRadius == 25)&#123; blurRadius = 1; &#125; e.onNext(bitmap); e.onComplete(); &#125; &#125;) .subscribeOn(Schedulers.computation()) //æŒ‡å®šè¿ç®—çº¿ç¨‹ .observeOn(AndroidSchedulers.mainThread()) //åˆ‡æ¢å›žä¸»çº¿ç¨‹ .subscribeWith(new DisposableObserver&lt;Bitmap&gt;() &#123; @Override public void onNext(Bitmap bitmap) &#123; iv.setImageBitmap(bitmap); //å±•ç¤ºå›¾ç‰‡ &#125; @Override public void onError(Throwable e) &#123;&#125; @Override public void onComplete() &#123;&#125; &#125;); disposable.add(d); &#125; &#125;); æ€§èƒ½é—®é¢˜æµ‹è¯•æœºï¼šMeizu M2 Noteç³»ç»Ÿï¼šAndroid 5.1 ä¸Šå›¾é«˜æ–¯æ¨¡ç³Šæ—¶çš„CPUåŠå†…å­˜å˜åŒ–ï¼š ä»Žä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æˆ‘åŽŸæœ¬åœ¨æ’­æ”¾ä¸€ä¸ªåŠ¨ç”»æ—¶çš„CPUä½¿ç”¨çŽ‡å¤§æ¦‚åœ¨6% å·¦å³ã€‚åœ¨å¼€å§‹é«˜æ–¯æ¨¡ç³Šè¿ç®—åŽï¼Œéšç€é«˜æ–¯æ¨¡ç³ŠåŠå¾„çš„é€æ¸å¢žå¤§ï¼ŒCPUå³°å€¼æœ€å¤§ä¹Ÿå°±åœ¨21.3%ã€‚å¯è§è¿™ç§è§£å†³æ–¹æ¡ˆçš„æ•ˆçŽ‡æ˜¯æžé«˜çš„ã€‚ æ€»ç»“é€šè¿‡æœ¬ç¯‡çš„ä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»å¯¹è¿™ç§åœ¨Androidè®¾å¤‡ä¸Šå®žçŽ°é«˜æ–¯æ¨¡ç³Šæ•ˆæžœçš„è§£å†³æ–¹æ¡ˆæœ‰æ‰€äº†è§£äº†ã€‚æ˜¯ä¸æ˜¯æ‰‹ç—’æƒ³äº²è‡ªåŠ¨æ‰‹è¯•ä¸€è¯•å‘¢ï¼Ÿå½“ç„¶å•¦ï¼Œå¦‚æžœäº§å“è¯´è¦ä¸ªé«˜æ–¯æ¨¡ç³Šçš„æ•ˆæžœï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼šIOSä¸“åˆ©ï¼Androidåšä¸äº†ï¼ðŸ¤£ å‚è€ƒæ–‡çŒ® Google Apiæ–‡æ¡£ Google Blog-RenderScript in the Android Support Library Android : Simple and fast image processing with RenderScript Android RenderScript ç®€å•é«˜æ•ˆå®žçŽ°å›¾ç‰‡çš„é«˜æ–¯æ¨¡ç³Šæ•ˆæžœ;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨Hexo + Githubæ­å»ºè‡ªå·±çš„ç§äººåšå®¢]]></title>
      <url>%2F2016%2F09%2F17%2F%E5%85%B6%E5%AE%83%2F%E4%BD%BF%E7%94%A8Hexo%20%2B%20Github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%A7%81%E4%BA%BA%E5%8D%9A%E5%AE%A2%2F</url>
      <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç» ä¹Ÿè®¸ä½ å·²ç»åœ¨CSDNã€ç®€ä¹¦ç­‰åšå®¢ç½‘ç«™ä¸Šåˆ›å»ºäº†è‡ªå·±çš„åšå®¢ã€‚ä½†ä½œä¸ºç¨‹åºçŒ¿ï¼Œæ€»æƒ³èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå±žäºŽè‡ªå·±çš„ï¼Œèƒ½å¤Ÿè‡ªç”±DIYçš„ç§äººåšå®¢ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘å°†è¯¦ç»†è®²è§£å¦‚ä½•æ­å»ºèµ·ä¸€ä¸ªç§äººåšå®¢ã€‚ åŠ¨æ‰‹æ­å»ºè‡ªå·±çš„ç§äººåšå®¢å§ï¼ å…ˆä¸Šä¸€å¼ æ•ˆæžœå›¾: CoorChiceçš„Blog çœ‹èµ·æ¥è¿˜ä¸é”™å§ï¼Œç®€çº¦è€Œä¸“æ³¨äºŽå†™ä½œã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®žçŽ°å§ã€‚ å‡†å¤‡é˜¶æ®µé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŽ°å®‰è£…ä¸€äº›ä¸œè¥¿ã€‚ HomebrewHomebrewå®˜ç½‘ Homebrewæ˜¯Mac OSXä¸Šçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½åœ¨Macä¸­æ–¹ä¾¿çš„å®‰è£…è½¯ä»¶æˆ–è€…å¸è½½è½¯ä»¶ï¼Œç›¸å½“äºŽlinuxä¸‹çš„apt-getã€yumç¥žå™¨ï¼›Homebreå¯ä»¥åœ¨Macä¸Šå®‰è£…ä¸€äº›OS Xæ²¡æœ‰çš„UNIXå·¥å…·ï¼ŒHomebrewå°†è¿™äº›å·¥å…·ç»Ÿç»Ÿå®‰è£…åˆ°äº† /usr/local/Cellar ç›®å½•ä¸­ï¼Œå¹¶åœ¨ /usr/local/bin ä¸­åˆ›å»ºç¬¦å·é“¾æŽ¥ã€‚ æˆ‘ä»¬åªéœ€è¦æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œç¡®å®šæ‰§è¡ŒåŽå°±å¯ä»¥å®‰è£…Homebrew äº†ã€‚ 1ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" ä¸ºä»€ä¹ˆéœ€è¦å®‰è£…Homebrewï¼Ÿæ˜¯ä¸ºäº†æŽ¥ä¸‹æ¥æ–¹ä¾¿çš„å®‰è£…Node.js ðŸ˜‰ Node.jsç”±äºŽæˆ‘ä»¬ä½¿ç”¨Hexoæ¡†æž¶æ¥æ­å»ºç”Ÿæˆåšå®¢ï¼Œè€ŒHexoshiæ˜¯åŸºäºŽNode.jsçš„ã€‚æ‰€ä»¥ï¼Œè¿˜éœ€è¦å®‰è£…Node.jsã€‚å®‰è£…Node.jsåªéœ€è¦åœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼š 1brew install node å®‰è£…å®ŒæˆåŽï¼Œè¾“å…¥ï¼š 1node -v æ˜¾ç¤ºç‰ˆæœ¬å·è¡¨ç¤ºå·²ç»å®‰è£…å®Œæˆï¼Œå¦‚ä¸‹ï¼š 12MacBook-Pro:~ ******$ node -vv7.4.0 Node.jsä¸­æœ‰ä¸€ä¸ªå«åšnpm(Node Package Manager)çš„å·¥å…·ï¼Œç”¨äºŽæœç´¢ã€ä¸‹è½½ã€ç®¡ç†Nodeçš„ç›¸å…³å¥—ä»¶ã€‚æœ‰äº†è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿæ–¹ä¾¿çš„å®‰è£…Hexoäº†ã€‚ HexoHexoå®˜ç½‘ ç»ˆäºŽåˆ°ä¸»è§’å„¿å‡ºåœºäº†ã€‚ Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“Žï¼‰è§£æžæ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ å®‰è£…Hexoä¹Ÿååˆ†ç®€å•ã€‚åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š 1sudo npm install -g hexo-cli å®‰è£…å®ŒæˆåŽï¼Œè¾“å…¥hexo -version å¦‚æžœè¾“å‡ºä»¥ä¸‹ç±»ä¼¼ä¿¡æ¯è¡¨ç¤ºå®‰è£…å®Œæˆã€‚ 1234567891011121314hexo-cli: 1.0.2os: Darwin 16.3.0 darwin x64http_parser: 2.7.0node: 7.4.0v8: 5.4.500.45uv: 1.10.1zlib: 1.2.8ares: 1.10.1-DEVmodules: 51openssl: 1.0.2jicu: 58.2unicode: 9.0cldr: 30.0.3tz: 2016j hexo-deployer-gitè‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…·è¿™ä¸ªå·¥å…·èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿéƒ¨ç½²åšå®¢bingå¹¶å‘å¸ƒï¼Œå®‰è£…å®ƒåªéœ€è¦åœ¨ç»ˆç«¯è¾“å…¥ï¼š1npm install hexo-deployer-git --save Githubä»“åº“æˆ‘ä»¬éœ€è¦åˆ°è‡ªå·±çš„Githubä¸­åˆ›å»ºä¸€ä¸ªä»“åº“(è¿˜ä¸ä¼šä½¿ç”¨Githubçš„åŒå­¦ç™¾åº¦ã€Google ðŸ˜’)ï¼Œæ³¨æ„åå­—ä¸€å®šè¦æ˜¯è¿™ç§æ ¼å¼ï¼š 1ä½ çš„Githubè´¦å·çš„æ³¨å†Œåç§°.github.io æ¯”å¦‚æˆ‘çš„åšå®¢åœ°å€ï¼šhttps://chenbingx.github.io/ è¿™ä¸ªåç§°å°†æˆä¸ºä»¥åŽä½ çš„åšå®¢åœ°å€ã€‚è°¨æ…Žå•Šï¼ é…ç½®åšå®¢åˆ°æ­¤æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æ­å»ºåšå®¢çš„æ‰€æœ‰åŽŸææ–™ï¼Œä¸‹é¢æˆ‘ä»¬çœŸçš„è¦å¼€å§‹æ­å»ºäº†å•ŠðŸ˜‰ åˆ›å»ºæœ¬åœ°åšå®¢ä»“åº“ä½¿ç”¨å‘½ä»¤: 1hexo init ä½ çš„Githubè´¦å·çš„æ³¨å†Œåç§°.github.io ç„¶åŽä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º â€œä½ çš„Githubè´¦å·çš„æ³¨å†Œåç§°.github.ioâ€ çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯æˆ‘ä»¬çš„åšå®¢ç›®å½•ã€‚ è®¾ç½®ä¸»é¢˜ é¦–å…ˆï¼Œæˆ‘ä»¬ä¸€è·¯cdåˆ°åˆšåˆšåˆ›å»ºçš„ç›®å½•ä¸‹ã€‚å…ˆä¸‹è½½ä¸€ä¸ªä¸»é¢˜ï¼Œè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œéƒ½æ˜¯ä¸€ä¸ªå¥—è·¯ã€‚ 1git clone https://github.com/iissnan/hexo-theme-next themes/next è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯NexTè¿™ä¸ªä¸»é¢˜ï¼Œæ–‡æ¡£ååˆ†è¯¦ç»†ðŸ‘ã€‚NexTå®˜ç½‘ ç„¶åŽæˆ‘ä»¬åœ¨â€œä½ çš„Githubè´¦å·çš„æ³¨å†Œåç§°.github.ioâ€ç›®å½•ä¸‹æ‰¾åˆ°_config.ymlæ–‡ä»¶ï¼Œæ‰“å¼€å®ƒ(æˆ‘æ˜¯ç”¨Sublim Textæ‰“å¼€çš„)ã€‚command + Fæœç´¢åˆ°theme:ï¼Œåœ¨åŽé¢åŠ ä¸Šnextï¼Œè¿™æ˜¯æˆ‘ä»¬åˆšåˆšå­˜æ”¾NexTä¸»é¢˜çš„æ–‡ä»¶å¤¹åç§°ã€‚ æŽ¥ç€éœ€è¦æŠŠè¿™ä¸ªåšå®¢å’Œåˆšåˆšåˆ›å»ºçš„Githubä»“åº“å…³è”ã€‚command + Fæœç´¢deploy: ç„¶åŽæŒ‰ç…§ä»¥ä¸‹æ ¼å¼è®¾ç½®ï¼š 1234deploy: type: git //æˆ‘ä»¬ä½¿ç”¨Gitç®¡ç† repo: git@github.com:****/****.github.io.git //åˆšåˆšåˆ›å»ºçš„Githubä»“åº“çš„SSHç±»åž‹åœ°å€ï¼Œä½¿ç”¨HTTPSå¾ˆæœ‰å¯èƒ½é‡åˆ°æƒé™é—®é¢˜ branch: master //ä½ æ‰€æœŸæœ›çš„åˆ†æ”¯åç§° æ³¨æ„ï¼Œä»¥ä¸Šæ“ä½œä¸­ï¼Œ:å·åŽé¢çš„ç©ºæ ¼ä¸€å®šä¸èƒ½çœç•¥ã€‚å…¶ä»–è¯¦ç»†é…ç½®å¯ä»¥å‚è€ƒHexo çš„å®˜ç½‘ã€‚ å†™æ–‡ç« æˆ‘ä»¬çš„æ–‡ç« å­˜æ”¾åœ¨åšå®¢æ ¹ç›®å½•ä¸‹çš„source/_postsæ–‡ä»¶å¤¹ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹å»ºç«‹å­æ–‡ä»¶å¤¹ç®¡ç†æ–‡ç« åˆ†ç±»ã€‚æ–‡ç« ç±»åž‹è¢«è¦æ±‚å¿…é¡»æ˜¯.mdæ ¼å¼çš„ï¼Œå°±æ˜¯Markdownã€‚è¿™é‡Œå†™Markdownä¸Žå¹³æ—¶ç¨æœ‰ä¸åŒï¼Œéœ€è¦åœ¨å¤´éƒ¨æ·»åŠ ï¼š 123456---æ–‡ç« é…ç½®ä¿¡æ¯ã€‚è¿™é‡Œçš„é…ç½®ä¿¡æ¯ä¸Žæˆ‘ä»¬æ‰€ä½¿ç”¨çš„ä¸»é¢˜æœ‰å…³ã€‚---ä»Žè¿™é‡Œå¼€å§‹å†™æ­£æ–‡å†…å®¹... å‘å¸ƒåšå®¢æ³¨æ„ï¼Œä»¥ä¸‹æ“ä½œéœ€è¦cdåˆ°åšå®¢ç›®å½•ä¸‹ã€‚ 1234567hexo clean //æ¯æ¬¡æœ‰å¤§å˜åŠ¨ï¼Œæ¯”å¦‚æ›´æ¢ä¸»é¢˜ç­‰æ“ä½œæ—¶ï¼Œå¯ä»¥æ¸…ç†ä»¥ä¸‹ä¹‹å‰çš„ç¼“å­˜ï¼› hexo g //å³hexo generateï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ï¼›hexo s //å³hexo serverï¼Œå¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ï¼› hexo d //å³hexo deployï¼Œéƒ¨ç½²ç½‘ç«™åˆ°Githubã€‚ æ€»ç»“ç»ˆäºŽï¼Œæˆ‘ä»¬çš„åšå®¢æ­å»ºå®Œæˆäº†ã€‚æˆ‘ä»¬ä¸éœ€è¦ç§Ÿç”¨æœåŠ¡å™¨å°±æ­å»ºäº†ä¸€ä¸ªå±žäºŽè‡ªå·±çš„åšå®¢ï¼Œå¹¶ä¸”åœ¨Hexoæ¡†æž¶çš„æ”¯æŒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„ä¸»é¢˜æ¥è£…é¥°è‡ªå·±çš„Blogã€‚ å‚è€ƒæ–‡çŒ® Homebrewå®˜ç½‘ NexTå®˜ç½‘ Hexoå®˜ç½‘]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[XMLä¸­çš„Bitmap]]></title>
      <url>%2F2016%2F08%2F22%2FAndroid%E7%BB%98%E5%9B%BE%2FXML%E4%B8%AD%E7%9A%84Bitmap%2F</url>
      <content type="text"><![CDATA[åœ¨xmlä¸­çš„drawable/ç›®å½•ä¸‹å¯ä»¥åˆ›å»ºBitmapèµ„æºï¼Œè¿™æ ·å¯ä»¥å°†ä¸€å¼ å›¾ç‰‡ç›´æŽ¥è½¬æ¢æˆbitmapï¼Œå¹¶ç»™å®ƒè®¾ç½®ä¸€äº›å±žæ€§ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªBitmapDrawableå¯¹è±¡ã€‚ è°ƒç”¨æ–¹æ³•åœ¨xmlä¸­ï¼š12345æ ¼å¼: @[package:]drawable/filename&lt;ImageView android:layout_height="wrap_content" android:layout_width="wrap_content" android:src="@drawable/bitmap"/&gt; åœ¨Javaä¸­ï¼š123æ ¼å¼ï¼šR.drawable.filenameResources res =getResources();Drawable drawable = res.getDrawable(R.drawable.bitmap); è¯­æ³•123456789&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:src="@[package:]drawable/drawable_resource" android:antialias=["true" | "false"] android:dither=["true" | "false"] android:filter=["true" | "false"] android:gravity=["top" | "bottom" | "left" | "right" | "center_vertical" | "fill_vertical" | "center_horizontal" | "fill_horizontal" | "center" | "fill" | "clip_vertical" | "clip_horizontal"] android:mipMap=["true" | "false"] android:tileMode=["disabled" | "clamp" | "repeat" | "mirror"] /&gt; å¸¸ç”¨çš„9ä¸ªå±žæ€§ï¼š å±žæ€§ ä½œç”¨ src åœ¨è¿™é‡Œå¼•ç”¨å›¾ç‰‡èµ„æº antialias å¼€å¯æˆ–å…³é—­æŠ—é”¯é½¿ dither å¼€å¯æˆ–å…³é—­å›¾åƒæŠ–åŠ¨ã€‚å½“ä½¿ç”¨å›¾ç‰‡çš„dpiå’Œå±å¹•ä¸åŒ¹é…æ—¶ï¼Œå¼€å¯å›¾åƒæŠ–åŠ¨å¯ä»¥èŽ·å¾—æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæžœ filter å¼€å¯æˆ–å…³é—­æ»¤é•œã€‚å½“éœ€è¦å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾æ“ä½œæ—¶ï¼Œå¼€å¯æ»¤é•œå¯ä»¥ä½¿å›¾ç‰‡æ›´åŠ å¹³æ»‘ tiltMode è´´å›¾æ¨¡å¼ã€‚è¯¦ç»†è§ä¸‹æ–‡ã€‚è¯¥å±žæ€§ä¸Žgravityæ˜¯äº’æ–¥çš„ã€‚ gravity é‡å¿ƒã€‚è¯¦ç»†è§ä¸‹æ–‡ã€‚è¯¥å±žæ€§ä¸ŽtileModeæ˜¯äº’æ–¥çš„ã€‚ tint è®¾ç½®ç€è‰²ã€‚æœ‰ç§ç›–ä¸€ä¸ªè‰²å±‚åœ¨å›¾ç‰‡ä¸Šçš„æ„Ÿè§‰ã€‚ tintMode è®¾ç½®ç€è‰²æ¨¡å¼ã€‚è¯¦ç»†è§ä¸‹æ–‡ã€‚ mipMap æ˜¯å¦å°†å›¾ç‰‡æ ‡è®°ä¸ºmipmapï¼Œä½¿ç”¨mipmapèƒ½å¤Ÿæé«˜æ˜¾ç¤ºæ€§èƒ½ï¼Œé»˜è®¤ä¸ºfalse android:tileModeå±žæ€§è´´å›¾æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š å€¼ æ•ˆæžœ clamp å½“å›¾ç‰‡&gt;å®¹å™¨æ—¶ï¼Œå›¾ç‰‡å¤šä½™çš„éƒ¨åˆ†ä¼šè¢«æˆªåŽ»ï¼›å½“å›¾ç‰‡&lt;å®¹å™¨æ—¶ï¼Œä¼šå¤åˆ¶å›¾ç‰‡çš„è¾¹ç¼˜éƒ¨åˆ†å¡«å……ç©ºç™½ disable å›¾ç‰‡ä¼šæ ¹æ®å®¹å™¨å¤§å°è¿›è¡Œç¼©æ”¾ã€‚è¿™æ˜¯é»˜è®¤å€¼ repeat å›¾ç‰‡ä¼šé‡å¤å¡«å……æ»¡å®¹å™¨ã€‚ä½†æ˜¯å½“å›¾ç‰‡&gt;å®¹å™¨æ—¶ï¼Œå¤šä½™éƒ¨åˆ†ä¼šè¢«æˆªåŽ» mirror å›¾ç‰‡ä¼šä»¥é•œåƒé‡å¤çš„å½¢å¼å¡«æ»¡å®¹å™¨ã€‚åŒæ ·ï¼Œå½“å›¾ç‰‡&gt;å®¹å™¨æ—¶ï¼Œå¤šä½™éƒ¨åˆ†ä¼šè¢«æˆªåŽ» android:gravityå±žæ€§å½“å›¾ç‰‡&lt;å®¹å™¨æ—¶ï¼Œé‡å¿ƒå†³å®šäº†å®ƒåœ¨å®¹å™¨ä¸­çš„ä½ç½®ã€‚é‡å¿ƒæœ‰ä»¥ä¸‹å‡ ç§ï¼š å€¼ æ•ˆæžœ top é¡¶éƒ¨ bottom åº•éƒ¨ left å·¦è¾¹ right å³è¾¹ center ä¸­å¿ƒ center_vertical åž‚ç›´ä¸­å¿ƒ center_horizontal æ°´å¹³ä¸­å¿ƒ fill å……æ»¡å®¹å™¨ï¼Œå’ŒtileMode=â€disableâ€æ˜¯ä¸€ä¸ªæ•ˆæžœ fill_vertical å……æ»¡åž‚ç›´æ–¹å‘ fill_horizontal å……æ»¡æ°´å¹³æ–¹å‘ clip_vertical æžä¸æ‡‚æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿæ±‚å¤§ç¥žè§£ç­” clip_horizontal æžä¸æ‡‚æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿæ±‚å¤§ç¥žè§£ç­” android:tintModeå±žæ€§ç€è‰²æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š å€¼ æ•ˆæžœ add src_in src_over src_atop ä»¥ä¸Šå‡ ç§å…¨æŠŠå›¾ç‰‡ç»™é®ä½äº†ï¼Œçœ‹ä¸å‡ºæœ‰ä»€ä¹ˆå·®åˆ«ã€‚æ±‚æŒ‡å¯¼ï¼ mutiply ç€è‰²ä¸Žé€æ˜Žåº¦ç›¸ç»“åˆï¼Œç›¸å½“äºŽåœ¨å›¾ç‰‡ä¸Šç›–äº†ä¸€å±‚ä¸æ˜¯å¾ˆæ·±çš„é¢œè‰² screen åŒä¸Šï¼Œä½†æ˜¯é¢œè‰²ä¼šæ›´æµ… ä¸€ä¸ªä¾‹å­1234567891011&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:alpha="1" android:antialias="true" android:dither="true" android:filter="true" android:gravity="clip_vertical" android:src="@drawable/share" android:tint="#fc747e" android:tintMode="multiply" /&gt; æ•ˆæžœå›¾ï¼š]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidæœ¬åœ°åŒ–å…¨å±€å¯¹è±¡çš„å®žè·µâ€”â€”SharePreferences]]></title>
      <url>%2F2016%2F08%2F21%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FAndroid%E6%9C%AC%E5%9C%B0%E5%8C%96%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94SharePreferences%2F</url>
      <content type="text"><![CDATA[ä¸Šä¸€ç¯‡è®²åˆ°äº†ä½¿ç”¨Fileçš„æ–¹å¼æ¥æœ¬åœ°åŒ–å…¨å±€å¯¹è±¡ï¼Œå®ƒé€‚åˆä½“é‡è¾ƒå¤§çš„å…¨å±€å¯¹è±¡ã€‚å¯¹äºŽä¸€äº›ä½“é‡è¾ƒå°çš„å…¨å±€ï¼Œå¹¶ä¸”å¯¹å®‰å…¨æ€§æœ‰è¦æ±‚çš„å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨SharePreferenceæ¥è¿›è¡Œå¯¹åƒçš„æœ¬åœ°åŒ–ã€‚æ³¨æ„ï¼Œè¿™ç§æ–¹å¼é€‚åˆè¾ƒå°çš„å¯¹è±¡ï¼Œè¾ƒå¤§çš„å¯¹è±¡è¿˜æ˜¯åº”è¯¥é€‰ç”¨Fileçš„æ–¹å¼ã€‚ ä½¿ç”¨å®žä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143//å…¨å±€å¯¹è±¡å’Œä¸Šä¸€ç¯‡ä¸­ä¸€æ ·public class User implements Serializable, Cloneable &#123; public static final long serialVersionUID = 1L; private int userId; private String userNikeName; private String userRealName; private int userLevel; private int vipLevel; public User() &#123; &#125; public User(int userId, String userNikeName, String userRealName, int userLevel, int vipLevel) &#123; this.userId = userId; this.userNikeName = userNikeName; this.userRealName = userRealName; this.userLevel = userLevel; this.vipLevel = vipLevel; &#125; public int getUserId() &#123; return userId; &#125; public void setUserId(int userId) &#123; this.userId = userId; &#125; public String getUserNikeName() &#123; return userNikeName; &#125; public void setUserNikeName(String userNikeName) &#123; this.userNikeName = userNikeName; &#125; public String getUserRealName() &#123; return userRealName; &#125; public void setUserRealName(String userRealName) &#123; this.userRealName = userRealName; &#125; public int getUserLevel() &#123; return userLevel; &#125; public void setUserLevel(int userLevel) &#123; this.userLevel = userLevel; &#125; public int getVipLevel() &#123; return vipLevel; &#125; public void setVipLevel(int vipLevel) &#123; this.vipLevel = vipLevel; &#125; protected User(Parcel in) &#123; this.userId = in.readInt(); this.userNikeName = in.readString(); this.userRealName = in.readString(); this.userLevel = in.readInt(); this.vipLevel = in.readInt(); &#125;&#125;//ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•å®žçŽ°äº†Objectå¯¹è±¡å’Œç¼–ç æ–¹å¼ä¸ºBase64çš„å­—ç¬¦ä¸²çš„äº’ç›¸è½¬æ¢public static final String ObjectToBase64String(Object object) throws IOException &#123; ByteArrayOutputStream baos = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(baos); oos.writeObject(object); String base64String = Base64.encodeToString(baos.toByteArray(), Base64.DEFAULT); //é‡‡ç”¨Base64ç¼–ç æ–¹å¼ç¼–ç å¯¹è±¡ç”Ÿæˆçš„å­—èŠ‚æ•°ç»„ä¸ºå­—ç¬¦ä¸² if (oos != null)&#123; oos.close(); &#125; if (baos != null)&#123; baos.close(); &#125; return base64String; &#125; public static final &lt;T&gt; T Base64StringToObject(String base64String, Class&lt;T&gt; clazz) throws IOException, ClassNotFoundException &#123; byte[] bytes = Base64.decode(base64String, Base64.DEFAULT); //è§£ç  ByteArrayInputStream bais = new ByteArrayInputStream(bytes); ObjectInputStream ois = new ObjectInputStream(bais); T t = (T) ois.readObject(); if (ois != null) &#123; ois.close(); &#125; if (bais != null) &#123; bais.close(); &#125; return t; &#125; //ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•æ˜¯è¿›è¡Œå­˜å–çš„public class SharePreferencesUtils &#123; public static final void saveObject(@NonNull Context context, String key, @NonNull Object object) throws IOException &#123; SharedPreferences sp = context.getSharedPreferences(key, Context.MODE_PRIVATE); SharedPreferences.Editor editor = sp.edit(); String base64String = AppUtils.ObjectToBase64String(object); editor.putString(key, base64String); editor.commit(); &#125; public static final &lt;T&gt; T restoreObject(@NonNull Context context, String key, Class&lt;T&gt; clazz) throws IOException, ClassNotFoundException &#123; SharedPreferences sp = context.getSharedPreferences(key, Context.MODE_PRIVATE); String base64String = sp.getString(key, ""); T t = null; if (!base64String.equals(""))&#123; t = AppUtils.Base64StringToObject(base64String, clazz); &#125; return t; &#125;&#125;//çŽ°åœ¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨å•¦private void saveUserToSP(User user)&#123; try &#123; SharePreferencesUtils.saveObject(this, AppConstant.USER_KEY,user); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; private User restoreUserFromSP()&#123; User user = null; try &#123; user = SharePreferencesUtils.restoreObject(this,AppConstant.USER_KEY,User.class); &#125; catch (IOException | ClassNotFoundException e) &#123; e.printStackTrace(); &#125; return user; &#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidæœ¬åœ°åŒ–å…¨å±€å¯¹è±¡çš„å®žè·µâ€”â€”File]]></title>
      <url>%2F2016%2F08%2F21%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FAndroid%E6%9C%AC%E5%9C%B0%E5%8C%96%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94File%2F</url>
      <content type="text"><![CDATA[æœ¬åœ°åŒ–å…¨å±€å˜é‡åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€äº›å¯¹è±¡æ˜¯éœ€è¦ä¾›å…¨å±€ä½¿ç”¨çš„ï¼Œå½“è¿™æ ·çš„å¯¹è±¡æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå°†å®ƒæœ¬åœ°åŒ–æ˜¯éžå¸¸å¿…è¦çš„ã€‚è¿™æ ·ä¸ä»…èƒ½å¤Ÿé¿å…é¢‘ç¹çš„åˆ›å»ºè¿™äº›å¤æ‚çš„å¯¹è±¡ï¼Œè¿˜èƒ½ä¿å­˜ä½å¯¹è±¡çš„çŠ¶æ€ã€‚ä¸‹é¢å…ˆæ˜¯ä¸€ç§æœ¬åœ°åŒ–å…¨å±€å¯¹è±¡çš„è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦ä½¿ç”¨Fileå®žçŽ°ã€‚æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•åœ¨è¿›è¡Œå¤§é‡å¤æ‚æ•°æ®çš„å­˜å–è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½é€ æˆANRï¼Œå› ä¸ºä½œä¸ºå…¨å±€å˜é‡ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„ä¿®æ”¹å’Œè¯»å–å®ƒã€‚ ä½¿ç”¨ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156//å…¨å±€å¯¹è±¡ç±»//éœ€è¦å®žçŽ°SerializableæŽ¥å£ï¼Œä¿è¯å¯¹è±¡å¯åºåˆ—åŒ–ã€‚//å®žçŽ°CloneableæŽ¥å£ï¼Œä½¿å¯¹è±¡å¯ä»¥è¢«cloneã€‚public class User implements Serializable, Cloneable &#123; //serialVersionUIDæ˜¯Serializableçš„ä¸€ä¸ªç‰¹æ€§å˜é‡ï¼Œå®ƒæ˜¯å¯¹è±¡åºåˆ—åŒ–çš„ä¸€ä¸ªæ ‡è¯†ï¼Œé€šè¿‡è¿™ä¸ªæ ‡è¯†æ£€æŸ¥ï¼Œå¯¹è±¡æ‰èƒ½å¤Ÿè¢«æ­£ç¡®çš„ååºåˆ—åŒ–ã€‚ //è¿™é‡Œæˆ‘ä»¬æŠŠå®ƒçš„serialVersionUIDå›ºå®šï¼Œä¿è¯ä¸‹æ¬¡ä»Žæœ¬åœ°æ–‡ä»¶è¯»å–æ—¶èƒ½å¤Ÿæ­£ç¡®çš„åºåˆ—åŒ–ã€‚å¦‚æžœä¸æŒ‡å®šï¼ŒJavaä¼šæ¯æ¬¡éšæœºç”Ÿæˆï¼Œå½“æˆ‘ä»¬è¯•å›¾åŽ»è¯»å–æ—¶ï¼Œå°±ä¼šèŽ·å¾—å¤±è´¥ã€‚ public static final long serialVersionUID = 1L; private int userId; private String userNikeName; private String userRealName; private int userLevel; private int vipLevel; public User() &#123; &#125; public User(int userId, String userNikeName, String userRealName, int userLevel, int vipLevel) &#123; this.userId = userId; this.userNikeName = userNikeName; this.userRealName = userRealName; this.userLevel = userLevel; this.vipLevel = vipLevel; &#125; public int getUserId() &#123; return userId; &#125; public void setUserId(int userId) &#123; this.userId = userId; &#125; public String getUserNikeName() &#123; return userNikeName; &#125; public void setUserNikeName(String userNikeName) &#123; this.userNikeName = userNikeName; &#125; public String getUserRealName() &#123; return userRealName; &#125; public void setUserRealName(String userRealName) &#123; this.userRealName = userRealName; &#125; public int getUserLevel() &#123; return userLevel; &#125; public void setUserLevel(int userLevel) &#123; this.userLevel = userLevel; &#125; public int getVipLevel() &#123; return vipLevel; &#125; public void setVipLevel(int vipLevel) &#123; this.vipLevel = vipLevel; &#125; protected User(Parcel in) &#123; this.userId = in.readInt(); this.userNikeName = in.readString(); this.userRealName = in.readString(); this.userLevel = in.readInt(); this.vipLevel = in.readInt(); &#125;&#125;//æŠŠå¯¹è±¡æœ¬åœ°ä¿å­˜ public static final void saveObject(String path, Object object) &#123; FileOutputStream fos = null; ObjectOutputStream oos = null; File file = new File(path); try &#123; LogUtils.e(file.getAbsolutePath()); fos = new FileOutputStream(file); oos = new ObjectOutputStream(fos); oos.writeObject(object); //å†™å…¥å¯¹è±¡ &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (oos != null) &#123; oos.close(); &#125; if (fos != null) &#123; fos.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; //ä»Žæœ¬åœ°è¯»å–å¯¹è±¡çš„æ–¹æ³•public static final Object restoreObject(String path) throws FileNotFoundException &#123; FileInputStream fis = null; ObjectInputStream ois = null; Object object = null; File file = new File(path); if (!file.exists())&#123; throw new FileNotFoundException("è¯·æ±‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚"); &#125; try &#123; LogUtils.e(file.getAbsolutePath()); fis = new FileInputStream(file); ois = new ObjectInputStream(fis); object = ois.readObject(); //è¯»å–å¯¹è±¡ &#125; catch (ClassNotFoundException | IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (ois != null) &#123; ois.close(); &#125; if (fis != null) &#123; fis.close(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return object; &#125; &#125; //ä½¿ç”¨//åœ¨æ¯æ¬¡ä¿®æ”¹å¯¹è±¡çš„æ—¶å€™éƒ½éœ€è¦è°ƒç”¨ä¿å­˜åŽ»è¦†ç›–ä¿å­˜æœ¬åœ°çš„å¯¹è±¡æ–‡ä»¶ã€‚private void saveUser(@NonNull User user) &#123; //æœ€åŽçš„.xxxæ˜¯å¯ä»¥éšä¾¿æŒ‡å®šçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨.txt String savePath = FileUtils.getAppObjectDir() + "user" + user.getUserId() + ".obj"; FileUtils.saveObject(savePath, user); &#125; private User restoreUser() &#123; User restoreUser = null; String path = FileUtils.getAppObjectDir() + "user" + 1000000 + ".obj"; try &#123; restoreUser = (User) FileUtils.restoreObject(path); &#125; catch (FileNotFoundException | NullPointerException e) &#123; e.printStackTrace(); &#125; return restoreUser; &#125; //æœ€åŽä¸è¦å¿˜è®°åœ¨AndroidMainfest.xmlä¸­æ·»åŠ æƒé™&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/&gt;&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;&lt;uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"/&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Reflectåå°„ç®€ç•¥æ•™ç¨‹]]></title>
      <url>%2F2016%2F08%2F20%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FReflect%E5%8F%8D%E5%B0%84%E7%AE%80%E7%95%A5%E6%95%99%E7%A8%8B%2F</url>
      <content type="text"><![CDATA[ç®€å•ä»‹ç»javaçš„åå°„æœºåˆ¶ä½¿javaæˆä¸ºä¸€ç§åŠ¨æ€è¯­è¨€ï¼Œé€šè¿‡åå°„æœºåˆ¶èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶æˆ–çš„ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»–çš„åŒ…åï¼Œå®ƒçš„æ‰€æœ‰æ–¹æ³•å’Œæˆå‘˜å˜é‡ã€‚å½“ç„¶çŸ¥é“åŒ…åå¯ä»¥ç›´æŽ¥å–å¾—è¯¥ç±»ï¼Œä»Žè€ŒèŽ·å¾—ä»–çš„å®žä¾‹ã€‚ èŽ·å–Classå¯¹è±¡12345678//é€šè¿‡å¯¹è±¡èŽ·å¾—ï¼šclass = b.getClass();//é€šè¿‡å®Œæ•´åŒ…ç±»åèŽ·å¾—ï¼šclass = Class.fromName("åŒ…å.ç±»å")//æœ¬åŒ…å¯ä»¥é€šè¿‡.classèŽ·å¾—ï¼šclass = ç±»å.class é€šè¿‡åå°„è°ƒç”¨ç§æœ‰æ–¹æ³•123456789101112131415161718192021//èŽ·å¾—ç±»Class&lt;?&gt; c1 = persen.getClass();try &#123; //é€šè¿‡æ–¹æ³•åèŽ·å¾—æ–¹æ³•ï¼Œè¿™æ˜¯ç§æœ‰æ–¹æ³• Method method1 = c1.getDeclaredMethod("method1"); //è°ƒç”¨æ–¹æ³•ç§æœ‰æ–¹æ³•çš„å…³é”® method1.setAccessible(true); //è®¾ç½®è¯¥ç§æœ‰æ–¹æ³•å¯è¢«è°ƒç”¨ //æ–¹æ³•è°ƒç”¨ method1.invoke(c1.newInstance()); //è¿™æ˜¯å¸¦å‚æ•°çš„æ–¹æ³•ï¼Œéœ€è¦åœ¨èŽ·å¾—æ–¹æ³•çš„æ—¶å€™æŠŠå‚æ•°çš„ç±»åž‹éƒ½åŠ ä¸Š Method method2 = c1.getDeclaredMethod("method2",String.class); //è°ƒç”¨æ–¹æ³•ï¼Œå¡«å†™å‚æ•° method2.invoke(c1.newInstance(),"kk"); //è¿™æ˜¯æœ‰è¿”å›žå€¼çš„æ–¹æ³• Method method3 = c1.getDeclaredMethod("method3"); return (int) method3.invoke(c1.newInstance());&#125; catch (NoSuchMethodException | InvocationTargetException | IllegalAccessException | InstantiationException e) &#123; e.printStackTrace();&#125; é€šè¿‡åå°„æ“ä½œç§æœ‰å±žæ€§123456789101112131415Class c1 = persen.getClass();try &#123; //é€šè¿‡å±žæ€§åèŽ·å¾—å±žæ€§ Field name = c1.getDeclaredField("name"); //ç”±äºŽæ˜¯ç§æœ‰å±žæ€§ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®å®ƒå¯è§ name.setAccessible(true); //ç›´æŽ¥ä¿®æ”¹è¯¥å¯¹è±¡çš„è¯¥å±žæ€§çš„å€¼ name.set(persen,"å°æ˜Ž"); //èŽ·å¾—è¯¥å¯¹è±¡çš„è¯¥å±žæ€§çš„å€¼ return (String) name.get(persen);&#125; catch (NoSuchFieldException e) &#123; e.printStackTrace();&#125; catch (IllegalAccessException e) &#123; e.printStackTrace();&#125; å¥‰ä¸Šä¸€ä¸ªè°ƒç”¨åå°„çš„å¸®åŠ©ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public static Method getMethod(@NonNull Class&lt;?&gt; clazz, @NonNull String methodName) throws NoSuchMethodException &#123; Method method = clazz.getDeclaredMethod(methodName); method.setAccessible(true); return method; &#125; public static Method getMethod(@NonNull Class&lt;?&gt; clazz, @NonNull String methodName, Class... parameterTypes) throws NoSuchMethodException &#123; Method method = clazz.getDeclaredMethod(methodName, parameterTypes); method.setAccessible(true); return method; &#125; public static Method getApiMethod(@NonNull Class&lt;?&gt; clazz, @NonNull String methodName) throws NoSuchMethodException &#123; Method[] methods = clazz.getDeclaredMethods(); for (Method method : methods) &#123; if (method.getName().contains(methodName)) &#123; method.setAccessible(true); return method; &#125; &#125; return null; &#125; public static void invokeMethod(@NonNull Class&lt;?&gt; clazz, @NonNull String methodName) throws IllegalAccessException, InstantiationException, InvocationTargetException, NoSuchMethodException &#123; getMethod(clazz, methodName).invoke(clazz.newInstance()); &#125; public static &lt;T&gt; void invokeMethod(T t, @NonNull String methodName) throws IllegalAccessException, InstantiationException, InvocationTargetException, NoSuchMethodException &#123; getMethod(t.getClass(), methodName).invoke(t); &#125; public static &lt;T, V&gt; void invokeApiMethod(T t, @NonNull String methodName, V v, Class... parameterTypes) throws IllegalAccessException, InstantiationException, InvocationTargetException, NoSuchMethodException &#123; getApiMethod(t.getClass(), methodName).invoke(t, v); &#125; public static Field getVariable(@NonNull Class&lt;?&gt; clazz, @NonNull String variableName) throws NoSuchFieldException &#123; Field variable = clazz.getDeclaredField(variableName); variable.setAccessible(true); return variable; &#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Dagger2ç®€ç•¥æ•™ç¨‹]]></title>
      <url>%2F2016%2F08%2F19%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FDagger2%E7%AE%80%E7%95%A5%E6%95%99%E7%A8%8B%2F</url>
      <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯æ³¨è§£ä¾èµ– ä¾èµ–ï¼šå½“Aç±»ä¸­æœ‰Bç±»çš„å®žä¾‹æ—¶ï¼ˆæˆ–è€…Aç±»éœ€è¦ç”¨åˆ°Bç±»çš„ä¸€äº›ç‰¹æ€§ï¼‰ï¼Œå°±ç§°Bç±»ä¸ºAç±»çš„ä¾èµ–ã€‚ æ³¨è§£ï¼šæ— éœ€newå°±èƒ½æŠŠBç±»çš„ä¸€ä¸ªå®žä¾‹æ·»åŠ åˆ°Aç±»ä¸­çš„æ“ä½œã€‚Dagger2ç®€ä»‹Dagger2æ˜¯ç”±GoogleæŽ¥æ‰‹Dagger1å¼€å‘çš„ä¸€ä¸ªæ³¨è§£æ¡†æž¶ï¼Œå®ƒçš„ä¸»è¦ç‰¹æ€§å°±æ˜¯åˆ©ç”¨æœ‰å‘æ— çŽ¯ï¼ˆè¿™ç§ç»“æž„æ„å‘³ç€åœ¨ä½ è®¾è®¡æ³¨è§£æ¡†æž¶çš„æ—¶å€™ï¼Œä¸èƒ½å½¢æˆå¾ªçŽ¯ï¼‰è¿™æ ·ä¸€ç§ç»“æž„æ¥æè¿°ç±»é—´çš„å…³ç³»ï¼Œä»Žè€Œè¾¾åˆ°ä¸€ç§â€œæè¿°åˆ›å»ºâ€çš„æ•ˆæžœã€‚æ¯”å¦‚ï¼šçŽ°åœ¨éœ€è¦ä¸€å° å’–å•¡æœº ï¼Œå¯ä»¥é€šè¿‡äº‹å…ˆæè¿°å¥½å…¶å¦‚ä½•åˆ¶é€ ï¼ˆç›¸å½“äºŽæè¿°äº†ä¸€ä¸ªè“å›¾ï¼‰ï¼Œç„¶åŽä½ å°±åªéœ€è¦è¯´ï¼ˆå³ä½¿ç”¨ @Inject æ³¨è§£ç¬¦ï¼‰æ¥ä¸€å°å’–å•¡æœºï¼ŒDaggerå°±ä¼šåˆ¶é€ ä¸€å°åœ¨ä½ æŒ‡å®šçš„åœ°æ–¹ã€‚æ³¨è§£ç¬¦@Inject ç”¨äºŽå‘Šè¯‰Daggerï¼Œä½ çŽ°åœ¨éœ€è¦æ³¨å…¥ä¸€ä¸ªå®žä¾‹åˆ°è¿™ä¸ªåœ°æ–¹ã€‚ 123456public class CoffeMakerï½› @Inject CoffeMachine coffeMachine; /*Daggerä¼šè‡ªåŠ¨è¯†åˆ«æœ¬æ¬¡éœ€æ±‚ï¼Œå¹¶å¼€å§‹åŒ¹é…CoffeMachine çš„åˆ¶é€ è¯´æ˜Žï¼Œåˆ¶é€ ä¸€å°CoffeMachineæ”¾å€’è¯¥ç±»ä¸­ã€‚ */ ä½¿ç”¨@Injectæ³¨è§£æž„é€ å™¨ï¼Œå¯ä»¥å‘Šè¯‰Daggerï¼Œè¯¥æž„é€ å™¨å½“æœ‰åœ°æ–¹éœ€è¦æ³¨å…¥å®žä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæž„é€ å™¨æ¥åˆ›å»ºå®žä¾‹ã€‚ 1234567public class CoffeMachine&#123; //çŽ°åœ¨Daggerå·²ç»çŸ¥é“äº†è¿™ä¸ªæž„é€ å™¨çš„å­˜åœ¨ï¼Œåœ¨éœ€è¦æ—¶å°†è¢«è°ƒç”¨ã€‚ @Inject public CoffeMachine()&#123; initCoffeMachine(); &#125;&#125; @Moduleç”¨äºŽæ ‡è¯†ä¸€ä¸ªæ¨¡åž‹ç±»ï¼Œå®žä¾‹çš„åˆ›å»ºæè¿°éœ€è¦æ”¾åˆ°è¿™ä¸ªç±»ä¸­ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªåˆ›å»ºè§„åˆ™éƒ½éœ€è¦ç”¨ @Provides æ¥æ ‡æ³¨ï¼Œè¿™æ ·Daggeræ‰èƒ½åœ¨éœ€è¦è°ƒç”¨çš„æ—¶å€™åŽ»åŒ¹é…å®ƒã€‚123456789101112131415@Modulepublic class CoffeMachineModuleï½› private CoffeMachine mCoffeMachine; public CoffeMachineModule(CoffeMachine coffeMachine)ï½› mCoffeMachine = coffeMachine &#125; /** * å½“æœ‰åœ°æ–¹è°ƒç”¨äº†@Inject CoffeMachine coffeMachine * ä¹‹åŽï¼ŒDaggerå°±ä¼šåŒ¹é…è¯¥æ–¹æ³•æ¥æä¾›ä¸€ä¸ªå®žä¾‹ç»™è°ƒç”¨è€…ã€‚ */ @Provides CoffeMachine providesCoffeMachine()&#123; return mCoffeMachine; &#125; @Provideså¿…é¡»æ”¾åœ¨@Moduleç±»ä¸­ï¼Œæˆ–è€…è¯´æœ‰è¿™ä¸ªæ³¨è§£ç¬¦çš„ç±»éƒ½éœ€è¦ä½¿ç”¨@Moduleæ³¨è§£ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ@Providesæ³¨è§£çš„æ–¹æ³•ä¸­å¦‚æžœæœ‰å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°ä¹Ÿå¿…é¡»ç”±ä¸€ä¸ª@Providesæ‰€æ³¨è§£çš„æ–¹æ³•æä¾›ã€‚å®ƒç›¸å½“äºŽæ ‡æ³¨äº†ä¸€ä¸ªå®žä¾‹æä¾›è€…ã€‚123456789101112/*è¿™ä¸ªå®žä¾‹æä¾›è€…éœ€è¦ä¸€ä¸ªHeaterå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åˆéœ€è¦ä¸‹é¢çš„ Heaterå®žä¾‹æä¾›è€…æ¥æä¾›ã€‚ä»¥æ­¤ç±»æŽ¨ã€‚*/@ProvidesCoffeMachine2 providesCoffeMachine2(Heater heater)&#123; return new CoffeMachine2(heater);&#125;@ProvidesHeater provideHeater()&#123; return new Heater();&#125; @Componentè¿™æ˜¯ä¸ªç»„ä»¶ä½¿@Injectä¸Ž@Moduleäº§ç”Ÿå…³è”çš„æŽ¥å£ç±»ï¼Œå¹¶ä¸”Daggerä¼šæ ¹æ®è¿™ä¸ªç±»è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæœ‰åä¸ºDagger + è¯¥æŽ¥å£ç±»ç±»å çš„ç±»ï¼Œè¿™ä¸ªç±»é‡‡ç”¨çš„æ˜¯æž„é€ å™¨ï¼ˆBuilderï¼‰æ¨¡å¼ã€‚åœ¨è¿™ä¸ªæŽ¥å£ä¸­ï¼Œå¯ä»¥æŒ‡æ˜Žéœ€è¦æ³¨è§£çš„åœ°æ–¹ï¼Œæˆ–è€…æš´éœ²ä¸€äº›æ‰€éœ€çš„å®žä¾‹ã€‚1234567@Component(module = &#123;CoffeMachine.class&#125;)public interface CoffeMakerComponent&#123; //è¿™ä¸ªæ–¹æ³•æŒ‡æ˜Žéœ€è¦æ³¨è§£çš„åœ°æ–¹ TagerActivity inject(TagerActivity tagerActivity); Suger getSuger();&#125; @Singletonè¢«æ ‡æ³¨çš„ç±»å°†åªå­˜åœ¨ä¸€ä¸ªå®žä¾‹ã€‚ 12345678910111213//åŠ äº†@Singletonä¹‹åŽæç¤ºè¿™ä¸ªæŽ¥å£å°†è¢«å¤šä¸ªçº¿ç¨‹å…±åŒæ“ä½œã€‚@Singleton@Component(module = &#123;CoffeMachine.class&#125;)public interface CoffeMakerComponent&#123; //è¿™ä¸ªæ–¹æ³•æŒ‡æ˜Žéœ€è¦æ³¨è§£çš„åœ°æ–¹ TagerActivity inject(TagerActivity tagerActivity); Suger getSuger();&#125;//@Singletonæ ‡æ³¨åŽå°†åªä¼šäº§ç”Ÿä¸€ä¸ªHeaterå®žä¾‹@Provides @Singleton Heater provideHeater()&#123; return new Heater()&#125; @Scopeè‡ªå®šä¹‰æ³¨è§£ç¬¦ï¼Œå¯ä»¥æ³¨è§£ä¸€ä¸ªè‡ªå®šä¹‰çš„æ³¨è§£ç¬¦æ¥æè¿°ä¸€ä¸ªä½œç”¨èŒƒå›´ã€‚ 12345678//ä¸‹é¢æ³¨è§£äº†ä¸€ä¸ªæ–°çš„æ³¨è§£ç¬¦â€”â€”@PerActibityï¼Œä½¿ç”¨è¿™ä¸ªæ³¨è§£ç¬¦çš„åœ°æ–¹ä½œç”¨èŒƒå›´å°†è¢«é™åˆ¶åœ¨Activityçš„ç”Ÿå‘½å‘¨æœŸå†…ã€‚@Scope@Retention(RUNTIME)public @interface PerActivity()&#123;&#125;//ä¸‹é¢æ³¨è§£äº†ä¸€ä¸ªæ–°çš„æ³¨è§£ç¬¦â€”â€”@PerFragemntï¼Œä½¿ç”¨è¿™ä¸ªæ³¨è§£ç¬¦çš„åœ°æ–¹ä½œç”¨èŒƒå›´å°†è¢«é™åˆ¶åœ¨Fragmentçš„ç”Ÿå‘½å‘¨æœŸå†…ã€‚@Scope@Retention(RUNTIME)public @interface PerFragment()&#123;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[RxJavaç®€ç•¥æ•™ç¨‹]]></title>
      <url>%2F2016%2F08%2F18%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FRxJava%E7%AE%80%E7%95%A5%E6%95%99%E7%A8%8B%2F</url>
      <content type="text"><![CDATA[ä¸­æ–‡å®˜æ–¹æ–‡æ¡£ æ•™ç¨‹ ä¸€ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å“åº”å¼ç¼–ç¨‹1.å°½ç®¡å“åº”å¼ç¼–ç¨‹ä»£ç é‡æ¯”æ™®é€šçº¿ç¨‹å¤„ç†æ–¹å¼ä»£ç é‡å¤§ï¼Œä½†æ˜¯å“åº”å¼çš„çªå‡ºç‰¹ç‚¹å°±æ˜¯æ›´ç¬¦åˆäººçš„é€»è¾‘æ€ç»´ï¼Œæ›´å®¹æ˜“è¢«ç†è§£ã€‚2.å“åº”å¼ç¼–ç¨‹ç›®çš„æ˜¯ä¸ºäº†å¤„ç†çº¿ç¨‹å·¥ä½œçš„ï¼Œå®ƒæœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆObserverï¼‰åœ¨éšæ—¶å¾…å‘½ï¼Œå‡†å¤‡æŽ¥æ”¶å¯è§‚å¯Ÿå¯¹è±¡ï¼ˆObservableï¼‰å‘é€çš„æ•°æ®ã€‚3.å“åº”å¼ç¼–ç¨‹çš„ä»£ç èƒ½å¤ŸæŒ‰ç…§é¡ºåºä¸€æ­¥æ­¥æ‰§è¡Œã€‚ äºŒã€é¢„å¤‡æ¦‚å¿µ1.Subscriberè®¢é˜…è€…ï¼ˆæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…ï¼‰ï¼Œå®ƒå¯ä»¥è®¢é˜…ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡Observableï¼Œé€šå¸¸è¿™ä¸ªå¯è§‚å¯Ÿå¯¹ è±¡å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚2.Observableå¯è§‚å¯Ÿå¯¹è±¡ï¼Œä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä½œä¸ºä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡ã€‚å¯è§‚å¯Ÿå¯¹è±¡åˆ†ä¸ºçƒ­å’Œå†·ï¼š çƒ­çš„å¯è§‚å¯Ÿå¯¹è±¡ä¸€åˆ›å»ºå°±èƒ½å¤Ÿå‘å°„æ•°æ®ï¼Œå› æ­¤è®¢é˜…å®ƒçš„è§‚å¯Ÿè€…Observerå¯èƒ½å°±ä¼šå› ä¸ºåˆ›å»ºçš„æ¯”è¾ƒæ™šè€Œé”™è¿‡ä¸€äº›æ•°æ®ã€‚ å†·çš„å¯è§‚å¯Ÿå¯¹è±¡éœ€è¦ç­‰åˆ°æœ‰ä¸€ä¸ªè§‚å¯Ÿè€…è§‚å¯Ÿå®ƒæ—¶ï¼Œå®ƒæ‰å¼€å§‹å‘å°„æ•°æ®ã€‚ è¿˜æœ‰ä¸€ç§æ¯”è¾ƒç‰¹ DZæ®Šçš„Observableæ˜¯connectableç±»åž‹çš„ï¼Œå®ƒåªæœ‰åœ¨connect()æ–¹æ³•è¢«è°ƒç”¨ä¹‹åŽæ‰ä¼šå¼€ å§‹å‘å°„æ•°æ®ã€‚3.Subjectè¿™æ˜¯ä¸€ä¸ªååˆ†ç‰¹æ®Šçš„ç±»åž‹ï¼Œå®ƒç›¸å½“äºŽä¸€ä¸ªæ¡¥æ¢ã€‚å¯ä»¥è¯´ï¼Œå®ƒæ—¢æ˜¯ä¸€ä¸ªObserverï¼Œåˆæ˜¯ä¸€ä¸ªObservableã€‚4.Scheculerè°ƒåº¦å™¨ï¼Œç”¨äºŽæŒ‡å®šå·¥ä½œçº¿ç¨‹ã€‚SubscribeOn()ç”¨äºŽæŒ‡å®šå¯è§‚å¯Ÿè€…çš„é€»è¾‘çº¿ç¨‹ï¼ŒObserveOn()ç”¨äºŽæŒ‡å®šè®¢é˜…è€…çš„é€»è¾‘çº¿ç¨‹ã€‚ å½“äºŒè€…éƒ½æ²¡æŒ‡å®šæ—¶ï¼Œåœ¨å½“å‰çº¿ç¨‹ä¸­å·¥ä½œã€‚ å½“åªæŒ‡å®šäº†SubscribeOn()ï¼Œé‚£ä¹ˆå°±éƒ½åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­å·¥ä½œã€‚ å½“æŒ‡å®šäº†ObserveOn()ï¼Œé‚£ä¹ˆå¯è§‚å¯Ÿè€…è¿è¡Œåœ¨é»˜è®¤çº¿ç¨‹ï¼Œè€Œè®¢é˜…è€…è¿è¡Œåœ¨æŒ‡å®šçº¿ç¨‹ã€‚æ“ä½œç¬¦ä¸€ã€åˆ›å»ºæ“ä½œç¬¦ createï¼šä»Žå¤´å¼€å§‹åˆ›å»ºå¯è§‚å¯Ÿå¯¹è±¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344Log.e("MainActivity", " -&gt; initData: " + Thread.currentThread().getName()); //ä½¿ç”¨Createæ“ä½œç¬¦åˆ›å»ºå¯è§‚å¯Ÿè€… Observable.create(new Observable.OnSubscribe&lt;Integer&gt;() &#123; //å‘å°„å‰çš„é€»è¾‘å¤„ç† @Override public void call(Subscriber&lt;? super Integer&gt; observer) &#123; try &#123; if (!observer.isUnsubscribed()) &#123; for (int i = 1; i &lt; 3; i++) &#123; observer.onNext(i); Thread.sleep(1000); Log.e("MainActivity", " -&gt; call: " + Thread.currentThread().getName()); &#125; observer.onCompleted(); &#125; &#125; catch (Exception e) &#123; observer.onError(e); &#125; &#125; &#125; ) //æŒ‡å®šå¯è§‚å¯Ÿè€…çš„é€»è¾‘çº¿ç¨‹ //.subscribeOn(Schedulers.newThread()) //æŒ‡å®šè®¢é˜…è€…çš„é€»è¾‘çº¿ç¨‹,æ²¡æœ‰æŒ‡å®šåˆ™ä¸ŽsubscribeOn()åœ¨åŒä¸€ä¸ªçº¿ç¨‹å·¥ä½œã€‚å¦‚æžœä¸¤è€…éƒ½æ²¡æŒ‡å®š,å°±åœ¨å½“å‰çº¿ç¨‹ä¸­å·¥ä½œã€‚ .observeOn(Schedulers.io()) //å¯è§‚å¯Ÿè€…å‘å°„æ•°æ® .subscribe( //åˆ›å»ºè®¢é˜…è€… new Subscriber&lt;Integer&gt;() &#123; @Override public void onNext(Integer item) &#123; System.out.println("Next: " + item); Log.e("MainActivity", " -&gt; onNext: " + Thread.currentThread().getName()); &#125; @Override public void onError(Throwable error) &#123; System.err.println("Error: " + error.getMessage()); &#125; @Override public void onCompleted() &#123; System.out.println("Sequence complete."); &#125; &#125;); fromï¼šé€šè¿‡ä¸€ä¸ªé›†åˆåˆ›å»ºå¯è§‚å¯Ÿå¯¹è±¡ã€‚ 123456789101112131415161718192021222324List&lt;String&gt; data = new ArrayList&lt;&gt;(); data.add("1"); data.add("2"); data.add("3"); // æŠŠä¸€ä¸ªé›†åˆè½¬åŒ–ä¸ºæ•°æ®æŒ‰é¡ºåºå‘å°„ Observable.from(data) // æŒ‡å®šå¯è§‚å¯Ÿè€…å·¥ä½œçº¿ç¨‹ .subscribeOn(Schedulers.newThread()) // æŒ‡å®šè®¢é˜…è€…å·¥ä½œçº¿ç¨‹ .observeOn(AndroidSchedulers.mainThread()) .subscribe( s -&gt; &#123; Log.e("MainActivity", " -&gt;Action1 call: " + s); Log.e("MainActivity", " -&gt; Action1 call: thread" + Thread.currentThread()); &#125;, throwable -&gt; &#123; Log.e("MainActivity", " -&gt;Action1-Throwable call: " + throwable); Log.e("MainActivity", " -&gt; Action1-Throwable call: thread" + Thread.currentThread()); &#125;, () -&gt; &#123; Log.e("MainActivity", " -&gt;Action0 call: "); Log.e("MainActivity", " -&gt; Action0 call: thread" + Thread.currentThread()); &#125;); justï¼šåŒfromç±»ä¼¼ï¼Œåªæ˜¯justçš„å€¼æ˜¯åœ¨()ä¸­æŒ‡å®šçš„ã€‚ 123456789101112131415161718192021222324252627282930313233 Observable.just(1, "3", true) // æŒ‰é¡ºåºå‘é€ä¸‰ç§ä¸åŒç±»åž‹çš„æ•°æ® // è®¢é˜…è€…çš„å·¥ä½œçº¿ç¨‹ .observeOn(Schedulers.newThread()) // è®¢é˜… .subscribe( // åˆ›å»ºè®¢é˜…è€…,èŒƒåž‹æ˜¯ä¸ªå¯åºåˆ—åŒ–å¯¹è±¡ã€‚ new Subscriber&lt;Serializable&gt;() &#123; @Override public void onCompleted() &#123; &#125; @Override public void onError(Throwable e) &#123; &#125; @Override public void onNext(Serializable serializable) &#123; if (serializable.equals(1)) &#123; Log.e("MainActivity", " -&gt; onNext: int = " + serializable.toString()); &#125; if (serializable.equals("3")) &#123; Log.e("MainActivity", " -&gt; onNext: String = " + serializable.toString()); &#125; if (serializable.equals(false)) &#123; Log.e("MainActivity", " -&gt; onNext: boolean = " + true); &#125; &#125; &#125;);è¾“å‡ºç»“æžœï¼šMainActivity: -&gt; onNext: int = 1MainActivity: -&gt; onNext: String = 3 timerï¼šåœ¨æŒ‡å®šæ—¶é—´ä¹‹åŽåˆ›å»ºä¸€ä¸ªå‘å°„0çš„å¯è§‚å¯Ÿè€…ã€‚ 123456789101112131415161718192021Observable.timer(2, TimeUnit.SECONDS) //é€šè¿‡timeråˆ›å»ºå»¶è¿Ÿ2så‘å°„çš„å¯è§‚å¯Ÿè€…,å®ƒä¼šå‘å°„ä¸€ä¸ª0 //æŒ‡å®šè®¢é˜…è€…çš„å·¥ä½œçº¿ç¨‹ .subscribeOn(Schedulers.newThread()) //è®¢é˜…,å¹¶åˆ›å»ºè®¢é˜…è€… .subscribe(new Subscriber&lt;Long&gt;() &#123; @Override public void onCompleted() &#123; &#125; @Override public void onError(Throwable e) &#123; &#125; @Override public void onNext(Long aLong) &#123; Log.e("MainActivity", " -&gt; onNext: along = " + aLong); &#125; &#125;); å˜æ¢æ“ä½œç¬¦å˜æ¢æ“ä½œç¬¦å¯ä»¥åœ¨å‘å°„è¿‡ç¨‹ä¸­å¯¹å‘é€çš„æ•°æ®è¿›è¡ŒåŠ å·¥ã€‚ mapï¼šå¯åœ¨Observableå‘å°„å‰å¯¹åˆå§‹çš„æ•°æ®è¿›è¡Œä¸€æ¬¡å˜æ¢ï¼Œé€šè¿‡Func1æŽ¥å£æ¥è¿›è¡Œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Observable.just( "http://img.pconline.com.cn/images/upload/upc/tx/photoblog/1503/17/c2/3974265_1426551589288_mthumb.jpg") .map(s -&gt; &#123; // åœ¨è¿™é‡Œä½¿ç”¨mapæ“ä½œç¬¦,æŠŠStringç±»åž‹çš„æ•°æ®è½¬æ¢æˆäº†Bitmapç±»åž‹,ç»§ç»­å¾€ä¸‹ä¼ é€’ try &#123; // ä¸‹è½½å›¾ç‰‡ URL url = new URL(s); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); conn.setRequestMethod("GET"); conn.setDoInput(true); conn.setConnectTimeout(5000); conn.connect(); if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) &#123; InputStream is = conn.getInputStream(); byte[] bytes = new byte[1024]; ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream(); int length = 0; while ((length = is.read(bytes)) != -1) &#123; byteBuffer.write(bytes, 0, length); byteBuffer.flush(); &#125; byte[] bmpBytes = byteBuffer.toByteArray(); Log.e("MainActivity", " -&gt; initData: byte.size = " + bmpBytes.length); return BitmapFactory.decodeByteArray(bmpBytes, 0, bmpBytes.length); &#125; &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return null; &#125;) .map(BitmapDrawable::new) // è¿™é‡Œå†ä¸€æ¬¡æŠŠBitmapç±»åž‹çš„æ•°æ®è½¬æ¢æˆäº†Drawableå¾€ä¸‹ä¼ é€’ .subscribeOn(Schedulers.io()) // æŒ‡å®šå¯è§‚å¯Ÿè€…å·¥ä½œçº¿ç¨‹ .observeOn(AndroidSchedulers.mainThread()) // æŒ‡å®šè®¢é˜…è€…çš„å·¥ä½œçº¿ç¨‹ // è®¢é˜… .subscribe( // åˆ›å»ºè®¢é˜…è€… new Subscriber&lt;Drawable&gt;() &#123; @Override public void onCompleted() &#123; &#125; @Override public void onError(Throwable e) &#123; &#125; @Override public void onNext(Drawable drawable) &#123; displayImage.setImageDrawable(drawable); &#125; &#125;); flatMapï¼šåŠŸèƒ½ä¸Žmapç±»ä¼¼ï¼Œä½†å®ƒè¿”å›žçš„æ˜¯ä¸€ä¸ªObservable&lt;è½¬åŒ–ç±»åž‹&gt;ã€‚1234567891011121314151617181920212223242526272829APIClient.getArticles() // åœ¨è°ƒç”¨OnNext()ä¹‹å‰å…ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•,è¿™é‡Œçš„OnNext()æ˜¯ç”±RetrofitåŽ»è°ƒç”¨çš„ã€‚ .doOnNext(articles -&gt; &#123; Log.e("MainActivity", " -&gt; initData: itemsSize = " + articles.items.size()); articles.items.remove(0); &#125;) // ç”¨ä¸Šä¸€ä¸ªObservableè¿”å›žçš„ç»“æžœæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„Observable .flatMap(articles -&gt; Observable.from(articles.items)) // è¿™é‡Œä½¿ç”¨äº†fromæ–¹æ³•åˆ›å»ºObservable // æŒ‡å®šæŽ¥æ”¶è€…çš„å·¥ä½œçº¿ç¨‹ .observeOn(AndroidSchedulers.mainThread()) // å‘å°„ç»™è®¢é˜…è€… .subscribe( // åˆ›å»ºè®¢é˜…è€… new Subscriber&lt;Articles.ItemsTestBean&gt;() &#123; @Override public void onCompleted() &#123; &#125; @Override public void onError(Throwable e) &#123; &#125; @Override public void onNext(Articles.ItemsTestBean itemsTestBean) &#123; Log.e("MainActivity", " -&gt; onNext: item " + i++ + " = " + itemsTestBean.id); &#125; &#125;); è¿‡æ»¤æ“ä½œç¬¦ filterï¼šé€šè¿‡Func1æŽ¥å£æ¥å®žçŽ°è¿‡æ»¤æŽ‰æ•°æ®æºä¸­ä¸ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚ 1234567891011121314151617181920212223Observable.just(1,2,3,4,5) //è¿‡æ»¤å‡ºå°äºŽ4çš„æ•°æ®ï¼Œå¹¶ä¸”å‘å°„å®ƒä»¬ .filter(new Func1&lt;Integer,Boolean&gt;() &#123; @Override public Boolean call(Integer item)&#123; retrun (item&lt;4); &#125; &#125;).subscribe(new Subscriber&lt;Integer&gt; ()&#123; @Override public void onNext(Integer item) &#123; System.out.println("Next: " + item); &#125; @Override public void onError(Throwable error) &#123; System.err.println("Error: " + error.getMessage()); &#125; @Override public void onCompleted() &#123; System.out.println("Sequence complete."); &#125; &#125;)ï¼› firstï¼šåªå‘å°„ç¬¬ä¸€æ¡æ•°æ®ï¼Œæˆ–è€…è¿‡æ»¤å‡ºæ¥çš„ç¬¬ä¸€æ¡æ•°æ®ã€‚ 1234567891011121314151617181920212223Observable.just(1,2,3,4,5) //è¿‡æ»¤å‡ºå¤§äºŽ4çš„æ•°æ®ï¼Œå¹¶ä¸”å‘å°„åªå‘å°„ç¬¬ä¸€ä¸ªæ•°æ® .first(new Func1&lt;Integer,Boolean&gt;() &#123; @Override public Boolean call(Integer item)&#123; retrun (item&gt;4); &#125; &#125;).subscribe(new Subscriber&lt;Integer&gt; ()&#123; @Override public void onNext(Integer item) &#123; System.out.println("Next: " + item); &#125; @Override public void onError(Throwable error) &#123; System.err.println("Error: " + error.getMessage()); &#125; @Override public void onCompleted() &#123; System.out.println("Sequence complete."); &#125; &#125;)ï¼› takeï¼šåªå‘å°„å‰å‡ æ¡æ•°æ®ã€‚ 12345678910111213141516171819Observable.just(1,2,3,4,5) //åªå‘å°„å‰3ä¸ªæ•°æ® .take(3) .subscribe(new Subscriber&lt;Integer&gt; ()&#123; @Override public void onNext(Integer item) &#123; System.out.println("Next: " + item); &#125; @Override public void onError(Throwable error) &#123; System.err.println("Error: " + error.getMessage()); &#125; @Override public void onCompleted() &#123; System.out.println("Sequence complete."); &#125; &#125;)ï¼›]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidåªéœ€ä¸¤æ­¥ï¼Œä½¿ä½ çš„Android Studioæ”¯æŒLambdaè¡¨è¾¾å¼]]></title>
      <url>%2F2016%2F08%2F17%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FAndroid%E5%8F%AA%E9%9C%80%E4%B8%A4%E6%AD%A5%EF%BC%8C%E4%BD%BF%E4%BD%A0%E7%9A%84Android%20Studio%E6%94%AF%E6%8C%81Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[Java8çš„ä¸€å¤§æ–°ç‰¹æ€§å°±æ˜¯è¾ƒä¸ºå¥å…¨çš„Lambdaè¡¨è¾¾å¼ï¼Œä½†æ˜¯ç›®å‰Android studioå¹¶ä¸æ”¯æŒè¿™ä¸€ç‰¹æ€§ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡åœ¨gradleä¸­é…ç½®å‡ è¡Œä»£ç ï¼Œå¼•ç”¨Githubä¸Šçš„èµ„æºï¼Œå°±å¯ä»¥è®©ä½ çš„Android Studioæ”¯æŒLambdaè¡¨è¾¾å¼äº†ã€‚ æ³¨æ„ï¼šä½¿ç”¨Lambdaä¹‹å‰ï¼Œå¿…éœ€ç¡®ä¿ä½ çš„Java8æ˜¯èƒ½å¤Ÿè¿è¡Œçš„ã€‚ä¸‹é¢ç›´æŽ¥ä¸Šä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354apply plugin: 'com.android.application'android &#123; compileSdkVersion 23buildToolsVersion "23.0.2"//éœ€è¦æ·»åŠ çš„ç¬¬ä¸€éƒ¨åˆ†ï¼š//ä¸‹é¢è¿™ä¸¤å¥åœ¨åˆ›å»ºé¡¹ç›®æ—¶ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå¿…éœ€åŠ ä¸Šï¼Œæ˜¯ä¸ºäº†å¼•ç”¨Java8çš„ã€‚compileOptions &#123;sourceCompatibility JavaVersion.VERSION_1_8targetCompatibility JavaVersion.VERSION_1_8&#125; defaultConfig &#123;applicationId "*************"minSdkVersion 21targetSdkVersion 23versionCode 1versionName "1.0"&#125; buildTypes &#123; release &#123;minifyEnabled falseproguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'&#125; &#125;&#125;dependencies &#123; compile fileTree(dir: 'libs', include: ['*.jar']) testCompile 'junit:junit:4.12'compile 'com.android.support:appcompat-v7:23.1.1'&#125;//éœ€è¦æ·»åŠ çš„ç¬¬äºŒéƒ¨åˆ†ï¼š//ä»¥ä¸‹å…¨éƒ¨éƒ½æ˜¯è¦æ·»åŠ åˆ°é¡¹ç›®çš„build.gradleä¸­çš„ã€‚//æ³¨æ„ï¼Œç»æµ‹è¯•ï¼Œåªæœ‰3.2.4èƒ½å¤Ÿç”Ÿæ•ˆï¼Œå¦‚æžœæœ‰æ›´æ–°è¿˜è¯·èƒ½å¤Ÿç•™è¨€é€šçŸ¥ã€‚buildscript &#123; repositories &#123; mavenCentral() &#125; dependencies &#123; classpath 'me.tatarka:gradle-retrolambda:3.2.4'&#125;&#125;repositories &#123; mavenCentral()&#125;apply plugin: 'me.tatarka.retrolambda' åªç”¨æ·»åŠ æ ‡æ³¨çš„ä¸¤éƒ¨åˆ†å³å¯ï¼Œå…¶ä½™éƒ¨åˆ†ä¸ç”¨ç®¡ã€‚ æ¥å¼ æ•ˆæžœå›¾ï¼š åœ¨ä»£ç ä¸­ä½¿ç”¨Lambdaè¡¨è¾¾å¼å¯ä»¥ä½¿ä½ çš„ä»£ç æ›´åŠ ç®€æ´æ¸…æ™°ï¼Œæé«˜æ•ˆçŽ‡å’Œå¯è¯»æ€§ã€‚ Android Studio 2.1 ä¹‹åŽå¼€å¯LambdaAndroidStudio2.1ä¹‹åŽï¼ŒGoogleå¼•å…¥äº†æ–°çš„ç¼–è¯‘å™¨Jackï¼Œå°†æ¥å¯èƒ½æ˜¯è¦æ›¿æ¢æŽ‰çŽ°åœ¨çš„ç¼–è¯‘å™¨çš„ã€‚å®ƒç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ç±»åž‹ä¸ŽçŽ°æœ‰çš„Javaç¼–è¯‘å™¨æ˜¯ä¸åŒçš„ï¼Œä½†æ®è¯´å®ƒèƒ½æœ€å¤§é™åº¦åœ°ç¼©å°APKçš„ä½“ç§¯ï¼Œæé«˜ç¼–è¯‘æ•ˆçŽ‡ï¼Œå¹¶ä¸”64Kè¿™ç§è›‹ç¢Žçš„é—®é¢˜ä¹Ÿå°†ä¸å†å­˜åœ¨äº†ã€‚ è¯´äº†è¿™ä¹ˆå¤šå…¶å®žåªæ˜¯æƒ³è¯´ï¼ŒçŽ°åœ¨ä½ åªéœ€è¦åœ¨ gradleä¸­æŠŠå®ƒå¼€å¯å°±è¡Œäº†ï¼š123defualtConfig&#123;trueuseJack(true)&#125; ä¸‹é¢è¿™ä¸€æ®µä»ç„¶æ˜¯éœ€è¦æ·»åŠ çš„ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½å¯ç”¨Java81234compileOptions &#123;truesourceCompatibility JavaVersion.VERSION_1_8truetargetCompatibility JavaVersion.VERSION_1_8&#125; æ¸©é¦¨æç¤ºï¼šç›®å‰Jackè¿˜ä¸å®Œå–„ï¼Œå®žé™…å¼€å‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸€äº›è¯¡å¼‚çš„å‘ï¼Œè¿™å°†å¯¼è‡´ä½ ä¸å¾—ä¸æŠŠä»–å…³é—­ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidå¤šæ¸ é“æ‰“åŒ…â€”â€”ä½¿ç”¨Pythonè„šæœ¬ç§’æ‰“]]></title>
      <url>%2F2016%2F08%2F16%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FAndroid%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8Python%E8%84%9A%E6%9C%AC%E7%A7%92%E6%89%93%2F</url>
      <content type="text"><![CDATA[å‰è¨€æˆ‘ä»¬çš„åº”ç”¨é€šå¸¸ä¼šé€šè¿‡è®¸å¤šæ¸ é“å‘å¸ƒåˆ°å„ä¸ªå¹³å°ä¸Šï¼Œè€Œæˆ‘ä»¬éœ€è¦è¿½è¸ªå„ä¸ªå¹³å°çš„ä¸‹è½½ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦é’ˆå¯¹ä¸åŒçš„å¹³å°æ‰“ç›¸åº”çš„åŒ…ã€‚ä½†æ˜¯å¹³å°ä¼—å¤šï¼Œæœ‰çš„åº”ç”¨å¯èƒ½éœ€è¦å‘å¸ƒåˆ°å‡ åçš„æ¸ é“ä¸Šï¼Œä½¿ç”¨ä¼ ç»Ÿçš„gradleè„šæœ¬è‡ªåŠ¨æ‰“åŒ…å¯èƒ½éœ€è¦èŠ±è´¹å‡ ä¸ªå°æ—¶çš„æ—¶é—´ã€‚è€Œæ”¹æ–¹æ³•å¯ä»¥å®žçŽ°ç§’æ‰“100ä¸ªå„ä¸ªæ¸ é“åŒ…çš„æ•ˆæžœã€‚è¿™é‡Œæˆ‘ä»¥ä½¿ç”¨æœ€å¤šçš„å‹ç›Ÿç»Ÿè®¡SDKä¸ºä¾‹æ¥è®²è§£ã€‚ éœ€è¦å‡†å¤‡çš„æ–‡ä»¶ ä¸€ä¸ªç©ºçš„channel.apk(å¯ä»¥é€šè¿‡æ”¹.txtä¸º.apkå®žçŽ°) ä¸€ä¸ªä¸åŒ…å«æ¸ é“ä¿¡æ¯çš„å…¬å¼€ç‰ˆapkæ–‡ä»¶ï¼Œæˆ‘å‘½åä¸ºâ€sourec.apkâ€œ ä¸€ä¸ªé…ç½®æœ‰æ¸ é“ä¿¡æ¯çš„channel.txtæ–‡ä»¶ é‡ç‚¹ï¼šä¸€ä¸ªé…ç½®å¥½çš„pythonè„šæœ¬ï¼Œæˆ‘å‘½åä¸ºbatch_apk.pyæ³¨æ„ï¼šè¿™å››ä¸ªæ–‡ä»¶éœ€è¦æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚åˆ›å»º4ä¸ªå¿…è¦æ–‡ä»¶ç”Ÿæˆsourec.apkæŒ‰ç…§ç”Ÿæˆå…¬ç‰ˆåŒ…çš„æ–¹æ³•ç”Ÿæˆapkå°±è¡Œäº†ï¼Œæ³¨æ„ä¸èƒ½åŒ…å«æ¸ é“ä¿¡æ¯ï¼Œå³æŠŠproducteFlavors{}åŽ»æŽ‰ã€‚ç‰¹åˆ«è¯´æ˜Žï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970//é€šå¸¸æˆ‘ä»¬ä¼šåœ¨AndroidManifest.xmlä¸­é…ç½®å‹ç›Ÿçš„appkeyå’Œæ¸ é“ä¿¡æ¯ï¼Œå°±åƒä¸‹é¢è¿™æ ·:&lt;!--å‹ç›Ÿçš„key--&gt; &lt;meta-data android:name="UMENG_APPKEY" android:value="57****************"/&gt; &lt;!--å‹ç›Ÿæ¸ é“å·--&gt; &lt;meta-data android:name="UMENG_CHANNEL" android:value="$&#123;UMENG_CHANNEL_VALUE&#125;"/&gt;//çŽ°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå…¨åˆ æŽ‰ï¼Œæ”¹ä¸ºåœ¨Applicationçš„onCreate()ä¸­æ¥åˆå§‹åŒ–å‹ç›Ÿçš„ä¿¡æ¯@Override public void onCreate() &#123; super.onCreate(); String appkey = "57****************"; String channelId = ManifestUtils.getChannel(this); //è¿™ä¸ªæ–¹æ³•ä¼šä»ŽMETA_INFOæ–‡ä»¶ä¸‹è¯»å–æ¸ é“æ ‡å¿— MobclickAgent.UMAnalyticsConfig config = new MobclickAgent.UMAnalyticsConfig(this, appkey, channelId); //åˆå§‹åŒ–å‹ç›Ÿé…ç½®ä¿¡æ¯ LogUtils.e(config.mChannelId); MobclickAgent.startWithConfigure(config); //è®¾ç½®å‹ç›Ÿé…ç½®ä¿¡æ¯ &#125; //è¿™é‡Œå¯èƒ½ä¼šç”¨åˆ°ä¸€ä¸ªå·¥å…·ç±»ManifestUtilspublic class ManifestUtils &#123; public static String channel; public static String getUmengChannel(Context context) &#123; // return getMetaDataFromApplication(context, "UMENG_CHANNEL"); return getChannel(context); &#125; /** * èŽ·å–META-INFOä¸‹é¢çš„æ¸ é“ * @param context * @return */ public static String getChannel(Context context) &#123; if (!TextUtils.isEmpty(channel)) &#123; return channel; &#125; ApplicationInfo appinfo = context.getApplicationInfo(); String sourceDir = appinfo.sourceDir; ZipFile zipfile = null; final String start_flag = "META-INF/channel_"; try &#123; zipfile = new ZipFile(sourceDir); Enumeration&lt;?&gt; entries = zipfile.entries(); while (entries.hasMoreElements()) &#123; ZipEntry entry = ((ZipEntry) entries.nextElement()); String entryName = entry.getName(); if (entryName.contains(start_flag)) &#123; channel = entryName.replaceAll(start_flag, ""); return channel; &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; if (zipfile != null) &#123; try &#123; zipfile.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; return ""; &#125;&#125; ç”Ÿæˆchannel.apkå’Œchannel.txtchannel.apkçš„ç”Ÿæˆæ–¹å¼å‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œä¸‹é¢å°±è¯´ä¸€ä¸‹channel.txtã€‚è¿™ä¸ªæ–‡ä»¶ä¸‹åªéœ€è¦å†™ä¸Šæˆ‘ä»¬éœ€è¦å‘å¸ƒçš„æ¸ é“åç§°å°±è¡Œäº†ï¼Œå…¶å®žå°±æ˜¯ä¸€è¡Œä¸€ä¸ªæ¸ é“åç§°ï¼Œpythonè„šæœ¬ä¼šé€ä¸ªéåŽ†ç”Ÿæˆç›¸åº”çš„æ¸ é“åŒ…ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š12336091QQ ç¼–å†™Pythonè„šæœ¬åœ¨macä¸Šä¸æ–¹ä¾¿çš„ï¼Œå¯ä»¥ä½¿ç”¨Android Studioåˆ›å»ºä¸€ä¸ª.txtæ–‡ä»¶ï¼Œç„¶åŽæŠŠPythonè„šæœ¬ç¼–è¾‘å¥½ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶æ‹–å‡ºæ¥ï¼Œç„¶åŽæ”¹åŽç¼€åä¸º.pyã€‚ä¸‹é¢æ˜¯Pythonè„šæœ¬çš„å…·ä½“å†…å®¹:1234567891011121314151617181920212223242526272829303132333435363738import sys,os,shutil,zipfile,time //å¯¼å…¥ä¾èµ–åº“apkVersion="1.3" //æ³¨æ„è¿™é‡Œï¼Œæ¯æ¬¡éœ€è¦æŠŠè¿™ä¸ªç‰ˆæœ¬å·æ”¹æˆæˆ‘ä»¬æ‰€æœŸæœ›çš„srcFileName="source.apk" //è¯»å–æˆ‘ä»¬æ‰“åŒ…å¥½çš„apkæ–‡ä»¶destDir=os.path.abspath('.')file=open("channel.txt") //æ‰“å¼€åŒ…å«æ¸ é“åç§°çš„æ–‡ä»¶def writeChannelToApk(filename,channel): z=zipfile.ZipFile(filename,'a',zipfile.ZIP_DEFLATED) empty_channel_file="META-INF/channel_&#123;channe&#125;".format(channe=channel) target_file="channel.apk" z.write(target_file,empty_channel_file) z.close() print "writeChannelToApkchannel"+channel+","+filename+"\n"def cpFile(srcPath,fileName): destPath = destDir + os.path.sep + fileName if os.path.exists(srcPath) and not os.path.exists(destPath): shutil.copy(srcPath,destPath)def getTime(): return time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(time.time()))if not os.path.exists(srcFileName): print "sourcefile"+srcFileName+"notexists" sys.exit(1)start = time.clock()for line in file: channel=line.strip('\n').strip() targetFileName="apk_"+channel+"-"+apkVersion+"-"+getTime()+".apk" //åœ¨è¿™é‡Œè°ƒæ•´æ¸ é“åŒ…çš„åç§° print "copyfile:"+targetFileName cpFile(srcFileName,targetFileName) writeChannelToApk(targetFileName,channel)end = time.clock()print("The function run time is : %.03f seconds" %(end-start)) è¿è¡Œè„šæœ¬æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥åˆ°è„šæœ¬æ‰€åœ¨æ–‡ä»¶åŠ ä¸‹ï¼Œåœ¨ç»ˆç«¯è¾“å…¥:1python batch_apk.py //è¿è¡Œpythonè„šæœ¬ï¼Œåç§°è‡ªå–ã€‚ ä»…ä»…ä¸€çž¬é—´ï¼Œæˆ‘ä»¬ä¼šå‘çŽ°ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å·²ç»ç”Ÿæˆäº†æˆ‘ä»¬éœ€è¦çš„æ¸ é“åŒ…ã€‚ æ£€éªŒåœ¨Activityä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼Œæ£€éªŒæ¸ é“ä¿¡æ¯æ˜¯å¦æˆåŠŸåŒ…å«åˆ°æ¸ é“åŒ…ä¸­ï¼š12String channelId = AnalyticsConfig.getChannel(getApplicationContext()); //èŽ·å–å‹ç›Ÿçš„æ¸ é“é…ç½®ä¿¡æ¯ LogUtils.e("channelId = " + channelId); æ³¨æ„ä¸€äº›å‘æ²¡å®‰è£…ä¸“é—¨çš„å¼€å‘çŽ¯å¢ƒï¼Œåœ¨Macä¸‹ç›´æŽ¥æ‰“å¼€pythonæ–‡ä»¶ç¼–è¾‘ï¼Œä¼šäº§ç”Ÿå­—ç¬¦é›†ä¸å­˜åœ¨çš„é”™è¯¯ã€‚è§£å†³åŠžæ³•æ˜¯åœ¨Android Studioä¸­ç¼–è¾‘å¥½æ‹–å‡ºæ¥ã€‚æˆ–è€…åœ¨æ”¹åŠ¨æ—¶ï¼Œä¸€äº›å¯ä»¥å¤åˆ¶çš„å­—æ¯å’Œç¬¦å·å°±ç›´æŽ¥å¤åˆ¶è¿‡åŽ»ç”¨ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidå¤šæ¸ é“æ‰“åŒ…â€”â€”ä½¿ç”¨gradleè¿›è¡Œå¤šæ¸ é“è‡ªåŠ¨æ‰“åŒ…]]></title>
      <url>%2F2016%2F08%2F15%2FAndroid%E5%AE%9E%E7%94%A8%E4%B9%8B%E9%81%93%2FAndroid%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8gradle%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%B8%A0%E9%81%93%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%2F</url>
      <content type="text"><![CDATA[å‰è¨€åœ¨æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Pythonè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…ï¼Œä¸‹é¢å†æŠŠä¼ ç»Ÿçš„gradleå¤šæ¸ é“æ‰“åŒ…æ–¹å¼ä»‹ç»ä¸€ä¸‹ï¼ŒåŒæ ·æ˜¯ä»¥å‹ç›ŸSDKä¸ºä¾‹ã€‚ æ‰“åŒ…å‰é…ç½®é…ç½®gradle123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384//ä¸»è¦æ˜¯é…ç½®android&#123;&#125;å°åŒ…ä¸‹çš„å†…å®¹android &#123; ã€‚ ã€‚ ã€‚signingConfigs &#123; //é…ç½®ç­¾åæ–‡ä»¶ï¼Œå¯ä»¥æœ‰å¤šä¸ª icekey &#123; keyAlias 'icekey' keyPassword 'å¡«å…¥keyçš„å¯†ç ' storeFile file('/Users/**********/icekey.jks') //keyæ‰€åœ¨æ–‡ä»¶å¤¹ storePassword 'å¡«å…¥storeçš„å¯†ç ' &#125; &#125; buildTypes &#123; //é…ç½®æž„å»ºç‰ˆæœ¬ï¼Œå¯ä»¥æœ‰å¤šä¸ª //æµ‹è¯•ç‰ˆæœ¬ debug &#123; debuggable true zipAlignEnabled false shrinkResources false signingConfig signingConfigs.icekey minifyEnabled false &#125; //å‘å¸ƒç‰ˆæœ¬ release &#123; debuggable false //æ˜¯å¦å¼€å¯æµ‹è¯• zipAlignEnabled true //æ˜¯å¦å¯ç”¨zipAlignåŽ‹ç¼©ä¼˜åŒ– shrinkResources true //æ˜¯å¦åˆ é™¤æœªè¢«ä½¿ç”¨çš„èµ„æºæ–‡ä»¶ minifyEnabled false //æ˜¯å¦å¼€å¯æ··æ·† signingConfig signingConfigs.icekey //ç­¾åæ–‡ä»¶ proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' //æŒ‡å®šæ··æ·†æ–‡ä»¶ &#125; //ç©ºç‰ˆæœ¬ source &#123; debuggable true //æ˜¯å¦å¼€å¯æµ‹è¯• zipAlignEnabled true //æ˜¯å¦å¯ç”¨zipAlignåŽ‹ç¼©ä¼˜åŒ– shrinkResources true //æ˜¯å¦åˆ é™¤æœªè¢«ä½¿ç”¨çš„èµ„æºæ–‡ä»¶ minifyEnabled false //æ˜¯å¦å¼€å¯æ··æ·† signingConfig signingConfigs.icekey //ç­¾åæ–‡ä»¶ proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' //æŒ‡å®šæ··æ·†æ–‡ä»¶ &#125; &#125; //åˆ›å»ºæ¸ é“åç§°,main&#123;&#125;æ˜¯ä¸€ä¸ªä¸åˆæ³•åç§° productFlavors &#123; baidu &#123;&#125; huawei &#123;&#125; xiaomi &#123;&#125; &#125; // è¿™é‡Œä½“çŽ°åœ¨AndroidManifestä¸­çš„// &lt;meta-data// android:name="UMENG_CHANNEL"// android:value="$&#123;UMENG_CHANNEL_VALUE&#125;"/&gt; //è¿è¡Œè‡ªåŠ¨èµ‹å€¼ç»™AndroidManifest.xmlä¸­çš„$&#123;UMENG_CHANNEL_VALUE&#125; productFlavors.all &#123; flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name] &#125; lintOptions &#123; //é…ç½®æ‰“åŒ…çº¿ç¨‹çš„æ“ä½œ ignoreWarnings true //å¿½ç•¥è­¦å‘Š checkReleaseBuilds false //æ˜¯å¦æ£€æŸ¥releaseç‰ˆæœ¬ abortOnError false //å‡ºçŽ°é”™è¯¯æ˜¯å¦ç»ˆæ­¢ &#125; applicationVariants.all &#123; variant -&gt; variant.outputs.each &#123; output -&gt; def outputFile = output.outputFile if (outputFile != null &amp;&amp; outputFile.name.endsWith(".apk")) &#123; //åˆ¤æ–­æ˜¯å¦æ˜¯apk //è¿™ä¸ªå‡½æ•°ç”Ÿæˆäº†apkçš„åç§° def apkName = "ice-$&#123;variant.productFlavors[0].name&#125;-$&#123;defaultConfig.versionName&#125;.apk" output.outputFile = new File(outputFile.parent, apkName) //è¾“å‡ºæ–‡ä»¶ &#125; &#125; &#125; ã€‚ ã€‚ ã€‚&#125; é…ç½®AndroidManifest.xmlåœ¨Applicationæ ‡ç­¾ä¸‹æ·»åŠ ï¼š12345678&lt;!--å‹ç›Ÿçš„key--&gt; &lt;meta-data android:name="UMENG_APPKEY" android:value="57bf375ee0f5*******018a3"/&gt; &lt;!--å‹ç›Ÿæ¸ é“å·--&gt; &lt;meta-data android:name="UMENG_CHANNEL" android:value="$&#123;UMENG_CHANNEL_VALUE&#125;"/&gt; //è¿™æ ·å†™å°±èƒ½å¤Ÿè¯»å–gradleä¸­çš„[UMENG_CHANNEL_VALUE: name]çš„nameçš„å€¼äº†ã€‚ å¼€å§‹è‡ªåŠ¨æ‰“åŒ…åœ¨Android Studioçš„çš„ç»ˆç«¯æœºä¸­è¾“å…¥12./gradlew assembleRelease //æ‰“åŒ…æ‰€æœ‰æ¸ é“çš„Releaseç‰ˆåŒ…./gradlew assembleSource //æ‰“åŒ…æ‰€æœ‰æ¸ é“çš„Sourceç‰ˆåŒ…]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidé€€å‡ºç¨‹åºçš„ä¸¤ç§æ–¹å¼ï¼škillProcessï¼ˆï¼‰å’ŒSystem.exit()]]></title>
      <url>%2F2016%2F08%2F14%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2FAndroid%E9%80%80%E5%87%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9AkillProcess%EF%BC%88%EF%BC%89%E5%92%8CSystem.exit()%2F</url>
      <content type="text"><![CDATA[KillProcess()è°ƒç”¨1android.os.Process.killProcess(android.os.Process.myPid()) å¯ä»¥æ€æ­»å½“å‰åº”ç”¨æ´»åŠ¨çš„è¿›ç¨‹ï¼Œè¿™ä¸€æ“ä½œå°†ä¼šæŠŠæ‰€æœ‰è¯¥è¿›ç¨‹å†…çš„èµ„æºï¼ˆåŒ…æ‹¬çº¿ç¨‹å…¨éƒ¨æ¸…ç†æŽ‰ï¼‰ã€‚å½“ç„¶ï¼Œç”±äºŽActivityManageræ—¶åˆ»ç›‘å¬ç€è¿›ç¨‹ï¼Œä¸€æ—¦å‘çŽ°è¿›ç¨‹è¢«éžæ­£å¸¸Killï¼Œå®ƒå°†ä¼šè¯•å›¾åŽ»é‡å¯è¿™ä¸ªè¿›ç¨‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œæœ‰æ—¶å€™å½“æˆ‘ä»¬è¯•å›¾è¿™æ ·åŽ»ç»“æŸæŽ‰åº”ç”¨æ—¶ï¼Œå‘çŽ°å®ƒåˆè‡ªåŠ¨é‡æ–°å¯åŠ¨çš„åŽŸå› . System.exit()System.exit()å…¶å®žæ˜¯Javaä¸­ç»“æŸè¿›ç¨‹çš„æ–¹æ³•ï¼Œè°ƒç”¨å®ƒå°†å…³é—­å½“å‰çš„JVMè™šæ‹Ÿæœºã€‚ System.exit(0)å’ŒSystem.exit(1)çš„åŒºåˆ« System.exit(0)è¡¨ç¤ºæ˜¯æ­£å¸¸é€€å‡ºï¼› System.exit(1)è¡¨ç¤ºæ˜¯éžæ­£å¸¸é€€å‡ºï¼Œé€šå¸¸è¿™ç§é€€å‡ºæ–¹å¼åº”è¯¥æ”¾åœ¨catchå—ä¸­ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hook(é’©å­å‡½æ•°)åŠ¨æ€æ³¨å…¥ä»£ç ]]></title>
      <url>%2F2016%2F08%2F13%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2FHook(%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0)%E5%8A%A8%E6%80%81%E6%B3%A8%E5%85%A5%E4%BB%A3%E7%A0%81%2F</url>
      <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç»å¾ˆå¤šæ—¶å€™ç³»ç»Ÿå¤„äºŽå®‰å…¨è€ƒè™‘ï¼Œå°†å¾ˆå¤šä¸œè¥¿å¯¹å¤–éšè—ï¼Œè€Œæœ‰æ—¶æˆ‘ä»¬åååˆä¸å¾—ä¸åŽ»ä½¿ç”¨è¿™äº›éšè—çš„ä¸œè¥¿ã€‚ç”šè‡³ï¼Œæˆ‘ä»¬å¸Œæœ›å‘ç³»ç»Ÿä¸­æ³¨å…¥ä¸€äº›è‡ªå·±çš„ä»£ç ï¼Œä»¥æé«˜ç¨‹åºçš„çµæ´»æ€§ã€‚åˆšå¥½æœ‰è¿™ä¹ˆä¸€ç§ç‰¹æ®Šçš„å›žè°ƒæ¨¡å¼ï¼ŒHookæ¨¡å¼å¯ä»¥å®žçŽ°ä¸Šè¿°æ„¿æ™¯ã€‚ HookåŠ¨æ€æ³¨å…¥ä»£ç Hookæœºåˆ¶æ˜¯å›žè°ƒæœºåˆ¶çš„ä¸€ç§ï¼Œæ™®é€šçš„å›žè°ƒæ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬å¿…é¡»æå‰å†™å¥½å›žè°ƒæŽ¥å£ï¼›è€ŒHookæœºåˆ¶åœ¨Javaä¸­åˆ™å¯ä»¥åˆ©ç”¨åå°„ï¼Œé’ˆå¯¹åˆ‡å…¥ç‚¹(é€šå¸¸æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡)ï¼Œé‡‡ç”¨æ›¿æ¢çš„æ‰‹æ®µï¼Œä½¿ä»£ç åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼Œå¬èµ·æ¥æœ‰äº›æŠ½è±¡ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸‹ï¼Œç„¶åŽæˆ‘çœ‹ä»£ç ã€‚ å¯»æ‰¾é€‚åˆHookç‚¹ï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œå¹¶ä¸”åº”è¯¥åœ¨æˆ‘ä»¬éœ€è¦æ³¨å…¥çš„æ–¹æ³•ä¸­è°ƒç”¨è¿‡å®ƒçš„æ–¹æ³•ï¼Œæˆ–è€…ä½¿ç”¨äº†å®ƒçš„çš„å€¼ï¼› åˆ›å»ºç»§æ‰¿è‡ªHookç‚¹çš„å¯¹è±¡çš„å­ç±»ï¼Œæ ¹æ®éœ€æ±‚ä¿®æ”¹å…¶ç›¸åº”çš„æ–¹æ³•ï¼› ä½¿ç”¨åå°„å°†æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å¯¹è±¡æ›¿æ¢å¯¹è±¡å®žä¾‹ä¸­çš„å¯¹è±¡ï¼Œè¾¾åˆ°å·æ¢æ¢æŸ±çš„ç›®çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879public class Hero &#123; private Weapon weaponMain; public Hero(Weapon weaponMain) &#123; this.weaponMain = weaponMain; &#125; public void attack()&#123; weaponMain.attack(); &#125;&#125;public class Weapon &#123; int damage = 10; public void attack()&#123; System.out.println(String.format("å¯¹ç›®æ ‡é€ æˆ %d ç‚¹ä¼¤å®³",damage)); &#125;&#125;public class Game&#123; public static void main(String[] args)&#123; Hero hero = new Hero(new Weapon()); hero.attack(); &#125;&#125;//å¯¹äºŽä¸Šé¢è¿™æ®µç¨‹åºï¼Œæ¸¸æˆå¯¹æˆ‘ä»¬éšè—äº†Weaponçš„ä¼¤å®³å€¼ï¼Œä½†çŽ°åœ¨æˆ‘ä»¬æƒ³è¦åœ¨æ¯æ¬¡æ”»å‡»çš„æ—¶å€™çŸ¥é“è¿™ä¸ªä¼¤å®³å€¼æ˜¯å¤šå°‘ã€‚//ä¸‹é¢çœ‹çœ‹ä½¿ç”¨Hookæœºåˆ¶å¦‚ä½•æ¥å®žçŽ°ã€‚//é¦–å…ˆæˆ‘ä»¬é€šè¿‡è§‚å¯Ÿï¼Œå‘çŽ°åˆ‡å…¥ç‚¹å°±æ˜¯weaponMainï¼Œæˆ‘ä»¬è¦å¯¹å®ƒä¸‹æ‰‹ã€‚//åˆ›å»ºä¸€ä¸ªWeaponçš„å¤åˆ¶å“WeaponHookï¼Œæˆ‘ä»¬éœ€è¦ç”¨è‡ªå·±çš„äººWeaponHookæ‰“å…¥å†…éƒ¨ã€‚//WeaponHookä¸€åˆ‡çœ‹èµ·æ¥éƒ½å’ŒWeaponé‚£ä¹ˆç›¸ä¼¼ï¼Œä½†æ˜¯æˆ‘ä»¬ç»™å®ƒç•™äº†ä¸€ä¸ªåŽé—¨ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥è¿›è¡Œç›‘æŽ§ã€‚public class WeaponHook extends Weapon&#123; private OnUseWeaponAttackListener onUseWeaponAttackListener; @Override public void attack()&#123; super.attack(); if (onUseWeaponAttackListener != null)&#123; onUseWeaponAttackListener.onUseWeaponAttack(damage); &#125; &#125; public void setOnUseWeaponAttackListener(OnUseWeaponAttackListener onUseWeaponAttackListener) &#123; this.onUseWeaponAttackListener = onUseWeaponAttackListener; &#125;//è¿™å°±æ˜¯æˆ‘ä»¬çš„åŽé—¨ public static interface OnUseWeaponAttackListener &#123; int onUseWeaponAttack(int damage); &#125;&#125;//ä¸‹é¢çœ‹çœ‹å¦‚ä½•æ¥è¿›è¡Œâ€œå·å¤©æ¢æ—¥â€public class Game&#123; public static void main(String[] args)&#123; Hero hero = new Hero(new Weapon()); try &#123; Field weapon = ReflectUtils.getVariable(hero.getClass(), "weaponMain"); weapon.setAccessible(true); Weapon weaponHook = new WeaponHook(); ((WeaponHook) weaponHook).setOnUseWeaponAttackListener(damage -&gt; &#123; //é€šè¿‡åŽé—¨è¿›è¡Œæ“ä½œï¼Œè¿™å…¶å®žå°±æ˜¯æˆ‘ä»¬æ³¨å…¥çš„ä»£ç  System.out.println("damage = " + damage); return damage; &#125;); weapon.set(hero, weaponHook); //tou tianå·å¤©æ¢æ—¥ hero.attack(); &#125; catch (NoSuchFieldException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125;Hero hero = new Hero(new Weapon()); hero.attack(); &#125;&#125;//çœ‹è¾“å‡ºå¯¹ç›®æ ‡é€ æˆ 10 ç‚¹ä¼¤å®³damage = 10 //æˆ‘ä»¬èŽ·å¾—äº†Weaponçš„ä¼¤å®³å€¼ æ€»ç»“ç”±äºŽå†…å®¹ä¸å¤šï¼Œæ€»ç»“æˆ‘å°±ä¸å›žé¡¾å‰é¢äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ç§é˜²æ­¢Hookå…¥ä¾µçš„ä¸€ç§æ€è·¯ã€‚æˆ‘ä»¬åœ¨Heroç±»ä¸­åŠ å…¥ä¸€ä¸ªæ£€æŸ¥æœºåˆ¶ã€‚12345678910111213141516public class Hero &#123; private Weapon weaponMain; private final int weaponMainId; public Hero(Weapon weaponMain) &#123; this.weaponMain = weaponMain; weaponMainId = this.weaponMain.hashCode();//è®°å½•åŽŸå§‹Weaponå¯¹è±¡çš„Idï¼ŒhashCodeå¯¹äºŽæ¯ä¸ªå¯¹è±¡è€Œè¨€éƒ½æ˜¯å”¯ä¸€çš„ã€‚ &#125; public void attack() &#123; if (this.weaponMain.hashCode() != weaponMainId) &#123; //å…³é”®ä½ç½®æ£€æŸ¥æ˜¯å¦é­åˆ°æ›¿æ¢ throw new IllegalAccessError(String.format("è­¦å‘Šï¼é­åˆ°å…¥ä¾µï¼å…¥ä¾µè€…èº«ä»½:%d", this.weaponMain.hashCode())); &#125; weaponMain.attack(); &#125;&#125; çŽ°åœ¨å†æ¬¡è¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š1java.lang.IllegalAccessError: è­¦å‘Šï¼é­åˆ°å…¥ä¾µï¼å…¥ä¾µè€…èº«ä»½:1288141870]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidä¹‹ClassLoader]]></title>
      <url>%2F2016%2F08%2F12%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2FAndroid%E4%B9%8BClassLoader%2F</url>
      <content type="text"><![CDATA[å‚è€ƒèµ„æ–™å‚è€ƒèµ„æ–™;åŒ…æ‹¬çƒ­ä¿®å¤; èƒŒæ™¯ä»‹ç»Javaç¨‹åºæ˜¯ç”±ä¸€ä¸ªä¸ª.classæ–‡ä»¶ç»„æˆçš„ï¼Œåœ¨ç¨‹åºæ‰§è¡Œé˜¶æ®µï¼ŒJVMé‡‡ç”¨äº†åŠ¨æ€åŠ è½½çš„ç­–ç•¥ï¼Œå½“ä¸€ä¸ªç±»è¢«ä½¿ç”¨æ—¶ï¼Œå°†ç”±ä¸€ä¸ªClassLoadå®žä¾‹åŽ»åŠ è½½è¿™ä¸ª.classæ–‡ä»¶ã€‚Javaå…è®¸æˆ‘ä»¬ä»Žå¤–éƒ¨åŠ è½½ä¸€ä¸ªç±»åˆ°å†…å­˜ä¸­ï¼Œç„¶åŽä½¿ç”¨å®ƒã€‚ æœ‰å…³ClassLoaderJavaä¸­ClassLoaderçš„åˆ†ç±»(1) BootstarpClassLoadï¼šå¯åŠ¨ç±»åŠ è½½å™¨ï¼Œå®ƒè´Ÿè´£åœ¨ç¨‹åºå¯åŠ¨æ—¶åŽ»åŠ è½½Javaçš„æ ¸å¿ƒåº“ã€‚ (2) ExtensioClassLoadï¼šæ‰©å±•ç±»åŠ è½½å™¨ï¼Œå®ƒè´Ÿè´£åŠ è½½æ‰©å±•åº“ã€‚ (3) AppClassLoadï¼šç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå®ƒè´Ÿè´£åŠ è½½classpathä¸‹çš„.classæ–‡ä»¶ã€‚ (4) CustomClassLoaderï¼šè‡ªå®šä¹‰çš„ClassLoader ClassLoaderçš„åŠ è½½æœºåˆ¶ClassLoaderé‡‡ç”¨äº†åŒäº²å§”æ‰˜åŠ è½½æœºåˆ¶ ï¼Œå…ˆçœ‹çœ‹ä¸‹é¢çš„å›¾è§£ã€‚ å¯ä»¥çœ‹åˆ°ï¼ŒClassLoaderåœ¨åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œä¼šå…ˆè‡ªä¸‹è€Œä¸Šçš„æ£€æŸ¥ç›®æ ‡æ—¶å€™è¢«åŠ è½½äº†ï¼› ç„¶åŽï¼Œè‡ªä¸Šè€Œä¸‹çš„ä¾æ¬¡å°è¯•åŽ»åŠ è½½ç›®æ ‡ï¼Œå¦‚æžœåˆ°æœ€åŽä¸€å±‚ClassLoaderä»ç„¶æ²¡æœ‰åŠ è½½åˆ°ï¼Œå°±ä¼šæŠ›å‡ºClassNotFoundException é”™è¯¯ã€‚ æ³¨æ„å›¾ä¸­æ¯ç§ç±»åž‹ClassLoaderè´Ÿè´£çš„èŒƒå›´ã€‚ å¼€å§‹è‡ªå®šä¹‰ClassLoaderè®¤è¯†å…³é”®æ–¹æ³• findClass(String name)ï¼šè¿™ä¸ªæ–¹æ³•é¡¾åæ€ä¹‰è´Ÿè´£æŸ¥æ‰¾ä¸€ä¸ªç±»ï¼Œå¹¶è¿”å›žå®ƒã€‚å¯¹æˆ‘ä»¬è‡ªå®šä¹‰è€Œè¨€ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æŽ¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿”å›žç›®æ ‡ç±»å°±å¯ä»¥äº†ï¼Œè¿™ä¹Ÿæ˜¯GoogleæŽ¨èæˆ‘ä»¬çš„åšæ³•ã€‚ loadClass(String name)ï¼šè¿™ä¸ªæ–¹æ³•ä¸­ä¸»è¦è´Ÿè´£åè°ƒåŠ è½½ç±»ï¼Œé€šå¸¸å®ƒçš„é€»è¾‘æ¯”è¾ƒå›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥ä¸åŽ»é‡å†™ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå…ˆå°è¯•é€šè¿‡çˆ¶ç±»ClassLoaderåŽ»åŠ è½½ç›®æ ‡ç±»ï¼Œæ²¡æœ‰åŠ è½½åˆ°ï¼Œç„¶åŽè°ƒç”¨findClass()æ–¹æ³•åŽ»æŸ¥æ‰¾ã€‚ defineClass(String name, byte[] b, int off, int len)ï¼šè´Ÿè´£å®šä¹‰ç±»ï¼Œè¿™ä¸ªæ–¹æ³•æˆ‘ä»¬ä¸»è¦è°ƒç”¨å°±å¥½äº†ã€‚ çœ‹çœ‹ä¾‹å­1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586public class CustomClassLoader extends ClassLoader &#123; private String classPath; public CustomClassLoader(String classPath) &#123; super(CustomClassLoader.class.getClassLoader()); this.classPath = classPath; &#125; @Override public Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123; if (classPath == null || classPath.equals("")) &#123; throw new IllegalArgumentException("Please set class path first."); &#125; byte[] classData = loadClassData(classPath); if (classData == null) &#123; throw new NullPointerException( "Try to get the byte[] that read from class file, but mate some problem. Please check class file path."); &#125; return defineClass(name, classData, 0, classData.length); // å°†classçš„å­—èŠ‚æ•°ç»„è§£ç ä¸ºClasså®žä¾‹ &#125; /** * è¯»å–Classæ–‡ä»¶ */ private byte[] loadClassData(String path) &#123; byte[] bytes = new byte[1024]; int length = 0; ByteArrayOutputStream baos = new ByteArrayOutputStream(); File classFile = new File(path); FileInputStream fis = null; try &#123; fis = new FileInputStream(classFile); while ((length = fis.read(bytes)) != -1) &#123; baos.write(bytes, 0, length); baos.flush(); &#125; return baos.toByteArray(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (fis == null) &#123; throw new NullPointerException( "Can not create FileInputStream, please check the file path."); &#125; fis.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; return null; &#125; public void setClassPath(String classPath) &#123; this.classPath = classPath; &#125;&#125;//ä¸‹é¢æ¥çœ‹çœ‹æ€Žä¹ˆä½¿ç”¨public class MyClass &#123; public static void main(String[] args)&#123; CustomClassLoader classLoader = new CustomClassLoader(""); try &#123; classLoader.setClassPath("/Users/.../TestClass.class"); Class clazz = classLoader.loadClass("TestClass"); Method method = ReflectUtils.getMethod(clazz,"doSomething"); System.out.println(clazz.getSimpleName()); System.out.println("result = " + method.invoke(clazz.newInstance())); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125;//ä¸‹é¢æ˜¯TestClasspublic class TestClass &#123; public int doSomething()&#123; return 998; &#125;&#125;//ä¸‹é¢æ˜¯è¾“å‡ºç»“æžœTestClassresult = 998 JVMå¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªç±»æ˜¯å¦ç›¸åŒ æ˜¯å¦å…·æœ‰ç›¸åŒç±»åï¼› æ˜¯å¦ç”±åŒä¸€ä¸ªClassLoaderåŠ è½½ã€‚ æ€»ç»“å…¶å®žJavaå·²ç»åšäº†å¾ˆå¤šå·¥ä½œï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ClassLoaderè¦åšçš„äº‹å°±ä¸€ä»¶ï¼šè¯»å–.classæ–‡ä»¶ ã€‚å…¶ä½™çš„é€šå¸¸ä¸éœ€è¦ä¿®æ”¹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Exceptionå¼‚å¸¸çš„æ­£ç¡®æ‰“å¼€æ–¹å¼]]></title>
      <url>%2F2016%2F08%2F11%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2FException%E5%BC%82%E5%B8%B8%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç»æˆ‘ä»¬æ¯å¤©éƒ½éœ€è¦ä¸Žå„ç§ä¸ªæ ·çš„å¼‚å¸¸æ‰“äº¤åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯¹å¼‚å¸¸äº†è§£å—ï¼Ÿå¯¹å…¶å¤„ç†æ–¹å¼æ­£ç¡®å—ï¼Ÿäº†è§£çš„è¯å°±ç®—äº†ï¼Œä¸äº†è§£çš„å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„å†…å®¹ã€‚ æ‰“å¼€ExceptionExceptionçš„åˆ†ç±»å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼šä»Žå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š Error(é”™è¯¯)å’ŒException(å¼‚å¸¸)éƒ½ç»§æ‰¿è‡ªThrowableç±»ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨Exceptionï¼› å¼‚å¸¸ç±»åˆ†ä¸ºæ£€æŸ¥å¼‚å¸¸(ç›´æŽ¥ç»§æ‰¿è‡ªExceptionï¼Œé™¤RuntimeException)å’Œå¯ä¸æ£€æŸ¥å¼‚å¸¸(Errorå’Œç»§æ‰¿è‡ªRuntimeExceptionçš„)ï¼› throwå’Œthrowsçš„åŒºåˆ« throwé€šå¸¸åœ¨ä»£ç ç‰‡æ®µä¸­ç”¨äºŽç›´æŽ¥æŠ›å‡ºå¼‚å¸¸ã€‚ 123public void test()&#123; throw new ClassNotFoundException();&#125; throwsç”¨åœ¨æ–¹æ³•ç­¾åä¸Šï¼Œå¯æŠ›å‡ºå¤šç§å¼‚å¸¸ 123public void test() throws IOException, ArrayIndexOutOfBoundsException&#123; do something...&#125; è‡ªå®šä¹‰å¼‚å¸¸åªéœ€è¦ç»§æ‰¿Exceptionå°±å¯ä»¥äº†ã€‚1234567891011public class CustomException extends Exception&#123; public CustomException(String exceptionInfo)&#123; super(exceptionInfo); &#125;&#125;//ä½¿ç”¨CustomExeptionpublic void test()&#123; throw new CustomException("æŠ›å‡ºäº†è‡ªå®šä¹‰å¼‚å¸¸");&#125; try-catch-finallyæˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰ä½¿ç”¨try-catch-finallyåŽ»æ•èŽ·å¼‚å¸¸ï¼Œä½†çŽ°åœ¨å€¼å¾—æ€è€ƒä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰å†™çš„try-catch-finallyæ˜¯å¦æ­£ç¡®äº†ã€‚Code Clean æŒ‡å‡ºï¼Œtry-catch-finallyä»£ç å—åœ¨ç¨‹åºä¸­å®šä¹‰äº†ä¸€ä¸ªèŒƒå›´ï¼Œæˆ‘ä»¬åº”è¯¥è®©å®ƒçš„è¯­æ„æ›´æ˜Žç¡®ï¼Œæ‰€ä»¥ä¸åº”è¯¥æŠŠå¤§æ®µçš„ä»£ç æ”¾åœ¨å…¶ä¸­ï¼Œè€Œåº”è¯¥æŠ½ç¦»å‡ºæ¥ã€‚æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚123456789101112//è¿™ä¸ªæ–¹æ³•ä¸­åªå®šä¹‰äº†try-catchï¼Œè€ŒçœŸæ­£çš„æ“ä½œæ”¾åˆ°deletePagerAndAllReference()ä¸­è¿›è¡Œpublic void delete()&#123; try&#123; deletePagerAndAllReference(); &#125; catch (Exception e)&#123; Log.e(e); &#125;&#125;public void deletePagerAndAllReference() throws Exception&#123; //do delete&#125; éœ€è¦æ³¨æ„ï¼Œcatchä¸­çš„returnè¯­å¥ä¼šåœ¨finallyæ‰§è¡Œå®ŒæˆåŽæ‰ä¼šè¢«æ‰§è¡Œã€‚ å…³äºŽæ–¹æ³•è¿”å›žnullçš„è®¨è®ºåœ¨Code Clean ä¸­ï¼Œé²å‹ƒå¤§å”ä¸¥åŽ‰æ‰¹è¯„äº†return null è¿™ç§éª‡äººå¬é—»çš„åšæ³•ï¼Œè¿™è®©ç¨‹åºä¸­å……æ»¡äº†ç±»ä¼¼obj ï¼= null çš„åˆ¤æ–­ã€‚ä»–å»ºè®®åœ¨å¯èƒ½è¿”å›žnullçš„åœ°æ–¹ä½¿ç”¨æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…ç›´æŽ¥è¿”å›žä¸€ç§ç‰¹ä¾‹æƒ…å†µã€‚ä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š1234List&lt;Employee&gt; employees = getEmployees();if(employees != null)&#123; // doSomething...&#125; ç”±äºŽgetEmployees()å¯èƒ½è¿”å›žnullå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½åŽ»æ£€æŸ¥æ˜¯å¦ä¸ºnullï¼Œä½†å¦‚æžœåšå¦‚ä¸‹æ›´æ”¹ï¼š123456public List&lt;Employee&gt; getEmployees()&#123; if(..there are no employees..)&#123; return Collections.emptyList(); //æ²¡æœ‰æ•°æ®è¿”å›žä¸€ä¸ªç©ºçš„Listï¼Œè°ƒç”¨æ—¶å°±ä¸å¿…åŽ»æ£€æŸ¥å®ƒæ˜¯å¦ä¸ºç©ºäº† &#125;&#125; æˆ–è€…åƒä¸‹é¢è¿™æ ·ï¼š123456public List&lt;Employee&gt; getEmployees()&#123; if(..there are no employees..)&#123; throw new NullPointerException("å˜¿ï¼List&lt;Employee&gt;ä¸èƒ½ä¸ºnull,ä»”ç»†æ£€æŸ¥ä¸‹å§ï¼"); //æ²¡æœ‰æ•°æ®è¿”å›žä¸€ä¸ªç©ºçš„Listï¼Œç›´æŽ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè®©è°ƒç”¨è€…ä»¬çŸ¥é“ï¼Œè¿™ä¸ªåœ°æ–¹å­˜åœ¨é”™è¯¯ï¼Œä¸è¯¥è®©List&lt;Employee&gt;ä¸ºnullçš„ã€‚ &#125;&#125; Androidä¸­å¤„ç†æœªæ•èŽ·å¼‚å¸¸ï¼Œå¹¶ä¸ŠæŠ¥å¼‚å¸¸ä¿¡æ¯åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›æˆ‘ä»¬æ²¡æœ‰æ•èŽ·çš„å¼‚å¸¸ï¼Œå¯¹äºŽè¿™äº›å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä¿å­˜ä¸‹æ¥ï¼Œç„¶åŽè¿›è¡Œåˆ†æžã€‚æ¥çœ‹çœ‹æ€Žä¹ˆåšã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦implements Thread.UncaughtExceptionHandler å®žçŽ°è‡ªå·±çš„å¼‚å¸¸å¤„ç†ç±»ï¼Œç„¶åŽè°ƒç”¨ Thread.setDefaultUncaughtExceptionHandler() æ–¹æ³•æŠŠæˆ‘ä»¬çš„å¼‚å¸¸å¤„ç†å™¨è®¾ç½®åˆ°ç³»ç»Ÿä¸­ï¼Œè¿™æ ·æœ‰ä¸ºæ•èŽ·çš„å¼‚å¸¸å‡ºçŽ°æ—¶ï¼Œå°±èƒ½è¢«æˆ‘ä»¬è‡ªå·±å¤„ç†äº†ã€‚å½“ç„¶ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„æ–¹æ³•éœ€è¦é‡å†™uncaughtException() ã€‚ä¸‹é¢çœ‹çœ‹å®Œæ•´ä¾‹å­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899public class CrashHandler implements UncaughtExceptionHandler &#123; private static final CrashHandler mInstance = new CrashHandler(); private UncaughtExceptionHandler mDefualtCrashHandler; private Context mContext; /** * é˜²æ­¢è¢«é‡å¤åˆ›å»º */ private CrashHandler() &#123;&#125; public static CrashHandler getInstance() &#123; return mInstance; &#125; public void init(Context context) &#123; mContext = context.getApplicationContext(); // ç¡®ä¿èŽ·å¾—çš„æ˜¯ç³»ç»Ÿçº§çš„Context mDefualtCrashHandler = Thread.getDefaultUncaughtExceptionHandler(); // èŽ·å–ç³»ç»Ÿé»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨ Thread.setDefaultUncaughtExceptionHandler(this); // æŠŠå½“å‰å®žä¾‹è®¾ç½®ä¸ºç³»ç»Ÿé»˜è®¤å¼‚å¸¸å¤„ç†å™¨ &#125; /** * è¿™ä¸ªæ–¹æ³•æ˜¯æˆ‘ä»¬é‡å†™çš„é‡ç‚¹ï¼Œå½“ç³»ç»Ÿå‡ºçŽ°æœªæ•èŽ·å¼‚å¸¸æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• * * @param t å‡ºçŽ°æœªæ•èŽ·å¼‚å¸¸çš„çº¿ç¨‹ * @param e æœªæ•èŽ·çš„å¼‚å¸¸ */ @Override public void uncaughtException(Thread t, Throwable e) &#123; try &#123; saveExceptionToFile(e); &#125; catch (Exception ex) &#123; ex.printStackTrace(); &#125; if (mDefualtCrashHandler != null) &#123; //å¦‚æžœç³»ç»Ÿæœ‰é»˜è®¤å¼‚å¸¸å¤„ç†å°±ä½¿ç”¨å®ƒå¤„ç† mDefualtCrashHandler.uncaughtException(t, e); &#125; else &#123; //å¦åˆ™æˆ‘ä»¬è‡ªè¡Œç»“æŸç¨‹åº android.os.Process.killProcess(Process.myPid()); &#125; &#125; private void saveExceptionToFile(Throwable e) throws IOException&#123; if (FileUtils.ExistSDCard())&#123; long currentTime = System.currentTimeMillis(); String crashTime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(currentTime); File file = new File(FileUtils.getAppCrashDir()+"crash" + crashTime + ".txt"); file.createNewFile(); try&#123; PrintWriter pw = new PrintWriter(new BufferedWriter(new FileWriter(file))); pw.println(crashTime); printPhoneInfo(pw); pw.println(); e.printStackTrace(pw); //è¾“å‡ºé”™è¯¯ä¿¡æ¯ pw.close(); &#125; catch (Exception ex)&#123; ex.printStackTrace(); &#125; &#125; &#125; /** * è¾“å‡ºæ‰‹æœºä¿¡æ¯ */ private void printPhoneInfo(PrintWriter pw) throws PackageManager.NameNotFoundException &#123; PackageManager pm = mContext.getPackageManager(); PackageInfo pi = pm.getPackageInfo(mContext.getPackageName(), PackageManager.GET_ACTIVITIES); pw.print("App version: "); pw.print(pi.versionName); pw.print("_"); pw.println(pi.versionCode); //androidç‰ˆæœ¬å· pw.print("OS Version: "); pw.print(Build.VERSION.RELEASE); pw.print("_"); pw.println(Build.VERSION.SDK_INT); //åˆ¶é€ å•† pw.print("Vendor: "); pw.println(Build.MANUFACTURER); //æ‰‹æœºåž‹å· pw.print("Model: "); pw.println(Build.MODEL); //cpuæž¶æž„ pw.print("CPU ABI: "); pw.println(Build.CPU_ABI); &#125;&#125; çœ‹çœ‹æ€Žä¹ˆä½¿ç”¨ã€‚1234567891011121314public class IceApplication extends MultiDexApplication &#123; private static Context context; @Override public void onCreate() &#123; super.onCreate(); context = this; //åˆå§‹åŒ–å¼‚å¸¸å¤„ç†ç±»ï¼Œè¿™æ ·æˆ‘ä»¬çš„å¼‚å¸¸ç±»å°±ç”Ÿæ•ˆäº† CrashHandler.getInstance().init(context); &#125; public static Context getAppContext()&#123; return context; &#125;&#125; æ€»ç»“çŽ°åœ¨æˆ‘ä»¬å¯¹å¼‚å¸¸æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œä»ŽçŽ°åœ¨å¼€å§‹ï¼Œåœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­è¦å¼€å§‹æ³¨æ„å¯¹å¼‚å¸¸çš„å¤„ç†è‰ºæœ¯äº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[StackTraceElementçº¿ç¨‹è¿è¡Œæ ˆçš„æŽ¢ç´¢]]></title>
      <url>%2F2016%2F08%2F10%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2FStackTraceElement%E7%BA%BF%E7%A8%8B%E8%BF%90%E8%A1%8C%E6%A0%88%E7%9A%84%E6%8E%A2%E7%B4%A2%2F</url>
      <content type="text"><![CDATA[ä»‹ç»StackTraceElement[]ä¸­ä¿å­˜äº†ä¸€æ¡çº¿ç¨‹ä¸­æ‰€æœ‰è°ƒç”¨çš„æ–¹æ³•ã€‚å…¶ä¸­æ¯ä¸ªæ–¹æ³•çš„ä¿¡æ¯åŒ…å«åœ¨ä¸€ä¸ªStackTraceElementå¯¹è±¡ä¸­ã€‚ èŽ·å–StackTraceElementä¸­çš„ä¿¡æ¯1234element.getClassName(); //èŽ·å–ç±»åelement.getMethodLine(); //èŽ·å–æ–¹æ³•åelement.getMethodName(); //èŽ·å–æ–¹æ³•åelement.getFileName(); //èŽ·å–åŒ…å«ç±»çš„æ–‡ä»¶å StackTraceElement[]ä¸­çš„ä¿¡æ¯StackTracelElement[]æ˜¯ä¸€ä¸ªçš„æ•°ç»„ï¼Œä»¥ä¸‹æ ‡1ä¸ºå¼€å§‹ï¼Œå…¶ä¸­åœ¨Javaæ¯”è¾ƒæœ‰ç”¨çš„æ˜¯ç¬¬3ä¸ªï¼Œåœ¨Androidä¸­æ¯”è¾ƒæœ‰ç”¨çš„æ˜¯ç¬¬4ä¸ª,å› ä¸ºåœ¨Androidä¸­å¤šäº†ä¸€ä¸ªDalvikçš„è°ƒç”¨ï¼Œæ‰€ä»¥å®žé™…Javaä¸­çš„ç¬¬3ä½å‘åŽç§»åŠ¨äº†ä¸€ä¸ªä½ç½®ï¼Œå˜æˆç¬¬4ä½ã€‚è¿™ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„StackTraceElementä¿å­˜äº†å®žé™…è°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185//ä¸‹é¢æ–¹æ³•èƒ½å¤Ÿæ‰“å°ä¸€ç»„å½“å‰çº¿ç¨‹çš„StackTraceElement[]ä¿¡æ¯ï¼špublic static String showAllElementsInfo() &#123; String print = ""; int count = 0; //ä»Žå½“å‰çº¿ç¨‹ä¸­èŽ·å–æ‰€æœ‰çš„StackTraceElement StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace(); for (StackTraceElement stackTraceElement : stackTraceElements) &#123; count++; print += String.format("ClassName:%s " + "\nMethodName:%s " + "\nMethodLine:%d " + "\nå½“å‰æ˜¯ç¬¬%dä¸ª " + "\n---------------------------- " + "\n ", stackTraceElement.getClassName(), stackTraceElement.getMethodName(), stackTraceElement.getLineNumber(), count); &#125; return print; &#125; //æˆ‘æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­è°ƒç”¨çš„ @Test public void testTestElement() throws Exception &#123; System.out.println(LogUtils.showAllElementsInfo()); &#125;//ä¸‹é¢æ˜¯æµ‹è¯•æ‰“å°ç»“æžœï¼šClassName:java.lang.Thread MethodName:getStackTrace MethodLine:1552 å½“å‰æ˜¯ç¬¬1ä¸ª ---------------------------- ClassName:com.example.chenbing.animdvedemo.Utils.LogUtils MethodName:showAllElementsInfo MethodLine:60 å½“å‰æ˜¯ç¬¬2ä¸ª ---------------------------- ClassName:com.example.chenbing.animdvedemo.Utils.LogUtilsTest MethodName:testTestElement MethodLine:32 å½“å‰æ˜¯ç¬¬3ä¸ª ---------------------------- ClassName:sun.reflect.NativeMethodAccessorImpl MethodName:invoke0 MethodLine:-2 å½“å‰æ˜¯ç¬¬4ä¸ª ---------------------------- ClassName:sun.reflect.NativeMethodAccessorImpl MethodName:invoke MethodLine:62 å½“å‰æ˜¯ç¬¬5ä¸ª ---------------------------- ClassName:sun.reflect.DelegatingMethodAccessorImpl MethodName:invoke MethodLine:43 å½“å‰æ˜¯ç¬¬6ä¸ª ---------------------------- ClassName:java.lang.reflect.Method MethodName:invoke MethodLine:498 å½“å‰æ˜¯ç¬¬7ä¸ª ---------------------------- ClassName:org.junit.runners.model.FrameworkMethod$1 MethodName:runReflectiveCall MethodLine:50 å½“å‰æ˜¯ç¬¬8ä¸ª ---------------------------- ClassName:org.junit.internal.runners.model.ReflectiveCallable MethodName:run MethodLine:12 å½“å‰æ˜¯ç¬¬9ä¸ª ---------------------------- ClassName:org.junit.runners.model.FrameworkMethod MethodName:invokeExplosively MethodLine:47 å½“å‰æ˜¯ç¬¬10ä¸ª ---------------------------- ClassName:org.junit.internal.runners.statements.InvokeMethod MethodName:evaluate MethodLine:17 å½“å‰æ˜¯ç¬¬11ä¸ª ---------------------------- ClassName:org.junit.internal.runners.statements.RunBefores MethodName:evaluate MethodLine:26 å½“å‰æ˜¯ç¬¬12ä¸ª ---------------------------- ClassName:org.junit.internal.runners.statements.RunAfters MethodName:evaluate MethodLine:27 å½“å‰æ˜¯ç¬¬13ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner MethodName:runLeaf MethodLine:325 å½“å‰æ˜¯ç¬¬14ä¸ª ---------------------------- ClassName:org.junit.runners.BlockJUnit4ClassRunner MethodName:runChild MethodLine:78 å½“å‰æ˜¯ç¬¬15ä¸ª ---------------------------- ClassName:org.junit.runners.BlockJUnit4ClassRunner MethodName:runChild MethodLine:57 å½“å‰æ˜¯ç¬¬16ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner$3 MethodName:run MethodLine:290 å½“å‰æ˜¯ç¬¬17ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner$1 MethodName:schedule MethodLine:71 å½“å‰æ˜¯ç¬¬18ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner MethodName:runChildren MethodLine:288 å½“å‰æ˜¯ç¬¬19ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner MethodName:access$000 MethodLine:58 å½“å‰æ˜¯ç¬¬20ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner$2 MethodName:evaluate MethodLine:268 å½“å‰æ˜¯ç¬¬21ä¸ª ---------------------------- ClassName:org.junit.runners.ParentRunner MethodName:run MethodLine:363 å½“å‰æ˜¯ç¬¬22ä¸ª ---------------------------- ClassName:org.junit.runner.JUnitCore MethodName:run MethodLine:137 å½“å‰æ˜¯ç¬¬23ä¸ª ---------------------------- ClassName:com.intellij.junit4.JUnit4IdeaTestRunner MethodName:startRunnerWithArgs MethodLine:69 å½“å‰æ˜¯ç¬¬24ä¸ª ---------------------------- ClassName:com.intellij.rt.execution.junit.JUnitStarter MethodName:prepareStreamsAndStart MethodLine:234 å½“å‰æ˜¯ç¬¬25ä¸ª ---------------------------- ClassName:com.intellij.rt.execution.junit.JUnitStarter MethodName:main MethodLine:74 å½“å‰æ˜¯ç¬¬26ä¸ª ---------------------------- ClassName:sun.reflect.NativeMethodAccessorImpl MethodName:invoke0 MethodLine:-2 å½“å‰æ˜¯ç¬¬27ä¸ª ---------------------------- ClassName:sun.reflect.NativeMethodAccessorImpl MethodName:invoke MethodLine:62 å½“å‰æ˜¯ç¬¬28ä¸ª ---------------------------- ClassName:sun.reflect.DelegatingMethodAccessorImpl MethodName:invoke MethodLine:43 å½“å‰æ˜¯ç¬¬29ä¸ª ---------------------------- ClassName:java.lang.reflect.Method MethodName:invoke MethodLine:498 å½“å‰æ˜¯ç¬¬30ä¸ª ---------------------------- ClassName:com.intellij.rt.execution.application.AppMain MethodName:main MethodLine:144 å½“å‰æ˜¯ç¬¬31ä¸ª ----------------------------]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å†…å­˜æŠ–åŠ¨]]></title>
      <url>%2F2016%2F08%2F09%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2F%E5%86%85%E5%AD%98%E6%8A%96%E5%8A%A8%2F</url>
      <content type="text"><![CDATA[å‚è€ƒèµ„æ–™Googleå®˜æ–¹è®²è§£è§†å± èƒŒæ™¯ä»‹ç»åœ¨Javaå†…å­˜ç®¡ç†æœºåˆ¶ä¸­æˆ‘æåˆ°è¿‡å†…å­˜æŠ–åŠ¨ä¼šå¼•èµ·é¢‘ç¹çš„GCï¼Œä»Žè€Œä½¿UIçº¿ç¨‹è¢«é¢‘ç¹é˜»å¡žï¼Œå¯¼è‡´ç”»é¢å¡é¡¿ã€‚è¿™æ¬¡æˆ‘ä»¬å°±èŠèŠå†…å­˜æŠ–åŠ¨ã€‚ éœ€è¦é¿å…å†…å­˜æŠ–åŠ¨å†…å­˜æŠ–åŠ¨æ˜¯ç”±äºŽçŸ­æ—¶é—´å†…æœ‰å¤§é‡å¯¹è±¡è¿›å‡ºYoung GeneriationåŒºå¯¼è‡´çš„ï¼Œå®ƒä¼´éšç€é¢‘ç¹çš„GCã€‚é€šå¸¸å­˜åœ¨å†…å­˜æŠ–åŠ¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Android Studioçš„Monitorsä¸­çœ‹åˆ°å¦‚ä¸‹åœºæ™¯ï¼šä¸‹é¢æ˜¯é¿å…å‘ç”Ÿå†…å­˜æŠ–åŠ¨çš„å‡ ç‚¹å»ºè®®ï¼š å°½é‡é¿å…åœ¨å¾ªçŽ¯ä½“å†…åˆ›å»ºå¯¹è±¡ï¼Œåº”è¯¥æŠŠå¯¹è±¡åˆ›å»ºç§»åˆ°å¾ªçŽ¯ä½“å¤–ã€‚ æ³¨æ„è‡ªå®šä¹‰Viewçš„onDraw()æ–¹æ³•ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œé¢ä¸åº”è¯¥é¢‘ç¹çš„åˆ›å»ºå¯¹è±¡ã€‚ å½“éœ€è¦å¤§é‡ä½¿ç”¨Bitmapçš„æ—¶å€™ï¼Œè¯•ç€æŠŠå®ƒä»¬ç¼“å­˜åœ¨æ•°ç»„ä¸­å®žçŽ°å¤ç”¨ã€‚ å¯¹äºŽèƒ½å¤Ÿå¤ç”¨çš„å¯¹è±¡ï¼ŒåŒç†å¯ä»¥ä½¿ç”¨å¯¹è±¡æ± å°†å®ƒä»¬ç¼“å­˜èµ·æ¥ã€‚ æ€»ç»“æ€»ä¹‹ï¼Œå› ä¸ºå†…å­˜æŠ–åŠ¨æ˜¯ç”±äºŽå¤§é‡å¯¹è±¡åœ¨çŸ­æ—¶é—´å†…è¢«é…ç½®è€Œå¼•èµ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯è°¨æ…Žå¯¹å¾…é‚£äº›å¯èƒ½ä¼šå¤§é‡åˆ›å»ºå¯¹è±¡çš„æƒ…å†µã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å†…å­˜æ³„æ¼]]></title>
      <url>%2F2016%2F08%2F08%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2F%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%2F</url>
      <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç»å†…å­˜æ³„æ¼ä¸€ç§æƒ…å†µæ˜¯ä¸€å—å†…å­˜æ²¡æœ‰å¼•ç”¨æŒ‡å‘å®ƒï¼Œå´æ²¡è¢«å›žæ”¶ï¼Œè¿™ç§æƒ…å†µå·²ç»ç”±Javaè™šæ‹Ÿæœºçš„GCå¸®åŠ©æˆ‘ä»¬å¤„ç†å¥½äº†ï¼Œè§Javaå†…å­˜ç®¡ç†æœºåˆ¶ï¼›å¦ä¸€ç§å±žäºŽé€»è¾‘å†…å­˜æ³„æ¼ï¼Œå³ä¸€ä¸ªå¯¹è±¡å·²ç»ä¸å†è¢«ä½¿ç”¨äº†ï¼Œä½†å®ƒä»ç„¶è¢«å¦ä¸€ä¸ªè¢«ä½¿ç”¨ä¸­çš„å¯¹è±¡æ‰€æŒæœ‰ï¼Œå¯¼è‡´è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜å—ä¸èƒ½è¢«å›žæ”¶ã€‚ å°‘éƒ¨åˆ†å†…å­˜æ³„æ¼çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆå½±å“ï¼Œä½†å¦‚æžœå¤§é‡å‘ç”Ÿï¼Œå°†ä¼šæ˜Žæ˜¾å‡å°‘å¯ç”¨å†…å­˜ï¼Œå¯¼è‡´é¢‘ç¹GCï¼Œè¿è¡Œç¼“æ…¢ï¼Œä¸¥é‡æ—¶å°†å®¹æ˜“å¼•å‘OutOfMemoryErrorã€‚ Androidä¸­å¸¸è§çš„å†…å­˜æ³„æ¼é›†åˆå¼•å‘çš„æ³„æ¼ä¸€äº›å¯¹è±¡ç¼“å­˜åˆ°é›†åˆä¸­ï¼Œå½“å®ƒä¸åœ¨è¢«ä½¿ç”¨æ—¶ï¼Œæ²¡æœ‰ä»Žé›†åˆä¸­ç§»é™¤ï¼Œå°±é€ æˆäº†æ³„æ¼ã€‚ Activityä¸­çš„æ³„æ¼ä¸€ä¸ªActivityä¸­çš„Contexté€šå¸¸ä¼šè¢«å¾ˆå¤šåœ°æ–¹å¼•ç”¨ï¼Œå¦‚æžœåœ¨Activityæ‰§è¡Œäº†onDestory()åŽè¿™äº›å¼•ç”¨æ²¡æœ‰è¢«ç½®ç©ºï¼Œå°†ä¼šå¯¼è‡´Activityæ— æ³•è¢«å›žæ”¶ã€‚è€ŒActivityä¸­ä¾èµ–äº†å¾ˆå¯¹å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å°†éƒ½ä¸èƒ½è¢«å›žæ”¶ï¼Œæ‰€ä»¥ä¸€å®šè¦ååˆ†å°å¿ƒActivityçš„æ³„æ¼ã€‚ä»¥ä¸‹å‡ ç§å¸¸è§çš„æƒ…å†µéœ€è¦æ³¨æ„ï¼š å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡éœ€è¦Contextä½œä¸ºå‚æ•°æ—¶ã€‚å½“è¯¥å¯¹è±¡åœ¨Activityæ‰§è¡Œäº†onDestory()åŽä»ç„¶å¯åˆ°è¾¾ï¼Œé‚£ä¹ˆå®ƒæŒæœ‰çš„Activityå°±æ— æ³•è¢«å›žæ”¶ã€‚ ä½¿ç”¨Handleræ—¶ã€‚Handlerä¼šé—´æŽ¥çš„æŒæœ‰Activityçš„å¼•ç”¨(åœ¨Activityä¸­newçš„HandleræŒæœ‰çš„ä¸»çº¿ç¨‹çš„Loop)ï¼Œå½“Activityæ‰§è¡Œäº†onDestory()åŽï¼Œè‹¥Handlerä»æœªè¢«é‡Šæ”¾ï¼Œé‚£ä¹ˆActivityä¹Ÿå°†ä¸ä¼šè¢«é‡Šæ”¾ã€‚è§£å†³æ–¹æ³•ï¼š éœ€è¦åœ¨onDestory()å®Œæˆå‰ç¡®ä¿Handleræ²¡æœ‰æ‰§è¡Œyan shiå»¶æ—¶ä»»åŠ¡ï¼Œæ²¡æœ‰è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚åŒæ—¶æ¸…ç†Handlerä¸­æ‰€æœ‰ä»»åŠ¡ï¼Œè°ƒç”¨removeCallbacksAndMessages(null);,è¯¥æ–¹æ³•å‚æ•°ä¸ºç©ºæ—¶ä¼šç§»é™¤æ‰€ä»¥çš„CallBackå’ŒMessageã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªé™æ€å†…éƒ¨Handlerï¼Œè®©å®ƒæŒæœ‰çš„Activityä¸ºå¼±å¼•ç”¨ã€‚1234567891011121314static class MyHandler extends Handler &#123; private final WeakReference&lt;Activity&gt; mActivity; public MyHandler(Activity activity) &#123; mActivity = new WeakReference&lt;Activity&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; System.out.println(msg); if (mActivity.get() == null) &#123; return; &#125; mActivity.get().todo(); &#125; &#125; åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­å¼•ç”¨Activityæˆ–Contextï¼Œè€Œæ²¡æœ‰åœ¨Activityé”€æ¯å‰åœæ­¢çº¿ç¨‹ï¼Œå°±ä¼šå¯¼è‡´Activityçš„æ³„æ¼ã€‚ å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»ä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å®žä¾‹ï¼Œæ‰€ä»¥åœ¨Activityä¸­ä½¿ç”¨å†…éƒ¨ç±»æˆ–åŒ¿åå†…éƒ¨ç±»ï¼Œå¹¶ä¸”å¥–è¯¥ç±»åˆ›å»ºçš„å¯¹è±¡ä¼ é€’ç»™å…¶ä»–å¯¹è±¡ï¼Œè‹¥è¯¥å¯¹è±¡åœ¨Activityä¹‹å¤–è¢«å¼•ç”¨ï¼Œæˆ–æ˜¯åœ¨ä»åœ¨è¿›è¡Œçš„å¼‚æ­¥ä»»åŠ¡ä¸­ï¼Œé‚£ä¹ˆActivityå°†ä¸èƒ½é‡Šæ”¾ã€‚Bitmapå¼•å‘çš„å†…å­˜æ³„æ¼Bitmapæ˜¯å¼•ç”¨ä¸­å ç”¨å†…å­˜çš„å¤§æˆ·ï¼Œåœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦ååˆ†æ³¨æ„ã€‚å½“Bitmapä¸ç”¨æ—¶ï¼Œåº”è¯¥åŠæ—¶è°ƒç”¨recycle()é‡Šæ”¾å…¶ç”³è¯·çš„å†…å­˜ã€‚å¼‚æ­¥ä»»åŠ¡å¼•å‘çš„æ³„æ¼å¼‚æ­¥ä»»åŠ¡å¦‚æžœåœ¨å®ƒåº”è¯¥åœæ­¢çš„æ—¶å€™æ²¡æœ‰åœæ­¢ï¼Œé‚£å®ƒæœ¬èº«åŠå®ƒæ‰€ä¾èµ–çš„å¯¹è±¡å°†éƒ½ä¸èƒ½è¢«æ­£ç¡®çš„é‡Šæ”¾ã€‚æ¯”å¦‚ä¸Šé¢æåˆ°çš„Activityä¸­çš„å¼‚æ­¥ä»»åŠ¡ã€‚æ€»ç»“ç”±äºŽç³»ç»Ÿå†…å­˜èµ„æºæœ‰é™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°½é‡é¿å…å†…å­˜æ³„æ¼ï¼Œä»¥ä¿è¯ç¨‹åºèƒ½å¤Ÿæµç•…è¿è¡Œã€‚ ç”±äºŽActivityæ³„æ¼å°†ä¼šè¿žå¸¦å¤§é‡çš„å¯¹è±¡ä¸€èµ·æ³„æ¼ï¼Œæ‰€ä»¥åœ¨Activityä¸­å†™ä»£ç åº”è¯¥ç‰¹åˆ«æ³¨æ„Handlerã€å†…éƒ¨ç±»åŠåŒ¿åå†…éƒ¨ç±»ï¼Œè¿˜æœ‰Contextä¸èƒ½éšä¾¿ä¼ é€’ã€‚ ä½¿ç”¨å¼‚æ­¥ä»»åŠ¡æ—¶ä¸€å®šè¦æ˜Žç¡®å…¶ä½œç”¨èŒƒå›´ï¼Œåœ¨åº”è¯¥åœæ­¢çš„æ—¶å€™è®°å¾—åœæ­¢ã€‚ Bitmapå ç”¨å†…å­˜é€šå¸¸è¾ƒå¤§ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å®ŒåŽåŠæ—¶é‡Šæ”¾ååˆ†é‡è¦ã€‚ æ­¤å¤–ï¼Œåœ¨ä¼ é€’å‚æ•°åˆ°å•ä¾‹ä¸­æ—¶ï¼Œä¹Ÿéœ€è¦è°¨æ…Žã€‚tic class MyHandler extends Handler {private final WeakReference&lt;Activity&gt; mActivity; public MyHandler(Activity activity) { mActivity = new WeakReference&lt;Activity&gt;(activity); } @Override public void handleMessage(Message msg) { System.out.println(msg); if (mActivity.get() == null) { return; } mActivity.get().todo(); } }``` åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­å¼•ç”¨Activityæˆ–Contextï¼Œè€Œæ²¡æœ‰åœ¨Activityé”€æ¯å‰åœæ­¢çº¿ç¨‹ï¼Œå°±ä¼šå¯¼è‡´Activityçš„æ³„æ¼ã€‚ å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»ä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å®žä¾‹ï¼Œæ‰€ä»¥åœ¨Activityä¸­ä½¿ç”¨å†…éƒ¨ç±»æˆ–åŒ¿åå†…éƒ¨ç±»ï¼Œå¹¶ä¸”å¥–è¯¥ç±»åˆ›å»ºçš„å¯¹è±¡ä¼ é€’ç»™å…¶ä»–å¯¹è±¡ï¼Œè‹¥è¯¥å¯¹è±¡åœ¨Activityä¹‹å¤–è¢«å¼•ç”¨ï¼Œæˆ–æ˜¯åœ¨ä»åœ¨è¿›è¡Œçš„å¼‚æ­¥ä»»åŠ¡ä¸­ï¼Œé‚£ä¹ˆActivityå°†ä¸èƒ½é‡Šæ”¾ã€‚Bitmapå¼•å‘çš„å†…å­˜æ³„æ¼Bitmapæ˜¯å¼•ç”¨ä¸­å ç”¨å†…å­˜çš„å¤§æˆ·ï¼Œåœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦ååˆ†æ³¨æ„ã€‚å½“Bitmapä¸ç”¨æ—¶ï¼Œåº”è¯¥åŠæ—¶è°ƒç”¨recycle()é‡Šæ”¾å…¶ç”³è¯·çš„å†…å­˜ã€‚å¼‚æ­¥ä»»åŠ¡å¼•å‘çš„æ³„æ¼å¼‚æ­¥ä»»åŠ¡å¦‚æžœåœ¨å®ƒåº”è¯¥åœæ­¢çš„æ—¶å€™æ²¡æœ‰åœæ­¢ï¼Œé‚£å®ƒæœ¬èº«åŠå®ƒæ‰€ä¾èµ–çš„å¯¹è±¡å°†éƒ½ä¸èƒ½è¢«æ­£ç¡®çš„é‡Šæ”¾ã€‚æ¯”å¦‚ä¸Šé¢æåˆ°çš„Activityä¸­çš„å¼‚æ­¥ä»»åŠ¡ã€‚æ€»ç»“ç”±äºŽç³»ç»Ÿå†…å­˜èµ„æºæœ‰é™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°½é‡é¿å…å†…å­˜æ³„æ¼ï¼Œä»¥ä¿è¯ç¨‹åºèƒ½å¤Ÿæµç•…è¿è¡Œã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[RecyclerViewâ€”â€”ä½¿ç”¨ItemDragHelperæ¥å®žçŽ°é…·ç‚«æ‹–æ‹½æ•ˆæžœ]]></title>
      <url>%2F2016%2F08%2F08%2FRecyclerView%2FRecyclerView%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8ItemDragHelper%E6%9D%A5%E5%AE%9E%E7%8E%B0%E9%85%B7%E7%82%AB%E6%8B%96%E6%8B%BD%E6%95%88%E6%9E%9C%2F</url>
      <content type="text"><![CDATA[å‚è€ƒèµ„æ–™å‚è€ƒèµ„æ–™1å‚è€ƒèµ„æ–™2å‚è€ƒèµ„æ–™3ã€æŽ¨èã€‘ èƒŒæ™¯ä»‹ç»åˆ—è¡¨æŽ§ä»¶å¯ä»¥è¯´æ˜¯æˆ‘ä»¬ç»å¤§éƒ¨åˆ†Appä¸­éƒ½ä¼šä½¿ç”¨çš„ï¼Œä¸ºäº†æå‡äº¤äº’ä¹è¶£ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨åˆ—è¡¨ä¸­åŠ å…¥æ‹–æ‹½ã€æ»‘åŠ¨ç­‰æ“ä½œï¼Œæœ¬ç¯‡æˆ‘å°†ä»‹ç»ä½¿ç”¨ItemDragHelperè¿™ä¸ªå®˜æ–¹æä¾›çš„äº¤äº’å¸®åŠ©ç±»æ¥å¸®åŠ©RecyclerViewå®žçŽ°è¿™äº›å¤æ‚çš„äº¤äº’ã€‚ èµ°è¿›ItemTouchHelperè¦ä½¿ç”¨è¿™ä¸ªç±»ï¼Œæœ€å…³é”®çš„æ­¥éª¤æ˜¯ä¼ ç»™å®ƒä¸€ä¸ªItemTouchHelper.Callbackï¼Œå…¶å®ƒçš„æˆ‘ä»¬å¯ä»¥ä¸ç”¨ç®¡ã€‚æ—¢ç„¶å®ƒæ˜¯ä¸€ä¸ªCallbackï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¤§æ¦‚çŒœåˆ°ï¼Œæˆ‘ä»¬è‡ªç„¶å°±æ˜¯åœ¨å®ƒçš„ä¸€äº›å›žè°ƒå‡½æ•°é‡Œåšæ“ä½œäº†ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹æˆ‘ä»¬éœ€è¦åœ¨å“ªäº›å›žè°ƒå‡½æ•°é‡Œåšæ“ä½œã€‚å…ˆä¸Šä¸ªæ•ˆæžœå›¾ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081public class CustomItemTouchHelperCallback extends ItemTouchHelper.Callback &#123; private OnItemTouchCallbackListener onItemTouchCallbackListener; private boolean canDrag = true; private boolean canSwipe = true; public CustomItemTouchHelperCallback(OnItemTouchCallbackListener onItemTouchCallbackListener) &#123; this.onItemTouchCallbackListener = onItemTouchCallbackListener; &#125; @Override public int getMovementFlags(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) &#123; RecyclerView.LayoutManager layoutManager = recyclerView.getLayoutManager(); int dragFlags = 0; int swipeFlags = 0; if (layoutManager instanceof GridLayoutManager) &#123; // å¦‚æžœæ˜¯Gridå¸ƒå±€ï¼Œåˆ™ä¸èƒ½æ»‘åŠ¨ï¼Œåªèƒ½ä¸Šä¸‹å·¦å³æ‹–åŠ¨ dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN | ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT; swipeFlags = 0; &#125; else if (layoutManager instanceof LinearLayoutManager) &#123; // å¦‚æžœæ˜¯çºµå‘Linearå¸ƒå±€ï¼Œåˆ™èƒ½ä¸Šä¸‹æ‹–åŠ¨ï¼Œå·¦å³æ»‘åŠ¨ if (((LinearLayoutManager) layoutManager).getOrientation() == LinearLayoutManager.VERTICAL) &#123; dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN; swipeFlags = ItemTouchHelper.LEFT|ItemTouchHelper.RIGHT; &#125; else &#123; // å¦‚æžœæ˜¯æ¨ªå‘Linearå¸ƒå±€ï¼Œåˆ™èƒ½å·¦å³æ‹–åŠ¨ï¼Œä¸Šä¸‹æ»‘åŠ¨ swipeFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN; dragFlags = ItemTouchHelper.LEFT|ItemTouchHelper.RIGHT; &#125; &#125; return makeMovementFlags(dragFlags, swipeFlags); //è¯¥æ–¹æ³•æŒ‡å®šå¯è¿›è¡Œçš„æ“ä½œ &#125; /** * æ‹–åŠ¨æ—¶å›žè°ƒï¼Œåœ¨è¿™é‡Œå¤„ç†æ‹–åŠ¨äº‹ä»¶ * * @param viewHolder è¢«æ‹–åŠ¨çš„view * @param target ç›®æ ‡ä½ç½®çš„view */ @Override public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) &#123; //è¿™é‡Œæˆ‘ä»¬ç›´æŽ¥å°†å‚æ•°ä¼ é€’åˆ°å›žè°ƒæŽ¥å£æ–¹æ³•ä¸­ï¼Œæé«˜å¤ç”¨æ€§ return onItemTouchCallbackListener.onMove(recyclerView, viewHolder, target); &#125; /** * æ»‘åŠ¨æ—¶å›žè°ƒ * * @param direction å›žè°ƒæ–¹å‘ */ @Override public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) &#123; onItemTouchCallbackListener.onSwiped(viewHolder, direction); &#125; /** * åœ¨è¿™ä¸ªå›žè°ƒä¸­ï¼Œå¦‚æžœè¿”å›žtrueï¼Œè¡¨ç¤ºå¯ä»¥è§¦å‘é•¿æŒ‰æ‹–åŠ¨äº‹ä»¶ï¼Œfalseåˆ™è¡¨ç¤ºä¸èƒ½ */ @Override public boolean isLongPressDragEnabled() &#123; return canDrag; &#125; /** * åœ¨è¿™ä¸ªå›žè°ƒä¸­ï¼Œå¦‚æžœè¿”å›žtrueï¼Œè¡¨ç¤ºå¯ä»¥è§¦å‘æ»‘åŠ¨äº‹ä»¶ï¼Œfalseè¡¨ç¤ºä¸èƒ½ */ @Override public boolean isItemViewSwipeEnabled() &#123; return canSwipe; &#125; public void setCanDrag(boolean canDrag) &#123; this.canDrag = canDrag; &#125; public void setCanSwipe(boolean canSwipe) &#123; this.canSwipe = canSwipe; &#125;&#125; ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹æ€Žä¹ˆæ¥ä½¿ç”¨è¿™ä¸ªæˆ‘ä»¬è‡ªå®šä¹‰çš„Callbackã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576public class DraggerRecyclerViewActivity extends BaseActivity &#123; @BindView(R.id.rv_dragger_list) RecyclerView draggerList; private List&lt;String&gt; datas = new ArrayList&lt;&gt;(); private TextTestAdapter adapter; private CustomItemTouchHelper itemTouchHelper; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_dragger_recycler_view); ButterKnife.bind(this); initData(); initView(); addListener(); &#125; @Override protected void initData() &#123; for (int i = 0; i &lt; 100; i++) &#123; datas.add("æˆ‘æ˜¯Item" + i); &#125; &#125; @Override protected void initView() &#123; draggerList.setItemAnimator(new DefaultItemAnimator()); draggerList.addItemDecoration(new RecyclerView.ItemDecoration() &#123; @Override public void getItemOffsets(Rect outRect, int itemPosition, RecyclerView parent) &#123; if (itemPosition != parent.getChildCount() - 1) &#123; outRect.bottom = (int) DisplayUtils.dipToPx(0.5f); &#125; &#125; &#125;); draggerList.setLayoutManager(new LinearLayoutManager(this)); adapter = new TextTestAdapter(this, datas); //åˆ›å»ºItemTouchHelper itemTouchHelper = new CustomItemTouchHelper(new OnItemTouchCallbackListener() &#123; @Override public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) &#123; if (datas == null) &#123; return false; &#125; //å¤„ç†æ‹–åŠ¨æŽ’åº //ä½¿ç”¨Collectionå¯¹æ•°ç»„è¿›è¡Œé‡æŽ’åºï¼Œç›®çš„æ˜¯æŠŠæˆ‘ä»¬æ‹–åŠ¨çš„Itemæ¢åˆ°ä¸‹ä¸€ä¸ªç›®æ ‡Itemçš„ä½ç½® Collections.swap(datas, viewHolder.getAdapterPosition(), target.getAdapterPosition()); //é€šçŸ¥Adapterå®ƒçš„Itemå‘ç”Ÿäº†ç§»åŠ¨ adapter.notifyItemMoved(viewHolder.getAdapterPosition(), target.getAdapterPosition()); return true; &#125; @Override public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) &#123; if (datas == null) &#123; return; &#125; //å¤„ç†æ»‘åŠ¨åˆ é™¤ //ç›´æŽ¥ä»Žæ•°æ®ä¸­åˆ é™¤è¯¥Itemçš„æ•°æ® datas.remove(viewHolder.getAdapterPosition()); //é€šçŸ¥Adapteræœ‰Itemè¢«ç§»é™¤äº† adapter.notifyItemRemoved(viewHolder.getAdapterPosition()); &#125; &#125;); //å¹¶ç»‘å®šRecyclerView itemTouchHelper.attachToRecyclerView(draggerList); draggerList.setAdapter(adapter); &#125; @Override protected void addListener() &#123; &#125;&#125; ä¸‹é¢æ˜¯ItemTouchHelperã€‚1234567public class CustomItemTouchHelper extends ItemTouchHelper &#123; public CustomItemTouchHelper(OnItemTouchCallbackListener onItemTouchCallbackListener) &#123; //ç›´æŽ¥æŠŠå›žè°ƒäº¤ç»™çˆ¶ç±»å¤„ç†å°±å¥½ super(new CustomItemTouchHelperCallback(onItemTouchCallbackListener)); &#125;&#125; å¾ˆç®€å•æ˜¯ä¸æ˜¯ï¼ŸæŠŠå®ƒè‡ªå®šä¹‰å‡ºæ¥å…¶å®žå°±æ˜¯ä¸ºäº†é˜²æ­¢åŽæœŸè¿˜è¦æ·»åŠ åˆ«çš„æ“ä½œï¼Œå¦‚æžœä¸éœ€è¦ï¼Œå¯ä»¥ç›´æŽ¥ç”¨APIä¸­çš„ItemTouchHelperã€‚ æ€»ç»“å½’æ ¹ç»“åº•ï¼Œä½¿ç”¨ItemTouchHelperæ¥å®žçŽ°RecyclerViewçš„æ‹–æ‹½ã€æ»‘åŠ¨æ“ä½œï¼Œæœ€ä¸»è¦çš„è¿˜æ˜¯é‡å†™ItemTouchHelper.Callbackï¼Œåœ¨è¿™ä¸ªå›žè°ƒä¸­ï¼Œæ¯”è¾ƒé‡è¦çš„æ–¹æ³•æ˜¯ä»¥ä¸‹å‡ ä¸ªï¼š getMovementFlags(): è¿™ä¸ªæ–¹æ³•ä¸­éœ€è¦è¿”å›žå¯è¿›è¡Œçš„æ“ä½œFlagsï¼Œè¿™äº›Flagséœ€è¦è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•åˆæˆï¼› makeMovementFlags()ï¼šè¿™ä¸ªæ–¹æ³•å°†dragå’Œmoveæ“ä½œçš„Flagsåˆæˆï¼Œä½œä¸ºgetMovementFlagsä¸­çš„è¿”å›žé¡¹ï¼› onMove()ï¼šå‘ç”Ÿæ‹–åŠ¨æ—¶è°ƒç”¨ï¼› onSwiped()ï¼šå‘ç”Ÿæ»‘åŠ¨æ—¶è°ƒç”¨ï¼› isLongPressDragEnabled()ï¼šæ˜¯å¦èƒ½è§¦å‘é•¿æŒ‰æ‹–åŠ¨ï¼› isItemViewSwipeEnabled()ï¼šæ˜¯å¦èƒ½è§¦å‘æ»‘åŠ¨ï¼›]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javaå†…å­˜ç®¡ç†æœºåˆ¶]]></title>
      <url>%2F2016%2F08%2F08%2FAndroid%E4%B9%8B%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%2FJava%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6%2F</url>
      <content type="text"><![CDATA[å‚è€ƒé“¾æŽ¥å‚è€ƒèµ„æ–™1 èƒŒæ™¯ä»‹ç» Javaä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯å…¶å…·æœ‰åžƒåœ¾å›žæ”¶æœºåˆ¶ã€‚åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒJVMçš„GC(åžƒåœ¾å›žæ”¶å™¨)èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å›žé‚£äº›ä¸å¯åˆ°è¾¾çš„å¯¹è±¡(å°±æ˜¯æœªè¢«å¼•ç”¨çš„å¯¹è±¡)ã€‚ å½“ç„¶ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦è‡ªå·±åŽ»é‡Šæ”¾å†…å­˜(å°±æ˜¯æŠŠå¯¹è±¡ç½®nullï¼ŒæŠŠå®¹å™¨ã€æ•°ç»„æ¸…ç©º)ï¼Œå¦åˆ™å°±ä¼šå¼•èµ·å†…å­˜æ³„æ¼ï¼Œå†…å­˜æ³„æ¼ä¸¥é‡æ—¶å°†å®¹æ˜“å¼•å‘OutOfMemoryErrorï¼Œè¯¦æƒ…è§å†…å­˜æ³„æ¼ã€‚ æ­¤å¤–ï¼Œç”±äºŽGCä¼šåœæ­¢æ‰€æœ‰çš„çº¿ç¨‹ï¼ŒåŒ…æ‹¬UIçº¿ç¨‹ï¼Œæ‰€ä»¥é¢‘ç¹çš„GCå¿…ç„¶ä¼šå¯¼è‡´ç”»é¢å¡é¡¿(Androidä¸­æ¯16msä¸ºä¸€å¸§)ï¼Œå› æ­¤è¿˜åº”é¿å…GCçš„é¢‘ç¹å‘ç”Ÿã€‚ä¸€ä¸ªå¯¼è‡´GCé¢‘ç¹å‘ç”Ÿçš„åŽŸå› å°±æ˜¯å†…å­˜æŠ–åŠ¨ï¼Œç‚¹å‡»é“¾æŽ¥çœ‹è¯¦æƒ…ã€‚ æ‰€ä»¥ï¼Œç†è§£Javaçš„å†…å­˜æœºåˆ¶ï¼Œæœ‰åŠ©äºŽå¸®åŠ©æˆ‘ä»¬åœ¨å†™ä»£ç çš„è¿‡ç¨‹ä¸­é¿å…å†…å­˜æ³„æ¼ã€‚åŸºæœ¬æ¦‚å¿µJavaå†…å­˜å±‚çº§Heap Segmentåœ¨Java8ä¹‹åŽï¼ŒHeap SegmentçœŸæ­£æ„ä¹‰ä¸Šçš„æ˜¯ç”±Young Generiationå’ŒOld Generiationç»„æˆçš„ã€‚å¯¹è±¡åœ¨å…¶ä¸­æ˜¯æ ‡è®°å¤åˆ¶ç®—æ³•æ¥åˆ¤å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦åº”è¯¥è¢«æ¸…ç†æŽ‰ã€‚Heap Segmentä¸­å‘ç”Ÿçš„GCç§°ä¸ºMajor GCï¼Œåªä¼šå½±å“Heap SegmentåŒºã€‚Young Generiationä¸­çš„GCå˜åŒ– å½“å¯¹è±¡è¢«åˆ›å»ºåŽï¼Œé¦–å…ˆä¼šè¢«åŠ å…¥edenåŒºã€‚å½“edenåŒºæ»¡äº†ä¹‹åŽï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡GCï¼Œå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°survivoråŒºã€‚ å½“ä¸ä¸ºç©ºçš„SurvivoråŒºæ»¡äº†ï¼ŒåŒæ ·ä¼šè§¦å‘ä¸€æ¬¡GCã€‚ å½“çŸ­æ—¶é—´å†…æœ‰å¤§é‡å¯¹è±¡åˆ›å»ºå’Œé‡Šæ”¾åŒæ ·ä¼šé€ æˆå†…å­˜æŠ–åŠ¨ï¼Œä¼šè§¦å‘CGã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œsurvivoræœ‰ä¸¤ä¸ªåŒºåŸŸï¼Œå…¶ä¸­ä¸€ä¸ªæ€»æ˜¯ä¿æŒä¸ºç©ºã€‚ çŽ°å‡è®¾ä¸¤ä¸ªSurvivoråŒºåˆ†åˆ«ä¸ºS0ï¼ŒS1ï¼Œå¹¶ä¸”é¦–æ¬¡GCæ—¶ï¼ŒedenåŒºä¸­å­˜æ´»çš„å¯¹è±¡è¢«å¤åˆ¶åˆ°S0ä¸­ã€‚å½“å†æ¬¡å‘ç”ŸGCæ—¶ï¼ŒS0å’Œedenä¸­ä»ç„¶å­˜æ´»çš„å¯¹è±¡å°±ä¼šè¢«å¤åˆ¶åˆ°ç©ºçš„S1ä¸­ï¼Œæ­¤æ—¶S0ä¸ºç©ºï¼›å†æ¬¡å‘ç”ŸGCæ—¶ï¼ŒS1å’Œedenä¸­å­˜æ´»çš„å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°S0ä¸­ï¼Œæ­¤æ—¶S1ä¸ºç©ºï¼›å†æ¬¡å‘ç”ŸGCâ€¦å°±æ˜¯è¿™æ ·è¿›è¡Œçš„ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«æ¥å›žå¤åˆ¶è½¬ç§»çš„æ¬¡æ•°è¾¾åˆ°é˜€å€¼(é»˜è®¤ä¸º15æ¬¡ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨-XX:MaxTenuringThresholdè¯¥å‘½ä»¤æ¥è°ƒæ•´é˜€å€¼)æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å°†è¢«å¤åˆ¶åˆ°Old GeneriationåŒºä¸­ï¼Œæ­¤æ—¶è¯¥å¯¹è±¡å°†ä¼šå˜çš„ç›¸å¯¹å®‰å…¨ï¼Œå› ä¸ºOld SegmentåŒºçš„GCé¢‘çŽ‡ç›¸å¯¹è¾ƒä½Žã€‚Old Segmentä¸­çš„GCå˜åŒ– è¯¥åŒºåŸŸæ»¡äº†ä¹‹åŽä¼šè§¦å‘ä¸€æ¬¡GCï¼Œåœ¨è¯¥æ¬¡GCä¸­ï¼Œä¸€äº›å¹´é¾„è¾ƒå¤§çš„å¯¹è±¡ä¼šè¢«æ¸…ç†æŽ‰ã€‚ è‹¥å¤šæ¬¡è§¦å‘GCåŽï¼Œè¯¥åŒºåŸŸä»ç„¶å¤„äºŽæ»¡çš„çŠ¶æ€ï¼Œåˆ™ä¼šæŠ›å‡ºOutOfMemoryErrorã€‚ ä»¥ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ–°å»ºå¯¹è±¡ä¼šè¢«ç›´æŽ¥å¤åˆ¶åˆ°è¯¥åŒºåŸŸä¸­: å½“æ–°å»ºå¯¹è±¡æ‰€éœ€è¦çš„å†…å­˜å¤§äºŽ1/2çš„å•ä¸ªsurvivoråŒºå†…å­˜æ—¶ï¼› å½“æ–°å»ºå¯¹è±¡è¢«è¯¥åŒºä¸­çš„å¯¹è±¡å¼•ç”¨æ—¶ï¼Œæˆ–è€…å¼•ç”¨äº†è¯¥åŒºåŸŸä¸­çš„å¯¹è±¡ã€‚ æ€»ç»“ Javaå†…å­˜å—è¢«åˆ’åˆ†ä¸ºï¼šCode Segmentã€DataSegmentã€StackSegmentã€Heap Segmentï¼Œå…¶ä¸­Heap Segmentç”±äºŽè®¾è®¡å¯¹è±¡çš„åˆ›å»ºä¸Žé”€æ¯ï¼Œæ‰€ä»¥å®ƒåº”è¯¥é‡ç‚¹å…³æ³¨çš„å¯¹è±¡ã€‚ Heap Segmentåˆè¢«åˆ’åˆ†ä¸ºä¸¤å—ï¼šYoung Generiationå’ŒOld Generiationã€‚ Young Genertiationä¸­åˆè¢«åˆ’åˆ†ä¸ºEdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºï¼Œå¯¹è±¡åœ¨å…¶ä¸­é‡‡ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•æ¥åˆ¤å®šä¸€ä¸ªå¯¹è±¡æ˜¯åº”è¯¥æ¸…ç†è¿˜æ˜¯ç§»åˆ°Old Generiationä¸­ã€‚è¯¥å†…å­˜åŒºåŸŸå‘ç”ŸGCçš„é¢‘çŽ‡è¾ƒé«˜ã€‚ Old Generiationå‘ç”ŸGCçš„é¢‘çŽ‡ç›¸å¯¹è¾ƒä½Žã€‚å½“æœ‰å¤§å¯¹è±¡è¢«åˆ›å»ºï¼Œæˆ–è€…å’Œè¯¥åŒºåŸŸæœ‰å…³çš„å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°†ä¼šè¢«ç›´æŽ¥ç§»åŠ¨åˆ°è¯¥åŒºåŸŸä¸­ã€‚ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡GCï¼Œå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°survivoråŒºã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[RecyclerViewâ€”â€”ç”¨ItemDecorationè£…é¥°ä½ çš„Item]]></title>
      <url>%2F2016%2F08%2F07%2FRecyclerView%2FRecyclerView%E2%80%94%E2%80%94%E7%94%A8ItemDecoration%E8%A3%85%E9%A5%B0%E4%BD%A0%E7%9A%84Item%2F</url>
      <content type="text"><![CDATA[å‚è€ƒèµ„æ–™å‚è€ƒèµ„æ–™1ï¼› èƒŒæ™¯ä»‹ç»RecyclerViewç”±äºŽå®ƒå¼ºå¤§çš„çµæ´»æ€§ï¼Œå·²ç»å¯ä»¥ä»£æ›¿æŽ‰ä¼ ç»Ÿçš„ListViewå’ŒGridViewç­‰åˆ—è¡¨æŽ§ä»¶äº†ã€‚ä½†æ˜¯ä¹Ÿå› ä¸ºå®ƒçš„çµæ´»æ€§ï¼Œä¸€äº›ä¸œè¥¿å°±æ²¡æœ‰å›ºå®šï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å®žçŽ°ï¼Œæ¯”å¦‚RecyclerViewå°±æ²¡æœ‰æä¾›é»˜è®¤çš„åˆ†å‰²çº¿ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸€æ¡åˆ†å‰²çº¿æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±é€šè¿‡ç»§æ‰¿RecyclerView.ItemDecorationæ¥å®žçŽ°ã€‚å½“ç„¶ï¼Œå®ƒä¸ä»…ä»…å¯ä»¥å®žçŽ°åˆ†å‰²çº¿ï¼Œè¿˜èƒ½åˆ›é€ å¾ˆå¤šä¸ä¸€æ ·çš„æ•ˆæžœï¼Œè¿™å–å†³äºŽæˆ‘ä»¬çš„æƒ³è±¡åŠ›åœ¨è¿™ä¸ªé™åˆ¶èŒƒå›´å†…èƒ½åˆ°ä»€ä¹ˆç¨‹åº¦äº†ã€‚æœ¬ç¯‡æˆ‘ä»¬æ¥å¥½å¥½èŠèŠItemDecorationã€‚ è®¤è¯†ReccylerView.ItemDecorationä¸ºRecyclverViewæ·»åŠ ItemDecorationæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ï¼š1mRecyclerView.addItemDecoration(mItemDecoration)ï¼› æ¥ä¸ºæˆ‘ä»¬çš„RecyclerViewæ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„ItemDecorationè£…é¥°å®ƒã€‚è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯addXXXæ–¹æ³•ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¸ºRcyclerViewæ·»åŠ å¤šä¸ªItemDecorationã€‚æ‰“å¼€è¯¥æ–¹æ³•çš„æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344//è¿™æ˜¯æˆ‘ä»¬é€šå¸¸è°ƒç”¨çš„ä»£ç public void addItemDecoration(ItemDecoration decor) &#123; //è¿™é‡Œåˆè°ƒç”¨äº†å¦ä¸€ä¸ªé‡è½½çš„æ–¹æ³• addItemDecoration(decor, -1); &#125; /** * Add an &#123;@link ItemDecoration&#125; to this RecyclerView. Item decorations can * affect both measurement and drawing of individual item views. * * &lt;p&gt;Item decorations are ordered. Decorations placed earlier in the list will * be run/queried/drawn first for their effects on item views. Padding added to views * will be nested; a padding added by an earlier decoration will mean further * item decorations in the list will be asked to draw/pad within the previous decoration's * given area.&lt;/p&gt; * * @param decor Decoration to add * @param index Position in the decoration chain to insert this decoration at. If this value * is negative the decoration will be added at the end. * é€šè¿‡æ–‡æ¡£æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œindexå‚æ•°æŽ§åˆ¶è¿™æˆ‘ä»¬addçš„ItemDecorationæ·»åŠ åˆ°mItemDecorationsæ•°ç»„ä¸­çš„ä½ç½®ã€‚å¦‚æžœå°äºŽ0ï¼Œæˆ‘ä»¬çš„ItemDecorationå°†è¢«æ·»åŠ åˆ°æœ€åŽã€‚ */public void addItemDecoration(ItemDecoration decor, int index) &#123; if (mLayout != null) &#123; mLayout.assertNotInLayoutOrScroll("Cannot add item decoration during a scroll or" + " layout"); &#125; if (mItemDecorations.isEmpty()) &#123; setWillNotDraw(false); //æ³¨æ„ï¼Œå½“æˆ‘ä»¬é¦–æ¬¡æ·»åŠ ItemDecorationæ—¶ï¼ŒmItemDecorationsæ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œ //ä½†è¿™äº‹æˆ‘ä»¬å°±éœ€è¦è®©Viewå¼€å¯è‡ªæˆ‘ç»˜åˆ¶ï¼Œå¦åˆ™RecyclerViewçš„onDraw()æ–¹æ³•å°†æœ‰å¯èƒ½ä¸è¢«æ‰§è¡Œã€‚ //æˆ‘ä»¬åœ¨å†™è‡ªå®šä¹‰ViewGroupæ—¶ä¹Ÿéœ€è¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚ &#125; if (index &lt; 0) &#123; //è¿™ä¸ªé€»è¾‘ä¿è¯äº†å°äºŽ0ï¼Œæ·»åŠ åˆ°æœ«å°¾ mItemDecorations.add(decor); &#125; else &#123; //æ·»åŠ åˆ°æŒ‡å®šä½ç½® mItemDecorations.add(index, decor); &#125; //è¿™ä¸ªæ–¹æ³•æœ€ç»ˆæŠŠRecyclerViewçš„Itemçš„LayoutParamsçš„mInsertDirtyå±žæ€§è®¾ç½®ä¸ºtrueï¼Œ //è¿™æ ·åœ¨measureæ—¶ï¼Œæ‰èƒ½å¤ŸæŠŠæ‰€æœ‰çš„ItemDecorationä¸­çš„itemOffsetæ·»åŠ åˆ°Itemçš„å¸ƒå±€å‚æ•°ä¸Šã€‚ markItemDecorInsetsDirty(); requestLayout(); &#125; æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¤šæ¬¡è°ƒç”¨addItemDecoration()ï¼Œå¹¶ä¸”æ¯æ¬¡æ·»åŠ çš„ItemDecorationçš„itemOffsetéƒ½å°†ç´¯åŠ åˆ°Itemçš„å¸ƒå±€å‚æ•°ä¸Šã€‚ è‡ªå®šä¹‰ItemDecorationå¯¹äºŽè‡ªå®šä¹‰ItemDecorationæˆ‘ä»¬é€šå¸¸ä»…ä»…å…³å¿ƒä»¥ä¸‹3ä¸ªæ–¹æ³•å°±è¡Œã€‚ getItemOffsets()è¿™ä¸ªæ–¹æ³•æœ‰2ä¸ªé‡è½½æ–¹æ³•ï¼š12345678910111213public void getItemOffsets(Rect outRect, int itemPosition, RecyclerView parent) &#123; outRect.set(0, 0, 0, 0); //æ³¨æ„ï¼Œé‡å†™æ—¶superè¦æ…Žé‡ä½¿ç”¨ï¼Œå¦åˆ™è®¾ç½®çš„Rectä¼šè¢«é‡ç½®ã€‚ //é€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è¿™é‡Œè®¾ç½®çš„outRectçš„å‚æ•°æœ€ç»ˆéƒ½ä¼šè¢«ç´¯åŠ åˆ°Itemçš„å¸ƒå±€å‚æ•°ä¸Šã€‚ //å¦‚æžœå€¼è®¾ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆItemä¼šå‘ç”Ÿé‡å ã€‚ &#125;//è¿™ä¸ªæ–¹æ³•ä¸»è¦èƒ½å¤Ÿæ–¹ä¾¿çš„èŽ·å–åˆ°Viewå’Œå½“å‰RecyclerViewçš„çŠ¶æ€ï¼Œ//ä½†å®ƒæœ€ç»ˆè°ƒç”¨çš„ä»ç„¶æ˜¯ä¸Šä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•éœ€è¦æ³¨æ„superï¼Œæœ€å¥½å°±ä¸è¦è¦ã€‚public void getItemOffsets(Rect outRect, View view, RecyclerView parent, State state) &#123; getItemOffsets(outRect, ((LayoutParams) view.getLayoutParams()).getViewLayoutPosition(), parent); &#125; è¿™é‡Œå€Ÿå¼ å›¾ï¼Œä¾µåˆ ï¼ onDraw()è¯¥æ–¹æ³•åŒæ ·æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼š12345678910public void onDraw(Canvas c, RecyclerView parent)&#123; //åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åˆ©ç”¨Canvasç»˜åˆ¶ç‚¹ä»€ä¹ˆï¼Œ //å®ƒæœ€ç»ˆä¼šç»˜åˆ¶åœ¨Itemçš„ä¸‹ä¸€å±‚ï¼Œå¦‚æžœå®ƒè¶…å‡ºItemï¼Œé‚£ä¹ˆè¶…å‡ºéƒ¨åˆ†å°†å¯è§ã€‚ //æ³¨æ„ï¼Œè®¡ç®—Itemçš„topæ—¶ï¼Œè®°å¾—åŠ ä¸ŠTranslationï¼Œå¦åˆ™ä¸èƒ½å‡†ç¡®è®¡ç®—&#125;//è¯¥æ–¹æ³•æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨ä¸Šä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è¦æ³¨æ„superï¼Œæœ€å¥½å°±ä¸è¦ã€‚è¿™ä¸ªæ–¹æ³•èƒ½å¤ŸèŽ·å–åˆ°RecyclerViewçŠ¶æ€ã€‚public void onDraw(Canvas c, RecyclerView parent, State state) &#123; onDraw(c, parent); &#125; å€Ÿå¼ å›¾ï¼Œä¾µåˆ ï¼è¿™é‡Œæœ‰ä¸ªå‘ï¼Œåœ¨æˆ‘ä½¿ç”¨mDrawable.canvas()æ¥ç»˜åˆ¶åˆ†å‰²çº¿çš„æ—¶å€™ï¼Œç”±äºŽmDrawable.getIntrinscXXX()èŽ·å¾—çš„å€¼ä¸º-1ï¼Œæ‰€ä»¥å¯¼è‡´äº†ç»˜åˆ¶æ•ˆæžœä¸å¯è§ã€‚è§£å†³åŠžæ³•æ˜¯åœ¨è®¡ç®—bottomæˆ–rightæ—¶ï¼Œç›´æŽ¥æŒ‡å®šæˆ‘ä»¬æ‰€å¸Œæœ›çš„é—´è·ï¼Œé™¤éžæˆ‘ä»¬å·²ç»è®¾ç½®mDrawableçš„å°ºå¯¸ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šæœ€ç»ˆgetItemOffset()æ–¹æ³•ä¸­è®¾ç½®çš„åç§»è·ç¦»ä¼šå åŠ åˆ°Itemçš„å¸ƒå±€å°ºå¯¸å‚æ•°ä¸Šï¼Œè€Œåˆ†å‰²çº¿çš„ç»˜åˆ¶åº”è¯¥åœ¨Itemåº•éƒ¨(åŽ»å°¾)ï¼Œæˆ–è€…è¯´Itemé¡¶éƒ¨(åŽ»å¤´)ï¼Œç»˜åˆ¶åŒºåŸŸ onDrawOver()ä¸ŽonDraw()æ–¹æ³•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å®ƒå°†è¢«è¦†ç›–åœ¨Itemä¸Šé¢ã€‚å®ƒåŒæ ·æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•:12345678public void onDrawOver(Canvas c, RecyclerView parent, State state) &#123; onDrawOver(c, parent); &#125;@Deprecatedpublic void onDrawOver(Canvas c, RecyclerView parent) &#123; &#125; æ€»ç»“é€šè¿‡è‡ªå®šä¹‰ItemDecorationæˆ‘ä»¬å¯ä»¥å®žçŽ°éœ€è¦åŠç‚¸å¤©çš„æ•ˆæžœã€‚å…ˆéµå®ˆè§„åˆ™ï¼Œç„¶åŽå¤©é©¬è¡Œç©ºã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[RecyclerViewâ€”â€”å®žçŽ°è‡ªå®šä¹‰LayoutManager]]></title>
      <url>%2F2016%2F08%2F06%2FRecyclerView%2FRecyclerView%E2%80%94%E2%80%94%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89LayoutManager%2F</url>
      <content type="text"><![CDATA[å‚è€ƒèµ„æ–™å‚è€ƒèµ„æ–™1;å‚è€ƒèµ„æ–™2ï¼›å‚è€ƒèµ„æ–™3ï¼›å‚è€ƒèµ„æ–™4ï¼› èƒŒæ™¯ä»‹ç»RecyclerViewç”±äºŽå…¶å¼ºå¤§çš„æ‰©å±•æ€§ï¼ŒçŽ°åœ¨å·²ç»é€æ­¥çš„å–ä»£äº†ListViewå’ŒGridViewäº†ã€‚ä¸ºäº†å®žçŽ°ä¸åŒçš„å¸ƒå±€æ•ˆæžœï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°å®˜æ–¹æä¾›çš„LinearLayoutManagerã€GridLayoutManagerå’ŒStaggeredGridLayoutManagerã€‚ä½†è¿™äº›å¸ƒå±€åªèƒ½æ»¡è¶³æ—¥å¸¸éœ€æ±‚ï¼Œåœ¨ä¸€äº›æ¯”è¾ƒå¤æ‚çš„å¸ƒå±€ä¸­ï¼Œå®ƒä»¬å°±åŠ›ä¸ä»Žå¿ƒäº†ï¼Œå¼ºè¡Œæ‹¼å‡‘å®žçŽ°ï¼Œå¸¦æ¥çš„åŽæžœå°±æ˜¯è¾ƒå·®çš„ä½“éªŒå’Œæ€§èƒ½ã€‚æ‰€ä»¥èƒ½å¤Ÿè‡ªå®šä¹‰LayoutManagerè¿˜æ˜¯ååˆ†å¿…è¦çš„ï¼Œå®ƒèƒ½å¤Ÿè§£æ”¾åˆ›é€ åŠ›ï¼Œæž„é€ å¤æ‚çš„ã€æµç•…çš„æ»‘åŠ¨åˆ—è¡¨ã€‚ä¸Šé¢å‡ ç¯‡å‚è€ƒèµ„æ–™ä¸­å°±å®žçŽ°äº†ä¸€äº›ä¸å¯»å¸¸çš„æ•ˆæžœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›æ•ˆæžœå¦‚æžœç”¨å¸¸è§„çš„æ–¹æ¡ˆåŽ»å®žçŽ°å°†ä¼šååˆ†è¹©è„šã€‚ æ­å¼€LayoutManagerä¸­ä¸ä¸ºäººçŸ¥çš„ç§˜å¯†è‡ªå®šä¹‰LayoutManagerä¸»è¦è¦æ±‚æˆ‘ä»¬å®Œæˆä¸‰ä»¶äº‹æƒ…ï¼š è®¡ç®—æ¯ä¸ªItemViewçš„ä½ç½®ï¼› å¤„ç†æ»‘åŠ¨äº‹ä»¶ï¼› ç¼“å­˜å¹¶é‡ç”¨ItemViewï¼› è€Œæˆ‘ä»¬æ¯”è¾ƒé‡è¦çš„å·¥ä½œæ˜¯åœ¨onLayoutChildern() è¿™ä¸ªå›žè°ƒæ–¹æ³•ä¸­å®Œæˆçš„ã€‚ ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€ä¸€è§£æžã€‚ é¢„å…ˆå‡†å¤‡å½“æˆ‘ä»¬extends RecyclerView.LayoutManageræ˜¯ï¼Œæˆ‘ä»¬ä¼šè¢«å¼ºåˆ¶è¦æ±‚é‡å†™generateDefaultLayoutParams()æ–¹æ³•ï¼Œå¦‚æ–¹æ³•åå­—ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ªé»˜è®¤çš„LayoutParamsï¼Œè¿™é‡Œä¸ºæˆ‘ä»¬çš„æ¯ä¸ªItemViewæä¾›é»˜è®¤çš„LayoutParamsï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿç›´æŽ¥å½±å“åˆ°æˆ‘ä»¬çš„å¸ƒå±€æ•ˆæžœï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®æˆWRAP_CONTENTï¼Œè®©ItemViewèŽ·å¾—å†³å®šæƒã€‚12345@Override public RecyclerView.LayoutParams generateDefaultLayoutParams() &#123; return new RecyclerView.LayoutParams(RecyclerView.LayoutParams.WRAP_CONTENT, RecyclerView.LayoutParams.WRAP_CONTENT); &#125; è®¡ç®—ItemViewçš„ä½ç½®1.å®žçŽ°ç®€å•çš„LayoutManagerå…ˆçœ‹æ•ˆæžœå›¾:å†çœ‹ä»£ç ï¼š1234567891011121314151617181920212223242526272829@Override public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) &#123; super.onLayoutChildren(recycler, state); // å…ˆæŠŠæ‰€æœ‰çš„Viewå…ˆä»ŽRecyclerViewä¸­detachæŽ‰ï¼Œç„¶åŽæ ‡è®°ä¸º"Scrap"çŠ¶æ€ï¼Œè¡¨ç¤ºè¿™äº›Viewå¤„äºŽå¯è¢«é‡ç”¨çŠ¶æ€(éžæ˜¾ç¤ºä¸­)ã€‚ // å®žé™…å°±æ˜¯æŠŠViewæ”¾åˆ°äº†Recyclerä¸­çš„ä¸€ä¸ªé›†åˆä¸­ã€‚ detachAndScrapAttachedViews(recycler); calculateChildrenSite(recycler); &#125; private void calculateChildrenSite(RecyclerView.Recycler recycler) &#123; totalHeight = 0; for (int i = 0; i &lt; getItemCount(); i++) &#123; // éåŽ†Recyclerä¸­ä¿å­˜çš„Viewå–å‡ºæ¥ View view = recycler.getViewForPosition(i); addView(view); // å› ä¸ºåˆšåˆšè¿›è¡Œäº†detachæ“ä½œï¼Œæ‰€ä»¥çŽ°åœ¨å¯ä»¥é‡æ–°æ·»åŠ  measureChildWithMargins(view, 0, 0); // é€šçŸ¥æµ‹é‡viewçš„marginå€¼ int width = getDecoratedMeasuredWidth(view); // è®¡ç®—viewå®žé™…å¤§å°ï¼ŒåŒ…æ‹¬äº†ItemDecoratorä¸­è®¾ç½®çš„åç§»é‡ã€‚ int height = getDecoratedMeasuredHeight(view); Rect mTmpRect = new Rect(); //è°ƒç”¨è¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿè°ƒæ•´ItemViewçš„å¤§å°ï¼Œä»¥é™¤åŽ»ItemDecoratorã€‚ calculateItemDecorationsForChild(view, mTmpRect); // è°ƒç”¨è¿™å¥æˆ‘ä»¬æŒ‡å®šäº†è¯¥Viewçš„æ˜¾ç¤ºåŒºåŸŸï¼Œå¹¶å°†Viewæ˜¾ç¤ºä¸ŠåŽ»ï¼Œæ­¤æ—¶æ‰€æœ‰åŒºåŸŸéƒ½ç”¨äºŽæ˜¾ç¤ºViewï¼Œ //åŒ…æ‹¬ItemDecoratorè®¾ç½®çš„è·ç¦»ã€‚ layoutDecorated(view, 0, totalHeight, width, totalHeight + height); totalHeight += height; &#125; &#125; è¿™æ®µä»£ç é€»è¾‘ç®€å•ï¼Œå®ƒå®žçŽ°çš„å…¶å®žå°±æ˜¯ä¸€ä¸ªç®€å•çš„åž‚ç›´çº¿æ€§å¸ƒå±€ï¼Œå½“ç„¶çŽ°åœ¨è¿˜ä¸èƒ½æ»‘åŠ¨ï¼Œä¹Ÿæ²¡æœ‰ç¼“å­˜æœºåˆ¶ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆè°ƒç”¨detachAndScrapAttachedViews(recycler);å°†æ‰€æœ‰çš„ItemViewæ ‡è®°ä¸ºScrapçŠ¶æ€ï¼Œç„¶åŽåœ¨æŒ¨ä¸ªå–å‡ºæ¥ï¼Œè®¡ç®—ä»–ä»¬åº”è¯¥å¸ƒå±€åˆ°ä»€ä¹ˆä½ç½®ï¼Œå¹¶ç”¨æˆå‘˜å˜é‡totalHeightè®°å½•æ€»é«˜åº¦ï¼Œæœ€åŽä¾æ¬¡è°ƒç”¨layoutDecorated()å°†ItemViewå¸ƒå±€ä¸ŠåŽ»ã€‚ 2.ä¸¤åˆ—å¼çš„LayoutManagerå…ˆçœ‹æ•ˆæžœå›¾ï¼šæœ‰äº†ä¸Šä¾‹çš„åŸºç¡€ï¼Œæˆ‘ä»¬åªéœ€è¦ç¨ä½œè°ƒæ•´ï¼Œç›´æŽ¥çœ‹ä¸‹é¢ä»£ç ï¼Œæ³¨æ„æ³¨é‡Šéƒ¨åˆ†ã€‚123456789101112131415161718192021222324private void calculateChildrenSite(RecyclerView.Recycler recycler) &#123; totalHeight = 0; for (int i = 0; i &lt; getItemCount(); i++) &#123; View view = recycler.getViewForPosition(i); addView(view); //æˆ‘ä»¬è‡ªå·±æŒ‡å®šItemViewçš„å°ºå¯¸ã€‚ measureChildWithMargins(view, DisplayUtils.getScreenWidth() / 2, 0); int width = getDecoratedMeasuredWidth(view); int height = getDecoratedMeasuredHeight(view); Rect mTmpRect = new Rect(); calculateItemDecorationsForChild(view, mTmpRect); if (i % 2 == 0) &#123; //å½“ièƒ½è¢«2æ•´é™¤æ—¶ï¼Œæ˜¯å·¦ï¼Œå¦åˆ™æ˜¯å³ã€‚ //å·¦ layoutDecoratedWithMargins(view, 0, totalHeight, DisplayUtils.getScreenWidth() / 2, totalHeight + height); &#125; else &#123; //å³ï¼Œéœ€è¦æ¢è¡Œ layoutDecoratedWithMargins(view, DisplayUtils.getScreenWidth() / 2, totalHeight, DisplayUtils.getScreenWidth(), totalHeight + height); totalHeight = totalHeight + height; LogUtils.e(i + "-&gt;" + totalHeight); &#125; &#125; &#125; å¤„ç†æ»‘åŠ¨å…ˆæ¥çœ‹ä¸€ä¸‹æ•ˆæžœ: æ»‘åŠ¨äº‹ä»¶ä¸»è¦æ¶‰åŠåˆ°4ä¸ªæ–¹æ³•éœ€è¦é‡å†™ï¼Œæˆ‘ä»¬ç›´æŽ¥æ¥çœ‹ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445@Override public boolean canScrollVertically() &#123; //è¿”å›žtrueè¡¨ç¤ºå¯ä»¥çºµå‘æ»‘åŠ¨ return true; &#125; @Override public int scrollVerticallyBy(int dy, RecyclerView.Recycler recycler, RecyclerView.State state) &#123; //åˆ—è¡¨å‘ä¸‹æ»šåŠ¨dyä¸ºæ­£ï¼Œåˆ—è¡¨å‘ä¸Šæ»šåŠ¨dyä¸ºè´Ÿï¼Œè¿™ç‚¹ä¸ŽAndroidåæ ‡ç³»ä¿æŒä¸€è‡´ã€‚ //å®žé™…è¦æ»‘åŠ¨çš„è·ç¦» int travel = dy; LogUtils.e("dy = " + dy); //å¦‚æžœæ»‘åŠ¨åˆ°æœ€é¡¶éƒ¨ if (verticalScrollOffset + dy &lt; 0) &#123; travel = -verticalScrollOffset; &#125; else if (verticalScrollOffset + dy &gt; totalHeight - getVerticalSpace()) &#123;//å¦‚æžœæ»‘åŠ¨åˆ°æœ€åº•éƒ¨ travel = totalHeight - getVerticalSpace() - verticalScrollOffset; &#125; //å°†ç«–ç›´æ–¹å‘çš„åç§»é‡+travel verticalScrollOffset += travel; // è°ƒç”¨è¯¥æ–¹æ³•é€šçŸ¥viewåœ¨yæ–¹å‘ä¸Šç§»åŠ¨æŒ‡å®šè·ç¦» offsetChildrenVertical(-travel); return travel; &#125; private int getVerticalSpace() &#123; //è®¡ç®—RecyclerViewçš„å¯ç”¨é«˜åº¦ï¼Œé™¤åŽ»ä¸Šä¸‹Paddingå€¼ return getHeight() - getPaddingBottom() - getPaddingTop(); &#125; @Override public boolean canScrollHorizontally() &#123; //è¿”å›žtrueè¡¨ç¤ºå¯ä»¥æ¨ªå‘æ»‘åŠ¨ return super.canScrollHorizontally(); &#125; @Override public int scrollHorizontallyBy(int dx, RecyclerView.Recycler recycler, RecyclerView.State state) &#123; //åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¤„ç†æ°´å¹³æ»‘åŠ¨ return super.scrollHorizontallyBy(dx, recycler, state); &#125; ç¼“å­˜å¹¶é‡ç”¨ItemViewåœ¨ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šæˆ‘ä»¬ç¨ä½œæ”¹åŠ¨ï¼ŒåŠ å…¥ç¼“å­˜ï¼Œå…ˆçœ‹ä¸‹é¢çš„logä¿¡æ¯ï¼Œå®ƒæ˜¾ç¤ºè™½ç„¶æœ‰100ä¸ªItemï¼Œä½†childCountç¨³å®šåœ¨26ï¼šä¸‹é¢æ¥çœ‹çœ‹ä»£ç çš„å˜åŒ–ï¼Œæˆ‘å±•ç¤ºäº†å®Œæ•´çš„ä»£ç ï¼Œç•™å¿ƒæ³¨é‡Šã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166public class CustomLayoutManager extends RecyclerView.LayoutManager &#123; /** ç”¨äºŽä¿å­˜itemçš„ä½ç½®ä¿¡æ¯ */ private SparseArray&lt;Rect&gt; allItemRects = new SparseArray&lt;&gt;(); /** ç”¨äºŽä¿å­˜itemæ˜¯å¦å¤„äºŽå¯è§çŠ¶æ€çš„ä¿¡æ¯ */ private SparseBooleanArray itemStates = new SparseBooleanArray(); public int totalHeight = 0; private int verticalScrollOffset; @Override public RecyclerView.LayoutParams generateDefaultLayoutParams() &#123; return new RecyclerView.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT); &#125; @Override public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) &#123; if (getItemCount() &lt;= 0 || state.isPreLayout()) &#123; return; &#125; super.onLayoutChildren(recycler, state); detachAndScrapAttachedViews(recycler); /* è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºŽè®¡ç®—å¹¶ä¿å­˜æ¯ä¸ªItemViewçš„ä½ç½® */ calculateChildrenSite(recycler); recycleAndFillView(recycler, state); &#125; private void calculateChildrenSite(RecyclerView.Recycler recycler) &#123; totalHeight = 0; for (int i = 0; i &lt; getItemCount(); i++) &#123; View view = recycler.getViewForPosition(i); addView(view); // æˆ‘ä»¬è‡ªå·±æŒ‡å®šItemViewçš„å°ºå¯¸ã€‚ measureChildWithMargins(view, DisplayUtils.getScreenWidth() / 2, 0); calculateItemDecorationsForChild(view, new Rect()); int width = getDecoratedMeasuredWidth(view); int height = getDecoratedMeasuredHeight(view); Rect mTmpRect = allItemRects.get(i); if (mTmpRect == null) &#123; mTmpRect = new Rect(); &#125; if (i % 2 == 0) &#123; // å½“ièƒ½è¢«2æ•´é™¤æ—¶ï¼Œæ˜¯å·¦ï¼Œå¦åˆ™æ˜¯å³ã€‚ // å·¦ mTmpRect.set(0, totalHeight, DisplayUtils.getScreenWidth() / 2, totalHeight + height); &#125; else &#123; // å³ï¼Œéœ€è¦æ¢è¡Œ mTmpRect.set(DisplayUtils.getScreenWidth() / 2, totalHeight, DisplayUtils.getScreenWidth(), totalHeight + height); totalHeight = totalHeight + height; &#125; // ä¿å­˜ItemViewçš„ä½ç½®ä¿¡æ¯ allItemRects.put(i, mTmpRect); // ç”±äºŽä¹‹å‰è°ƒç”¨è¿‡detachAndScrapAttachedViews(recycler)ï¼Œæ‰€ä»¥æ­¤æ—¶iteméƒ½æ˜¯ä¸å¯è§çš„ itemStates.put(i, false); &#125; &#125; private void recycleAndFillView(RecyclerView.Recycler recycler, RecyclerView.State state) &#123; if (getItemCount() &lt;= 0 || state.isPreLayout()) &#123; return; &#125; // å½“å‰scroll offsetçŠ¶æ€ä¸‹çš„æ˜¾ç¤ºåŒºåŸŸ Rect displayRect= new Rect(0, verticalScrollOffset, getHorizontalSpace(), verticalScrollOffset + getVerticalSpace()); /** * å°†æ»‘å‡ºå±å¹•çš„Itemså›žæ”¶åˆ°Recycleç¼“å­˜ä¸­ */ Rect childRect = new Rect(); for (int i = 0; i &lt; getChildCount(); i++) &#123; //è¿™ä¸ªæ–¹æ³•èŽ·å–çš„æ˜¯RecyclerViewä¸­çš„Viewï¼Œæ³¨æ„åŒºåˆ«Recyclerä¸­çš„View //è¿™èŽ·å–çš„æ˜¯å®žé™…çš„View View child = getChildAt(i); //ä¸‹é¢å‡ ä¸ªæ–¹æ³•èƒ½å¤ŸèŽ·å–æ¯ä¸ªViewå ç”¨çš„ç©ºé—´çš„ä½ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ItemDecorator childRect.left = getDecoratedLeft(child); childRect.top = getDecoratedTop(child); childRect.right = getDecoratedRight(child); childRect.bottom = getDecoratedBottom(child); //å¦‚æžœItemæ²¡æœ‰åœ¨æ˜¾ç¤ºåŒºåŸŸï¼Œå°±è¯´æ˜Žéœ€è¦å›žæ”¶ if (!Rect.intersects(displayRect, childRect)) &#123; //ç§»é™¤å¹¶å›žæ”¶æŽ‰æ»‘å‡ºå±å¹•çš„View removeAndRecycleView(child, recycler); itemStates.put(i, false); //æ›´æ–°è¯¥Viewçš„çŠ¶æ€ä¸ºæœªä¾é™„ &#125; &#125; //é‡æ–°æ˜¾ç¤ºéœ€è¦å‡ºçŽ°åœ¨å±å¹•çš„å­View for (int i = 0; i &lt; getItemCount(); i++) &#123; //åˆ¤æ–­ItemViewçš„ä½ç½®å’Œå½“å‰æ˜¾ç¤ºåŒºåŸŸæ˜¯å¦é‡åˆ if (Rect.intersects(displayRect, allItemRects.get(i))) &#123; //èŽ·å¾—Recyclerä¸­ç¼“å­˜çš„View View itemView = recycler.getViewForPosition(i); measureChildWithMargins(itemView, DisplayUtils.getScreenWidth() / 2, 0); //æ·»åŠ Viewåˆ°RecyclerViewä¸Š addView(itemView); //å–å‡ºå…ˆå‰å­˜å¥½çš„ItemViewçš„ä½ç½®çŸ©å½¢ Rect rect = allItemRects.get(i); //å°†è¿™ä¸ªitemå¸ƒå±€å‡ºæ¥ layoutDecoratedWithMargins(itemView, rect.left, rect.top - verticalScrollOffset, //å› ä¸ºçŽ°åœ¨æ˜¯å¤ç”¨Viewï¼Œæ‰€ä»¥æƒ³è¦æ˜¾ç¤ºåœ¨ rect.right, rect.bottom - verticalScrollOffset); itemStates.put(i, true); //æ›´æ–°è¯¥Viewçš„çŠ¶æ€ä¸ºä¾é™„ &#125; &#125; LogUtils.e("itemCount = " + getChildCount()); &#125; @Override public boolean canScrollVertically() &#123; // è¿”å›žtrueè¡¨ç¤ºå¯ä»¥çºµå‘æ»‘åŠ¨ return true; &#125; @Override public int scrollVerticallyBy(int dy, RecyclerView.Recycler recycler, RecyclerView.State state) &#123; //æ¯æ¬¡æ»‘åŠ¨æ—¶å…ˆé‡Šæ”¾æŽ‰æ‰€æœ‰çš„Viewï¼Œå› ä¸ºåŽé¢è°ƒç”¨recycleAndFillView()æ—¶ä¼šé‡æ–°addView()ã€‚ detachAndScrapAttachedViews(recycler); // åˆ—è¡¨å‘ä¸‹æ»šåŠ¨dyä¸ºæ­£ï¼Œåˆ—è¡¨å‘ä¸Šæ»šåŠ¨dyä¸ºè´Ÿï¼Œè¿™ç‚¹ä¸ŽAndroidåæ ‡ç³»ä¿æŒä¸€è‡´ã€‚ // å®žé™…è¦æ»‘åŠ¨çš„è·ç¦» int travel = dy; LogUtils.e("dy = " + dy); // å¦‚æžœæ»‘åŠ¨åˆ°æœ€é¡¶éƒ¨ if (verticalScrollOffset + dy &lt; 0) &#123; travel = -verticalScrollOffset; &#125; else if (verticalScrollOffset + dy &gt; totalHeight - getVerticalSpace()) &#123;// å¦‚æžœæ»‘åŠ¨åˆ°æœ€åº•éƒ¨ travel = totalHeight - getVerticalSpace() - verticalScrollOffset; &#125; // è°ƒç”¨è¯¥æ–¹æ³•é€šçŸ¥viewåœ¨yæ–¹å‘ä¸Šç§»åŠ¨æŒ‡å®šè·ç¦» offsetChildrenVertical(-travel); recycleAndFillView(recycler, state); //å›žæ”¶å¹¶æ˜¾ç¤ºView // å°†ç«–ç›´æ–¹å‘çš„åç§»é‡+travel verticalScrollOffset += travel; return travel; &#125; private int getVerticalSpace() &#123; // è®¡ç®—RecyclerViewçš„å¯ç”¨é«˜åº¦ï¼Œé™¤åŽ»ä¸Šä¸‹Paddingå€¼ return getHeight() - getPaddingBottom() - getPaddingTop(); &#125; @Override public boolean canScrollHorizontally() &#123; // è¿”å›žtrueè¡¨ç¤ºå¯ä»¥æ¨ªå‘æ»‘åŠ¨ return super.canScrollHorizontally(); &#125; @Override public int scrollHorizontallyBy(int dx, RecyclerView.Recycler recycler, RecyclerView.State state) &#123; // åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¤„ç†æ°´å¹³æ»‘åŠ¨ return super.scrollHorizontallyBy(dx, recycler, state); &#125; public int getHorizontalSpace() &#123; return getWidth() - getPaddingLeft() - getPaddingRight(); &#125;&#125; å®žçŽ°ç¼“å­˜æœ€ä¸»è¦çš„å°±æ˜¯å…ˆæŠŠæ¯ä¸ªItemViewçš„ä½ç½®ä¿¡æ¯ä¿å­˜èµ·æ¥ï¼Œç„¶åŽåœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­é€šè¿‡åˆ¤æ–­æ¯ä¸ªItemViewçš„ä½ç½®æ˜¯å¦å’Œå½“å‰RecyclerViewåº”è¯¥æ˜¾ç¤ºçš„åŒºåŸŸæœ‰é‡åˆï¼Œè‹¥æœ‰å°±æ˜¾ç¤ºå®ƒï¼Œè‹¥æ²¡æœ‰å°±ç§»é™¤å¹¶å›žæ”¶ã€‚ æ€»ç»“å®žçŽ°è‡ªå·±çš„è‡ªå®šä¹‰LayoutManagerä¸»è¦çš„ä¸‰ä¸ªæ­¥éª¤ï¼š è®¡ç®—æ¯ä¸ªItemViewçš„ä½ç½®ï¼› æ·»åŠ æ»‘åŠ¨äº‹ä»¶ï¼› å®žçŽ°ç¼“å­˜ã€‚ æˆ‘ä»¬éœ€æ ¹æ®ä»£ç å¤šç†è§£ï¼Œå¤šæ€è€ƒï¼Œç„¶åŽåŠ¨æ‰‹å†™å±žäºŽè‡ªå·±çš„LayoutManagerã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”ç”Ÿæˆå™¨æ¨¡å¼]]></title>
      <url>%2F2016%2F06%2F03%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E7%94%9F%E6%88%90%E5%99%A8%E6%A8%A1%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[å®šä¹‰åŠå®žè´¨ å®šä¹‰å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æž„å»ºä¸Žå®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æž„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ å®žè´¨åˆ†ç¦»æ•´ä½“æž„å»ºç®—æ³•å’Œéƒ¨ä»¶æž„é€ ã€‚ è§£é‡Š:æ‰“é­”å…½çš„æ—¶å€™ï¼ŒçŽ©å®¶å°±ç›¸å½“äºŽDirectoræŒ‡å¯¼è€…ï¼Œå…µè¥å°±ç›¸å½“äºŽBuilderç”Ÿæˆå™¨ï¼Œè€ŒProductäº§å“å°±æ˜¯å„ç§å…µã€‚çŽ©å®¶æŒ‡å¯¼å…µè¥ç”Ÿäº§ä¸åŒçš„å…µç§ï¼ŒçŽ©å®¶å¯ä»¥é€šè¿‡è‡ªå·±çš„ä¸€äº›æ€è€ƒ(æž„å»ºç®—æ³•)å†³å®šä»€ä¹ˆå…µç”Ÿäº§å‡ ä¸ªï¼Œå¼€å§‹æˆ–ç»ˆæ­¢ç”Ÿäº§ï¼Œè€Œå…µè¥åªè´Ÿè´£åŽ»æž„å»ºè¿™äº›å…µç§ï¼Œå¹¶ä¸”å¯¹çŽ©å®¶æš´éœ²é©±åŠ¨ç”Ÿäº§çš„æŽ¥å£ã€‚ æ¨¡å¼å›¾è§£ç”Ÿæˆå™¨æ¨¡å¼UMLå›¾ä»Žä¸Šå›¾å¯ä»¥çœ‹å‡º: DirectoræŒ‡å¯¼è€…ï¼Œå®ƒæ‹¥æœ‰Builderæž„å»ºè€…ï¼Œè´Ÿè´£å®žçŽ°æž„å»ºç®—æ³•ï¼Œåœ¨é€‚åˆçš„æ—¶å€™è°ƒç”¨Builderåˆ›å»ºéƒ¨ä»¶æˆ–äº§å“ï¼Œå¹¶ä¸”å…·å¤‡é…ç½®Builderå‚æ•°çš„èƒ½åŠ›ï¼Œä»¥ä¾¿èƒ½å¤ŸåŠ¨æ€çš„åˆ›å»ºç¬¦åˆè¦æ±‚çš„éƒ¨ä»¶æˆ–äº§å“ï¼› Builderæž„å»ºè€…èƒ½å¤Ÿæ ¹æ®å‚æ•°å®žçŽ°å…·ä½“å›ºå®šçš„æž„å»ºè¿‡ç¨‹ï¼ŒConcreteBuilderå®žçŽ°äº†ä¸€ç§å…·ä½“çš„æž„å»ºè¿‡ç¨‹ï¼› Productäº§å“æŽ¥å£ï¼ˆä¸æ˜¯å¿…è¦çš„ï¼Œåœ¨ç®€åŒ–çš„ç”Ÿæˆå™¨æ¨¡å¼ä¸­Builderä½œä¸ºé™æ€å†…éƒ¨ç±»å­˜åœ¨äºŽProductä¸­ï¼‰ã€‚ Talk is cheap, show me the Code. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//Directorpublic class Director&#123; private Builder builder; //DirectoræŒ‡å¯¼è€…éœ€è¦æŒæœ‰Builderæž„å»ºè€… public Director(Builder builder)&#123; this.builder = builder; &#125; public void construct()&#123; builder.build(); &#125;&#125;//Builderpublic interface Builder&#123; void build();&#125;//ConcreteBuilderpublic class ConcreteBuilder implements Builder&#123; private Product resultProduct; private String property; public ConcreteBuilder()&#123; &#125; public Product build()&#123; this.resultProduct = new ProductA(); resultProduct.setProperty(property); return resultProduct; &#125; public Product setProperty(String property)&#123; this.property = property; &#125; public Product getResult()&#123; return resultProduct; &#125;&#125;//ProductæŽ¥å£public interface Product&#123; &#125;public class ProductA&#123; private String property; public void setProperty(String property)&#123; this.property = property; &#125;&#125; çœ‹çœ‹Clientå®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨ï¼š1234567891011public class Client&#123; publuc static void main(Stringp[] args)&#123; Product product; Builder builder = new ConcreteBuilder(); //åˆ›å»ºç”Ÿæˆå™¨ buidler.setProperty("property"); Director director = new Director(builder); //åˆ›å»ºæŒ‡å¯¼è€… director.construct(); //æž„å»ºäº§å“ product = builder.getResult(); //èŽ·å¾—äº§å“å®žä¾‹ &#125;&#125; æž„å»ºå™¨æ¨¡å¼å¯ä»¥çœç•¥Directorï¼Œç›´æŽ¥æŠŠBuilderä½œä¸ºé™æ€å†…éƒ¨ç±»åµŒå…¥åˆ°äº§å“ç±»ä¸­ï¼Œç„¶åŽæŠŠæž„å»ºç®—æ³•æ”¾åˆ°Clientä¸­ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374public class Product&#123; private String property1; private String property2; private String property3; private Product()&#123; &#125; private void setProperty1(String property1)&#123; //å¯åœ¨è¿™é‡Œå¯¹å‚æ•°è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚ï¼š if(property1.equals("condition1"))&#123; System.out.println("property1 is error.") &#125; this.property1 = property1; &#125; private void setProperty2(String property2)&#123; this.property2 = property2; &#125; private void setProperty3(String property3)&#123; this.property3 = property3; &#125; public static class Builder&#123; private String property1; private String property2; private String property3; public Builder setProperty1(String property1)&#123; this.property1 = property1; return this; &#125; public Builder setProperty2(String property2)&#123; this.property2 = property2; return this; &#125; public Builder setProperty3(String property3)&#123; this.property3 = property3; return this; &#125; public Buidler build()&#123; //é…ç½®å¥½å±žæ€§ä¹‹åŽï¼Œæœ€ç»ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ //ä¹Ÿå¯åœ¨è¿™é‡Œå¯¹å‚æ•°è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚ï¼š if(property1.equals("condition1"))&#123; System.out.println("property1 is error.") &#125; if(property2.equals("condition2"))&#123; System.out.println("property2 is error.") &#125; if(property3.equals("condition3"))&#123; System.out.println("property3 is error.") &#125; //åˆ›å»ºProduct Product product = new Product(); product.setProperty1(property1); product.setProperty2(property2); product.setProperty2(property2); return product; &#125; &#125; &#125; ç”Ÿæˆå™¨æ¨¡å¼é¡ºåºå›¾ ç»“åˆä¸Šé¢ä»£ç æ¥çœ‹è¿™ä¸ªå›¾ã€‚ æ¨¡å¼ä¼˜ç¼ºç‚¹ä¼˜åŠ¿ æ¾æ•£è€¦åˆï¼šå°†æž„å»ºç®—æ³•å’Œæž„å»ºè¿‡ç¨‹åˆ†ç¦»ï¼ŒåŒæ—¶ä¹Ÿä¸Žå®¢æˆ·ç«¯éš”ç¦»ï¼› æ–¹ä¾¿ä¿®æ”¹ï¼šç”±äºŽæ¾æ•£è€¦åˆï¼Œä¾èµ–æŠ½è±¡ï¼Œæ‰€ä»¥ä¿®æ”¹å¾ˆå®¹æ˜“è¿›è¡Œï¼› å¤ç”¨æ€§æ›´å¥½ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”é€‚é…å™¨æ¨¡å¼]]></title>
      <url>%2F2016%2F06%2F02%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[å®šä¹‰åŠå®žè´¨ å®šä¹‰å°†ä¸€ä¸ªç±»çš„æŽ¥å£è½¬æ¢ä¸ºå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæŽ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿åŽŸæœ¬ç”±äºŽæŽ¥å£ä¸å…¼å®¹ä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»ï¼Œå¯ä»¥åœ¨ä¸€èµ·å·¥ä½œã€‚ å®žè´¨ç±»åž‹è½¬æ¢ï¼ŒåŠŸèƒ½å¤ç”¨ã€‚ æ¯”è¾ƒæŠ½è±¡ï¼Œå¾€ä¸‹ç»§ç»­çœ‹çœ‹ã€‚ æ¨¡å¼å›¾è§£å¯¹è±¡é€‚é…å™¨è§£é‡Šï¼š çŽ°åœ¨æœ‰ä¸€ä¸ªå•æ‰‹å‰‘ï¼ˆçŽ°æœ‰æŽ¥å£ï¼‰ï¼Œä½†è‹±é›„åªèƒ½è£…å¤‡æ³•æ–ï¼ˆç›®æ ‡æŽ¥å£ï¼‰ã€‚æ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªå•æ‰‹å‰‘è½¬æ¢å™¨ï¼ˆé€‚é…å™¨ï¼‰ï¼ŒæŠŠæ³•æ–æ’è¿›åŽ»ï¼Œå®ƒå±žäºŽå•æ‰‹å‰‘ç³»åˆ—ï¼Œä½†å†…éƒ¨å…¶å®žæ˜¯ä¸€æ ¹æ³•æ–ï¼ˆæŒæœ‰çŽ°æœ‰æŽ¥å£ï¼‰ï¼å½“è‹±é›„ä½¿ç”¨å•æ‰‹å‰‘è½¬åŒ–å™¨æ—¶ï¼Œå®žé™…ä½¿ç”¨çš„æ˜¯æ³•æ–ã€‚ å¯¹è±¡é€‚é…å™¨æ¨¡å¼UMLå›¾ä»Žä¸Šå›¾å¯ä»¥çœ‹å‡º: TargetæŽ¥å£ä¸ºClientå®¢æˆ·ç«¯æ‰€è¦æ±‚çš„æŽ¥å£ï¼› Adapteræ˜¯é€‚é…å™¨ï¼Œå®žçŽ°äº†TargetæŽ¥å£ï¼ŒæŒæœ‰Adaptee(åŽŸå§‹ç±»åž‹ï¼Œé€šå¸¸å®ƒä¸ŽClientä¸å…¼å®¹ï¼Œä½†Clientåˆæƒ³è¦ä½¿ç”¨å®ƒçš„åŠŸèƒ½)ï¼Œå¹¶ä¸”å°†å®ƒé€‚é…æˆäº†Clientè¦æ±‚çš„Targetç±»åž‹ã€‚ æ¥çœ‹çœ‹åŽŸå§‹ç±»åž‹Adaptee123456public class Adaptee&#123; public void specificRequest()&#123; //do something... &#125;&#125; TargetæŽ¥å£åŠAdapteræŽ¥å£123456789101112131415public interface Target&#123; void request();&#125;public class Adapter implements Target&#123; private Adaptee daptee; public Adapter&#123; daptee = new Adaptee(); &#125; public void request()&#123; adaptee.sepcificRequest(); &#125;&#125; Clientå¦‚ä½•ä½¿ç”¨12345678public class Client&#123; private Target target; public static void main(String[] args)&#123; target = new Adapter(); //åˆ›å»ºé€‚é…å™¨ï¼Œä½†åŠŸèƒ½ä»ç„¶æ˜¯Adapteeçš„ target.request(); //å®žé™…è°ƒç”¨çš„æ˜¯Adapterçš„specificRequest()æ–¹æ³• &#125;&#125; å¯¹è±¡é€‚é…å™¨æ¨¡å¼é¡ºåºå›¾ç»“åˆä¸Šé¢ä»£ç çœ‹ã€‚ ç±»é€‚é…å™¨æ¨¡å¼è¿˜æ˜¯ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œä½†è¿™æ¬¡ä¸éœ€è¦å•æ‰‹å‰‘è½¬æ¢å™¨äº†ï¼Œè€Œæ˜¯ç›´æŽ¥åˆ›å»ºä¸€ç§å³æ˜¯å•æ‰‹å‰‘ï¼Œåˆæ˜¯æ³•æ–çš„æ­¦å™¨ï¼ˆé‡‡ç”¨å¤šé‡ç»§æ‰¿ï¼Œä½†æ˜¯Javaä¸–ç•Œä¸æ”¯æŒï¼ï¼‰ã€‚åœ¨Javaå®‡å®™ä¸­ï¼Œåªèƒ½é€šè¿‡ç»§æ‰¿å•æ‰‹å‰‘ï¼ŒCopyæ³•æ–åŠŸèƒ½æ¥å®žçŽ°ã€‚ ç±»é€‚é…å™¨æ¨¡å¼UMLå›¾ ä»Žå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç±»é€‚é…å™¨æ¨¡å¼ä½¿ç”¨äº†å¤šé‡ç»§æ‰¿çš„ç‰¹æ€§ï¼Œä½†æ˜¯Javaåªæ”¯æŒå•ç»§æ‰¿ï¼Œæ‰€ä»¥è¿™ç§æ¨¡å¼åœ¨Javaä¸­ä¸æ˜¯å¤ªé€‚ç”¨ï¼› Adapteré€‚é…å™¨åŒæ—¶ç»§æ‰¿äº†Clientæ‰€æœŸæœ›çš„ç±»åž‹Targetç±»ï¼Œå’Œæƒ³è¦ä½¿ç”¨çš„åŠŸèƒ½ç±»Adapteeç±»ã€‚ å®¢æˆ·ç«¯åªéœ€è¦è°ƒç”¨Adapterç»§æ‰¿åˆ°çš„specificRequest()æ–¹æ³•å³å¯ã€‚ è¿™ä¸ªæ¨¡å¼åœ¨Javaä¸­ä¸å¸¸ç”¨ï¼Œè€Œä¸”é¡ºåºå›¾æ¯”è¾ƒç®€å•ï¼Œå°±ä¸å±•ç¤ºäº†ã€‚ æ‹“å±•â€”â€”æŽ¥å£é€‚é…å™¨ä¸¥æ ¼æ¥è¯´æŽ¥å£é€‚é…å™¨å¹¶ä¸æ˜¯æ ‡å‡†çš„é€‚é…å™¨æ¨¡å¼ï¼Œå®ƒåªæ˜¯å€Ÿç”¨äº†é€‚é…å™¨çš„æ¦‚å¿µè€Œå·²ã€‚æŽ¥ä¸‹æ¥çœ‹çœ‹å®ƒæ˜¯æ€Žä¹ˆä¸€å›žäº‹ã€‚ åœºæ™¯:æˆ‘ä»¬å¯èƒ½é‡åˆ°è¿‡è¿™æ ·ä¸€ç§åœºæ™¯ï¼Œå°±æ˜¯ä¸€ä¸ªinterfaceçš„æ–¹æ³•å¾ˆå¤šï¼Œè€Œæˆ‘ä»¬åªæƒ³ä½¿ç”¨å…¶ä¸­å°‘æ•°å‡ ä¸ªï¼Œå¹¶ä¸æƒ³ç›´æŽ¥å®žçŽ°å®ƒï¼Œç„¶åŽæŠŠæ‰€æœ‰æ–¹æ³•éƒ½é‡å†™ä¸€éã€‚ è§£å†³æ–¹æ³•ï¼šåˆ›å»ºä¸€ä¸ªabstractæŠ½è±¡ç±»ï¼Œå®žçŽ°ç›®æ ‡æŽ¥å£interfaceï¼Œç„¶åŽæˆ‘ä»¬å°±å¯ä»¥ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œé€‰æ‹©å…¶ä¸­æƒ³è¦çš„æ–¹æ³•åŽ»å®žçŽ°é€»è¾‘ï¼Œè€Œä¸ç”¨æŠŠæ‰€æœ‰æ–¹æ³•éƒ½åˆ—å‡ºæ¥ã€‚ æŽ¥å£é€‚é…å™¨æ¨¡å¼UMLå›¾å¦‚å›¾ï¼ŒAbstractAdapterå®žçŽ°äº†Apiï¼Œç„¶åŽAdapterç»§æ‰¿AbstractAdapterå°±å¯ä»¥é€‰æ‹©æƒ³è¦çš„æ–¹æ³•é‡å†™å°±å¥½ï¼Œè€Œä¸ç”¨æŠŠæ‰€æœ‰æ–¹æ³•éƒ½åˆ—å‡ºæ¥ã€‚å®ƒæœ€å¤§çš„ä½œç”¨å…¶å®žåœ¨å†™å†…éƒ¨ç±»çš„æ—¶å€™ï¼Œæœ‰çš„æŽ¥å£è¦æ±‚é‡å†™çš„æ–¹æ³•å¾ˆå¤šï¼Œè¿™æ ·ä¼šå¤šå‡ºå¾ˆå¤šè¡Œæ— ç”¨çš„ä»£ç ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæŽ¥å£é€‚é…å™¨ï¼Œé€‰æ‹©æ€§çš„åˆ—å‡ºå¹¶é‡å†™æ–¹æ³•å°±å¥½ã€‚ æ¨¡å¼ä¼˜ç¼ºç‚¹ä¼˜åŠ¿ è½¬æ¢æŽ¥å£ï¼Œæé«˜å¤ç”¨æ€§ï¼› å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é€‚é…å™¨ä¸­æ‰©å±•æ–°åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜èƒ½å…¼é¡¾è€åŠŸèƒ½ã€‚ ç¼ºç‚¹ ä½¿ç”¨ä¸åˆç†å®¹æ˜“é€ æˆè¿·æƒ‘ã€‚å½“æˆ‘ä»¬è°ƒç”¨Aå¯¹è±¡çš„åŠŸèƒ½æ—¶ï¼Œå…¶å†…éƒ¨å…¶å®žæ˜¯è°ƒç”¨äº†Bçš„åŠŸèƒ½ï¼Œè®©äººä¸æ˜“ç†è§£ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”å¤–è§‚æ¨¡å¼]]></title>
      <url>%2F2016%2F06%2F01%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[å®šä¹‰åŠå®žè´¨ å®šä¹‰ ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æŽ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œè¿™ä¸ªç•Œé¢ä½¿å¾—å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚ è§£é‡Šï¼šè‹±é›„å¹å“å·è§’ï¼ˆç›¸å½“äºŽç»Ÿä¸€ç•Œé¢ï¼Œç”¨äºŽå‘åŠ¨æ”»å‡»ï¼‰ï¼Œå‘½ä»¤éƒ¨é˜Ÿå¯¹æ•Œå†›å‘åŠ¨æ”»å‡»ï¼›æŽ¥ä¸‹æ¥éƒ¨é˜Ÿé‡Œçš„å„ç§å…µç§å¼€å§‹å¯¹æ•Œå†›å‘åŠ¨æ”»å‡»ã€‚å’•å™œå…µå‘èµ·äº†æ”»å‡»ï¼Œç‹¼éª‘å‘èµ·äº†æ”»å‡»ï¼Œç‰›å¤´äººå‘èµ·äº†æ”»å‡»ï¼Œé£Žéª‘å£«å‘èµ·äº†æ”»å‡»â€¦å·è§’è¿™ä¸ªç»Ÿä¸€ç•Œé¢ï¼ŒæŠŠéƒ¨é˜Ÿå‘èµ·æ”»å‡»çš„äº‹ä»¶è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—è‹±é›„ä¸ç”¨åŽ»äº†è§£å‘èµ·æ”»å‡»æ—¶ï¼Œéƒ¨é˜Ÿä¸­çš„æ¯ä¸ªå…µç§æ˜¯å¦‚ä½•å‘èµ·æ”»å‡»çš„ã€‚ å®žè´¨ å°è£…äº¤äº’ï¼Œç®€åŒ–è°ƒç”¨ã€‚ æ¨¡å¼å›¾è§£å¤–è§‚æ¨¡å¼UMLå›¾ä»Žä¸Šå›¾å¯ä»¥çœ‹å‡º: Facadeä½œä¸ºå¤–è§‚ç±»ï¼Œå®ƒæä¾›ä¸€ä¸ªtest() æ–¹æ³•å…¥å£ï¼Œä¾›CLientå®¢æˆ·ç«¯è°ƒç”¨å­ç³»ç»ŸåŠŸèƒ½ï¼› å¯ä»¥çœ‹åˆ°Facadeä¾èµ–äº†å­ç³»ç»Ÿä¸­æ‰€æœ‰ç±»ï¼Œå› ä¸ºå®ƒè¦è´Ÿè´£è°ƒåº¦å®ƒä»¬ï¼›Facadeå…¶å®žå°±æ˜¯æŠŠå­ç³»ç»Ÿçš„åŠŸèƒ½å°è£…èµ·æ¥ï¼Œè¿™æ ·ä½¿å¾—Clientä»…ä»…é€šè¿‡ä¸€ä¸ªtest() æ–¹æ³•å°±èƒ½ä½¿ç”¨å­ç³»ç»Ÿã€‚æ¥çœ‹çœ‹ä»£ç ï¼šåŠŸèƒ½æ¨¡å—çš„ä»£ç :1234567891011121314151617181920212223242526272829303132//AåŠŸèƒ½æ¨¡å—public interface AMoudleApi&#123; void testA();&#125;public class AMoudle implements AMoudleApi&#123; public void testA()&#123; System.out.println("AMoudle"); &#125;&#125;//BåŠŸèƒ½æ¨¡å—public interface BMoudleApi&#123; void testB();&#125;public class BMoudle implements BMoudleApi&#123; public void testB()&#123; System.out.println("BMoudle"); &#125;&#125;//AåŠŸèƒ½æ¨¡å—public interface CMoudleApi&#123; void testC();&#125;public class CMoudle implements CMoudleApi&#123; public void testC()&#123; System.out.println("CMoudle"); &#125;&#125; Facadeå¤–è§‚ç±»ï¼š12345678910111213141516public class Facade&#123; private AMoudleApi aMoudle; private BMoudleApi bMoudle; private CMoudleApi cMoudle; public Facade&#123; aMoudle = new AMoudle(); bMoudle = new BMoudle(); cMoudle = new CMoudle(); &#125; public void test()&#123; aMoudle.testA(); bMoudle.testB(); cMoudle.testC(); &#125;&#125; ä¸‹é¢çœ‹çœ‹Clientå®¢æˆ·ç«¯æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼š1234567public class Client&#123; private Facade facade; public static void main(String[] args)&#123; facade = new Facade() facade.test(); //è°ƒç”¨Facadeçš„test()æ–¹æ³•å°±èƒ½è°ƒç”¨åˆ°ä¸Šé¢æ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼Œè€Œä¸ç”¨ä¾èµ–å®ƒä»¬ &#125;&#125; å¤–è§‚æ¨¡å¼é¡ºåºå›¾ç»“åˆä¸Šé¢çš„ä»£ç çœ‹è¿™ä¸ªè¿‡ç¨‹å›¾ã€‚ æ¨¡å¼ä¼˜ç¼ºç‚¹ä¼˜åŠ¿ æ¾æ•£è€¦åˆï¼Œä½¿å®¢æˆ·ç«¯å’Œå­ç³»ç»Ÿè§£è€¦ï¼Œä¼¼çš„æ‰©å±•æ›´å®¹æ˜“è¿›è¡Œï¼› ç®€å•æ˜“ç”¨ï¼› æ›´å¥½çš„åˆ’åˆ†è®¿é—®å±‚æ¬¡ã€‚ ç¼ºç‚¹ ä½¿ç”¨ä¸åˆç†å®¹æ˜“è®©äººä¸æ˜Žç™½æ˜¯è°ƒç”¨FacadeæŽ¥å£å¥½ï¼Œè¿˜æ˜¯ç›´æŽ¥è°ƒç”¨å­ç³»ç»ŸåŠŸèƒ½æŽ¥å£å¥½ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”å•ä¾‹æ¨¡å¼çš„5ç§å®žçŽ°]]></title>
      <url>%2F2016%2F05%2F29%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%845%E7%A7%8D%E5%AE%9E%E7%8E%B0%2F</url>
      <content type="text"><![CDATA[å•ä¾‹æ¨¡å¼æ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨ï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€ç§æ¨¡å¼ï¼Œä¸»è¦ç”¨äºŽåªæƒ³ç³»ç»Ÿä¸­å­˜åœ¨ä¸€ä¸ªå®žä¾‹çš„æƒ…å†µï¼Œæ¯”å¦‚æŸä¸ªManagerã€‚ å®šä¹‰åŠå®žè´¨ å®šä¹‰ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®žä¾‹åŒ–å¹¶å‘ç³»ç»Ÿæä¾›è¿™ä¸ªå®žä¾‹ã€‚ å®žè´¨æŽ§åˆ¶å®žä¾‹æ•°é‡ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªå®žä¾‹ã€‚ æ¨¡å¼å›¾è§£å•ä¾‹æ¨¡å¼UMLå›¾å¾ˆç›´è§‚æ˜Žäº†ï¼Œå¾ˆç®€å•ã€‚ä¸‹é¢æ¥çœ‹çœ‹å•ä¾‹æ¨¡å¼çš„ä¸åŒå®žçŽ°æ–¹æ¡ˆã€‚ é¥¿æ±‰å¼1234567891011121314151617public class Singleton&#123; private static fianl Singleton instance = new Singleton(); //ç§æœ‰åŒ–æž„é€ å™¨ï¼Œé¿å…å¤–éƒ¨è®¿é—®ã€‚ä½¿ç”¨åå°„ä»ç„¶å¯ä»¥è®¿é—®ï¼Œæ‰€ä»¥å®‰å…¨æ˜¯ç›¸å¯¹çš„ã€‚ //ä½†ä»ç„¶å¯ä»¥é€šè¿‡å“ˆå¸Œå€¼ç­‰è¿›è¡Œé™åˆ¶ï¼Œæé«˜å®‰å…¨æ€§ã€‚ priavte Singleton&#123; &#125; //å¯¹å¤–æš´éœ²çš„æŽ¥å£ï¼Œç”¨äºŽèŽ·å–å®žä¾‹ public static Singleton getInstance()&#123; return instance; &#125; public void doSomething()&#123; System.out.println("doSomething"); &#125;&#125; è§£é‡Šï¼š é¥¿æ±‰å¼æ˜¯åˆ©ç”¨äº†static å…³é”®å­—åœ¨ç±»åŠ è½½æ—¶å°±ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”ç¼“å­˜åˆ°é™æ€å†…å­˜ ä¸­çš„ç‰¹ç‚¹ï¼Œç¡®ä¿äº†è°ƒç”¨getInstance() æ—¶ï¼Œæ— é¡»æ‹…å¿ƒinstance ä¸ºnullï¼› é€šè¿‡fianl å…³é”®å­—ï¼Œå¼å•ä¾‹åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹çš„å®‰å…¨ï¼Œå› ä¸ºJVMä¼šè‡ªåŠ¨å¯¹fianl è¿›è¡Œä¸Šé”åŒæ­¥ã€‚ ä¼˜ç‚¹ï¼š èƒ½å¤Ÿåœ¨çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹å®žçŽ°å•ä¾‹ã€‚ç¼ºç‚¹ï¼š ç”±äºŽç±»ä¸€åŠ è½½å°±ä¼šåˆ›å»ºå®žä¾‹ï¼Œæ‰€ä»¥ä¼šè¾ƒæ—©å ç”¨ç³»ç»Ÿèµ„æºã€‚ æ‡’æ±‰å¼123456789101112131415161718public class Singleton&#123; private static Singleton instance; priavte Singleton&#123; &#125; //åŠ synchronizedä¸Šé”ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šç¡®ä¿å®‰å…¨æ€§ public static synchronized Singleton getInstance()&#123; if(instance == null)&#123; instance = new Singleton(); &#125; return instance; &#125; public void doSomething()&#123; System.out.println("doSomething"); &#125;&#125; è§£é‡Šï¼š æ‡’æ±‰å¼ä½“çŽ°äº†å»¶è¿ŸåŠ è½½çš„çš„æ€æƒ³ã€‚å¯¹è±¡å®žä¾‹åªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨getInstance() æ–¹æ³•æ—¶æ‰ä¼šè¢«åˆ›å»ºï¼Œä¸€å®šç¨‹åº¦ä¸Šçš„èŠ‚çº¦äº†ç³»ç»Ÿèµ„æºï¼› æ‡’æ±‰å¼åœ¨å•çº¿ç¨‹ä¸‹èƒ½å¤Ÿå¾ˆå¥½çš„å·¥ä½œï¼Œä½†æ˜¯å¹¶å‘ä¸‹å°±å¾ˆæœ‰å¯èƒ½ä¼šåˆ›å»ºå¤šä¸ªå®žä¾‹ã€‚ ä¼˜ç‚¹ï¼š èƒ½å¤Ÿå®žçŽ°å»¶è¿ŸåŠ è½½ï¼ŒèŠ‚çº¦å†…å­˜ã€‚åœ¨å•çº¿ç¨‹ä¸­èƒ½å¾ˆå¥½å·¥ä½œã€‚ç¼ºç‚¹ï¼š å¹¶å‘ä¸‹å¯èƒ½ä¼šåˆ›å»ºå¤šä¸ªå®žä¾‹ï¼Œæ¯æ¬¡åˆ¤æ–­éƒ½ä¼šè€—è´¹ä¸€äº›æ—¶é—´ã€‚ DCLåŒé‡æ£€æŸ¥å®žçŽ°å•ä¾‹1234567891011121314151617181920212223public class Singleton&#123; //è¿™é‡Œä½¿ç”¨äº†volatileå…³é”®å­—ï¼Œå®ƒèƒ½å¤Ÿç¡®ä¿insatnceå˜é‡æ¯æ¬¡éƒ½ç›´æŽ¥ä»Žä¸»å†…å­˜(è€Œä¸æ˜¯å¯„å­˜å™¨)ä¸­åŠ è½½æœ€æ–°èµ‹å€¼ã€‚ private volatile static Singleton instance = null; priavte Singleton&#123; &#125; //è¿™é‡Œè¿›è¡Œäº†ä¸¤æ¬¡nullæ£€æŸ¥ï¼Œå³åŒé‡æ£€æŸ¥é”å®šï¼Œè¿™èƒ½å¾ˆå¤§ç¨‹åº¦çš„ç¡®ä¿å®‰å…¨æ€§ public static Singleton getInstance()&#123; if(instance == null)&#123; synchroniazed(Singleton.class)&#123; if(instance == null)&#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125; public void doSomething()&#123; System.out.println("doSomething"); &#125;&#125; ä¼˜ç‚¹ï¼š æ—¢èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œåˆèƒ½å®žçŽ°å»¶è¿ŸåŠ è½½ã€‚ç¼ºç‚¹ï¼š ä½¿ç”¨volatile å…³é”®å­—ä¼šä½¿JVMå¯¹è¯¥æ®µä»£ç çš„ä¼˜åŒ–ä¸§å¤±ï¼Œå½±å“æ€§èƒ½ã€‚å¹¶ä¸”åœ¨ä¸€äº›é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œä»ç„¶å¯èƒ½åˆ›å»ºå¤šä¸ªå®žä¾‹ï¼Œè¿™ç§°ä¸ºåŒé‡æ£€æŸ¥é”å®šå¤±æ•ˆ ï¼Œæœ‰ä¸€äº›ä¹¦ä¸­ä½œè€…å‡è®¤ä¸ºè¿™æ˜¯ä¸€ç§â€œä¸‘é™‹â€çš„å•ä¾‹å®žçŽ°æ–¹æ¡ˆã€‚ é™æ€å†…éƒ¨ç±»å®žçŽ°å•ä¾‹123456789101112131415161718public class Singleton&#123; priavte Singleton&#123; &#125; public static Singleton getInstance()&#123; return SingletonHolder.instance; &#125; //é™æ€å†…éƒ¨ç±»ç¡®ä¿äº†åœ¨é¦–æ¬¡è°ƒç”¨getInstance()çš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–SingletonHolderï¼Œä»Žè€Œå¯¼è‡´å®žä¾‹è¢«åˆ›å»ºã€‚ //å¹¶ä¸”ç”±JVMä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨ã€‚ priavte static class SingletonHolder&#123; priavte static final Singleton instance = new Singleton(); &#125; public void doSomething()&#123; System.out.println("doSomething"); &#125;&#125; è¿™æ˜¯å•ä¾‹æ¨¡å¼æœ€å¥½çš„å®žçŽ°æ–¹æ³•ä¹‹ä¸€ã€‚ æžšä¸¾ç±»å®žçŽ°å•ä¾‹æžšä¸¾èƒ½å¤Ÿç¡®ä¿å®žä¾‹çš„å”¯ä¸€æ€§ï¼Œèƒ½å¤Ÿæœ€å¤§ç¨‹åº¦ä¸Šç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”æä¾›æ— å¿åºåˆ—åŒ–æœºåˆ¶ã€‚æ‰€ä»¥åœ¨ä¸å¯¹å»¶è¿ŸåŠ è½½æœ‰å¤ªé«˜è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æžšä¸¾åˆ›å»ºå•ä¾‹æ˜¯æœ€ä½³çš„æ–¹æ¡ˆï¼ 1234567public enum Singleton&#123; INSTANCE; public void doSomething()&#123; System.out.println("doSomething"); &#125;&#125; æ‹“å±•ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹JVMä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬å®ŒæˆåŒæ­¥ï¼š é™æ€åˆå§‹åŒ–å™¨(static{}ä»£ç å—)åˆå§‹åŒ–æ•°æ®æ—¶ï¼› è®¿é—®finalå­—æ®µæ—¶ï¼› åœ¨åˆ›å»ºçº¿ç¨‹ä¹‹å‰åˆ›å»ºå¯¹è±¡ï¼› çº¿ç¨‹å¯ä»¥çœ‹è§å®ƒå°†è¦åˆ›å»ºçš„å¯¹è±¡æ—¶ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”æŠ½è±¡å·¥åŽ‚æ¨¡å¼]]></title>
      <url>%2F2016%2F05%2F28%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[æŠ½è±¡å·¥åŽ‚æ¨¡å¼å’Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯å»¶è¿Ÿå­ç±»é€‰æ‹©åˆ›å»ºï¼Œä½†å®ƒä»¬çš„ä¸åŒç‚¹åœ¨äºŽï¼š å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¸“æ³¨äºŽåˆ›å»ºå•ä¸ªå®Œæ•´çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥åŽ‚æ¨¡å¼ä¸“æ³¨äºŽåˆ›å»ºæž„ä¸€ä¸ªå®Œæ•´äº§å“çš„æ‰€æœ‰éƒ¨ä»¶ã€‚æ¯”å¦‚è¯´ï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼åˆ›å»ºä¸€æŠŠå•æ‰‹å‰‘ï¼Œè€ŒæŠ½è±¡å·¥åŽ‚æ¨¡å¼éœ€è¦åˆ›å»ºå‰‘æŸ„ã€å‰‘ä½“ã€éœ€è¦ç”¨çš„ææ–™ç­‰ã€‚å®ƒä»¬æ€æƒ³ç›¸åŒï¼Œä½†å…³æ³¨ç‚¹ä¸ä¸€æ ·ã€‚å·¥åŽ‚æ–¹æ³•æ¨¡å¼å¯ä»¥ç†è§£ä¸ºå®è§‚ï¼Œè€ŒæŠ½è±¡å·¥åŽ‚æ¨¡å¼å¯ä»¥ç†è§£ä¸ºå¾®è§‚ã€‚[å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¼ é€é—¨] å®šä¹‰åŠå®žè´¨ å®šä¹‰ æä¾›åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡çš„æŽ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚ å®žè´¨ é€‰æ‹©äº§å“ç°‡çš„å®žçŽ°ã€‚ æ¨¡å¼å›¾è§£æŠ½è±¡å·¥åŽ‚æ¨¡å¼UMLå›¾ä»Žä¸Šå›¾å¯ä»¥çœ‹å‡º: é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å·¥åŽ‚ç±»AbstractFactoryï¼Œå®ƒç›¸å½“äºŽä¸€ä¸ªæ¨¡ç‰ˆï¼Œå®ƒèƒ½å¤Ÿç”Ÿäº§å…·æœ‰ç›¸å…³å…³ç³»çš„äº§å“Aã€Bï¼Œå…¶å­ç±»å·¥åŽ‚æŒ‰ç…§è¿™ä¸ªè§„èŒƒè¿›è¡Œæ‰©å±•ï¼› å®šä¹‰ä¸¤ç§äº§å“æŽ¥å£(äº§å“æ¨¡ç‰ˆ)ï¼ŒAbstarctProductAå’ŒAbstarctProductBï¼Œå®ƒä»¬æ˜¯ç›¸å…³çš„äº§å“ç±»åž‹ï¼Œæ¯”å¦‚è¯´å‰‘æŸ„å’Œå‰‘ä½“ï¼› ç»§æ‰¿æŠ½è±¡å·¥åŽ‚ç±»AbstractFactoryï¼Œå®šä¹‰ä¸¤ç§ä¸åŒçš„å·¥åŽ‚ï¼Œåˆ†åˆ«ç”¨äºŽç”Ÿäº§1ç³»åˆ—äº§å“å’Œ2ç³»åˆ—äº§å“ã€‚ä¸‹é¢æ˜¯å·¥åŽ‚ç±»ï¼š 12345678910111213141516171819202122232425262728293031//æŠ½è±¡å·¥åŽ‚ç±»AbstractFactorypublic abstract class AbstractFactory&#123; public abstract AbstractProductA createProductA(); public abstract AbstractProductB createProductB();&#125;//1ç³»åˆ—äº§å“å·¥åŽ‚public class ConcreteFactory1&#123; @Overrid public AbstractProductA createProductA()&#123; return new ProductA1(); &#125; @Overrid public AbstractProductB createProductB()&#123; return new ProductB1(); &#125;&#125;//2ç³»åˆ—äº§å“å·¥åŽ‚public class ConcreteFactory1&#123; @Overrid public AbstractProductA createProductA()&#123; return new ProductA2(); &#125; @Overrid public AbstractProductB createProductB()&#123; return new ProductB2(); &#125;&#125; ä¸‹é¢æ˜¯äº§å“ç±»ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041//Aç±»äº§å“æŽ¥å£(æ¨¡ç‰ˆ)public interface AbstractProductA&#123; void doSomthing();&#125;//A1äº§å“public class ProductA1 implement AbstractProductA&#123; @Overrid public void doSomething()&#123; System.out.println("ProductA1"); &#125;&#125;//A2äº§å“public class ProductA2 implement AbstractProductA&#123; @Overrid public void doSomething()&#123; System.out.println("ProductA2"); &#125;&#125;//Bç±»äº§å“æŽ¥å£(æ¨¡ç‰ˆ)public interface AbstractProductB&#123; void doSomthing();&#125;//B1äº§å“public class ProductB1 implement AbstractProductB&#123; @Overrid public void doSomething()&#123; System.out.println("ProductB1"); &#125;&#125;//B2äº§å“public class ProductB2 implement AbstractProductB&#123; @Overrid public void doSomething()&#123; System.out.println("ProductB2"); &#125;&#125; ä¸‹é¢çœ‹çœ‹Clientå®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨ï¼š 12345678910111213public class Client&#123; public static void main(String[] args)&#123; //çŽ°åœ¨éœ€è¦åˆ›å»º1ç³»åˆ—äº§å“ AbstractFactory factory = new ConcreteFactory1(); ProductA a1 = factory.createProductA(); ProductB b1 = factory.createProductB(); //æŽ¥ä¸‹æ¥åˆ›å»º2ç³»åˆ—äº§å“ factory = new ConcreteFactory2(); ProductA a2 = factory.createProductA(); ProductB b2 = factory.createProductB(); &#125;&#125; æŠ½è±¡å·¥åŽ‚æ¨¡å¼é¡ºåºå›¾ç»“åˆä¸Šé¢ä»£ç æ¥çœ‹é¡ºåºå›¾ã€‚ æ¨¡å¼ä¼˜ç¼ºç‚¹ä¼˜åŠ¿ å°è£…å¤æ‚åˆ›å»ºé€»è¾‘ï¼› è§£è€¦Clientå’Œäº§å“ï¼› æ–¹ä¾¿åˆ‡æ¢äº§å“ç°‡ï¼Œåªéœ€æ›´æ¢å·¥åŽ‚å®žä¾‹å°±è¡Œã€‚ ç¼ºç‚¹ ä¸å®¹æ˜“æ‰©å±•æ–°äº§å“ï¼Œå½“éœ€è¦å¢žåŠ æ–°çš„äº§å“ç±»åž‹æ—¶ï¼Œä¸å¾—ä¸æŠŠä¹‹å‰çš„æ¯ä¸ªå·¥åŽ‚ç±»éƒ½ä¿®æ”¹ï¼› å®¹æ˜“é€ æˆé€‰æ‹©å±‚æ¬¡çš„å¤æ‚ï¼Œå› ä¸ºå½“äº§å“ç±»åž‹å¤šæ—¶ï¼Œé…ç½®æ–¹æ¡ˆä¹Ÿå°†å¢žåŠ ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”å·¥åŽ‚æ–¹æ³•æ¨¡å¼]]></title>
      <url>%2F2016%2F05%2F27%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[å·¥åŽ‚æ–¹æ³•æ¨¡å¼å’Œç®€å•å·¥åŽ‚æ¨¡å¼æœ¬è´¨æ˜¯ç±»ä¼¼çš„ï¼Œéƒ½æ˜¯ç”¨æ¥å°è£…äº§å“çš„åˆ›å»ºè¿‡ç¨‹ã€‚ä½†å®ƒä»¬çš„å®žçŽ°ä¹Ÿæœ‰å¾ˆå¤§çš„ï¼Œæ‰€ä»¥é€šå¸¸è¢«ä½œä¸ºä¸¤ç§ä¸åŒçš„è®¾è®¡æ¨¡å¼çœ‹å¾…ã€‚ å®šä¹‰åŠå®žè´¨ å®šä¹‰å®šä¹‰ä¸€ä¸ªç”¨äºŽåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œè®©å­ç±»å†³å®šå®žä¾‹åŒ–é‚£ä¸€ä¸ªå¯¹è±¡ï¼Œå³ä½¿ä¸€ä¸ªç±»çš„å®žçŽ°å»¶è¿Ÿåˆ°å­ç±»å®žçŽ°ã€‚ å®žè´¨å»¶è¿Ÿåˆ°å­ç±»é€‰æ‹©å®žçŽ°ã€‚ è™½ç„¶éƒ½æ˜¯é€‰æ‹©å®žçŽ°ï¼Œä½†å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¸»è¦ç”¨äºŽåˆ›å»ºä¸€ç³»åˆ—çš„äº§å“ç°‡(å°±æ˜¯ç›¸ä¼¼çš„ä¸œè¥¿)ï¼Œè€Œç®€å•å·¥åŽ‚æ³•å¯ä»¥åˆ›å»ºä»»ä½•äº’ç›¸æ²¡æœ‰å…³è”çš„å®žä¾‹ã€‚ æ¨¡å¼å›¾è§£å·¥åŽ‚æ–¹æ³•æ¨¡å¼UMLå›¾ä»Žä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š Creatoræ˜¯æŠ½è±¡çˆ¶ç±»ï¼ŒConcreteCreatoræ˜¯å…¶å­ç±»ï¼› ConcreteCreatoré‡å†™äº†çˆ¶ç±»çš„factoryMethod() æ¥åˆ›å»ºçœŸæ­£çš„äº§å“ConcreteProductï¼Œä¹Ÿå°±æ˜¯è¯´ConcreteCreatorä¾èµ–ConcreteProductï¼›éœ€è¦æ³¨æ„ï¼ŒCreatorä¾èµ–çš„æ˜¯Productï¼› ConcreteProductå®žçŽ°äº†ProductæŽ¥å£ã€‚1234567891011121314151617181920212223242526272829//Creatorpublic abstract class Creator&#123; public abstrat Product factoryMethod(); public void someOpration()&#123; //åœ¨è¿™é‡Œå»¶è¿Ÿåˆ›å»ºäº†Product factorMethod().doSomthing(); &#125;&#125;//ConcreteCreatorpublic class ConcreteCreator extends Creator&#123; @Overrid public Product factoryMethod()&#123; return new ConcreteProduct(); &#125;&#125;//Productpublic interface Product&#123; void doSomthing();&#125;//public class ConcreteProduct implement Product&#123; @Overrid public void doSomthing()&#123; System.out.println("ConcreteProduct"); &#125;&#125; ä¸‹é¢çœ‹çœ‹Clientæ€Žä¹ˆä½¿ç”¨:1234567public class Client&#123; priavte Creator creator; public static void main(String[] args)&#123; creator = new ConcreteCreator(); //åˆ›å»ºç¬¦åˆéœ€æ±‚çš„Creatorå­ç±» creator.someOpration(); //è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ‰ä¼šåˆ›å»ºProduct &#125;&#125; å·¥åŽ‚æ–¹æ³•æ¨¡å¼é¡ºåºå›¾ç»“åˆä¸Šé¢çš„ä»£ç çœ‹ã€‚ æ¨¡å¼ä¼˜ç¼ºç‚¹ä¼˜åŠ¿ ä½“çŽ°äº†ä¾èµ–å€’ç½® çš„åŽŸåˆ™ï¼Œä½¿ç¨‹åºçš„å¯æ‰©å±•æ€§å¢žå¼ºï¼Œå½“æœ‰æ–°éœ€æ±‚æ—¶ï¼Œåªéœ€è¦å¢žåŠ æ–°çš„Creatorå­ç±»ï¼Œæ›¿æ¢Clientä¸­çš„å­ç±»ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å…¶å®ƒåœ°æ–¹ï¼› å¯ä»¥åœ¨ä¸çŸ¥é“å¯¹è±¡åˆ›å»ºè¿‡ç¨‹æœªç¡®å®šçš„æƒ…å†µä¸‹è¿›è¡Œç¼–ç¨‹ï¼› å¯ä»¥å¾ˆå¥½çš„é“¾æŽ¥å¹³è¡Œç±»å±‚æ¬¡ç»“æž„ã€‚ å·¥åŽ‚ç±»å’Œäº§å“ç±»è€¦åˆåœ¨ä¸€èµ·ã€‚ æ‹“å±•å¹³è¡Œç±»å±‚æ¬¡ç»“æž„æŒ‡ä¸€ä¸ªç±»å±‚çº§(å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªCreatorçš„æŠ½è±¡å°±ä»£è¡¨ç€ä¸€ä¸ªç±»å±‚çº§)ä¸­çš„æ¯ä¸€ä¸ªç±»ï¼Œåœ¨å¦ä¸€ä¸ªç±»å±‚çº§ä¸­éƒ½æœ‰å¯¹åº”çš„ç±»ä¸Žä¹‹å‘¼åº”ï¼Œè¿™æ ·çš„ä¸€ç»„ç±»å±‚å°±ç§°ä¸ºå¹³è¡Œç±»å±‚æ¬¡ç»“æž„ ã€‚è§£é‡Šï¼šä»¥Shapeä¸ºä¾‹ï¼Œå…·ä½“çš„Shapeå¯¹è±¡å’ŒShapeå¯¹è±¡çš„è¡Œä¸ºå°±æž„æˆäº†å¹³è¡Œç±»å±‚æ¬¡ç»“æž„ã€‚Shapeå¯¹è±¡å±‚çº§ä¸­æœ‰Rectangleã€Ovalç­‰ï¼Œåœ¨Shapeå¯¹è±¡è¡Œä¸ºå±‚çº§ä¸­ï¼Œæœ‰Rectangleã€Ovalç­‰çš„é¢ç§¯ã€å‘¨é•¿ç­‰è¡Œä¸ºä¸Žä¹‹å¯¹åº”ã€‚æ‰€ä»¥å®ƒä»¬æž„æˆäº†å¹³è¡Œç±»å±‚æ¬¡ç»“æž„ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è®¾è®¡æ¨¡å¼â€”â€”ç®€å•å·¥åŽ‚æ¨¡å¼]]></title>
      <url>%2F2016%2F05%2F26%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%2F</url>
      <content type="text"><![CDATA[å®šä¹‰åŠå®žè´¨ å®šä¹‰æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡å®žä¾‹çš„åŠŸèƒ½(æŽ¥å£)ï¼Œè€Œå®¢æˆ·è°ƒç”¨æ—¶æ— é¡»å…³å¿ƒå®žçŽ°è¿‡ç¨‹ã€‚å±žäºŽåˆ›å»ºåž‹æ¨¡å¼ã€‚ å®žè´¨é€‰æ‹©å®žçŽ°ã€‚ æ¨¡å¼å›¾è§£ç®€å•å·¥åŽ‚æ¨¡å¼UMLå›¾è§£é‡Šï¼šä»Žä¸Šå›¾å¯ä»¥çœ‹å‡º: Factoryä¾èµ–äº†ApiæŽ¥å£å’Œä¸¤ä¸ªæŽ¥å£çš„å®žçŽ°ç±»; è€ŒClientä¾èµ–Factoryå’ŒApiæŽ¥å£ï¼› ImpAå’ŒImpBæ˜¯ApiæŽ¥å£çš„ä¸åŒå®žçŽ°ï¼› Factoryå·¥åŽ‚ç±»æ‰¿æ‹…äº†å¯¹è±¡å®žä¾‹çš„åˆ›å»ºï¼Œè€ŒClientåªéœ€è°ƒç”¨Factoryæä¾›çš„æ–¹æ³•(é€šå¸¸æ˜¯é™æ€æ–¹æ³•)å°±å¯ä»¥èŽ·å–ç›¸åº”çš„å¯¹è±¡å®žä¾‹ï¼ŒClientå®Œå…¨ä¸æ¸…æ¥šå¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚è¿™ç§æ¨¡å¼å®žçŽ°äº†ç”¨æˆ·å’Œå¯¹è±¡çš„è§£è€¦ï¼Œå½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ— é¡»æ”¹åŠ¨ç”¨æˆ·çš„è°ƒç”¨ï¼Œåªéœ€åœ¨Factoryä¸­ä¿®æ”¹æˆ–å¢žåŠ å°±å¯ä»¥ã€‚ // å¯¹è±¡ public interface Api{ public void doSomething(); } public ImpA implements Api{ @Override public void doSomthing(){ System.out.println("è¿™é‡Œæ˜¯ImpA"); } } public ImpB implements Api{ @Override public void doSomthing(){ System.out.println("è¿™é‡Œæ˜¯ImpB"); } } // Factory public class ApiFactory{ public static Api getApi(int type){ Api api = null; if(type == 0){ api = new ImpA(); } else if(type == 1){ api = new ImpB(); } return api; } } // Client public class Client{ Api api; public client(){ // æ³¨æ„ï¼Œè¿™é‡Œç”¨æˆ·å¹¶ä¸çŸ¥é“å®ƒæ‰€èŽ·å¾—çš„å¯¹è±¡å®žä¾‹æ˜¯æ€Žä¹ˆåˆ›å»ºçš„ã€‚ api = Factory.getApi(0); if(api != null){ api.doSomthing(); } } } ç®€å•å·¥åŽ‚æ¨¡å¼é¡ºåºå›¾ç»“åˆä¸Šé¢ä»£ç æ¥çœ‹ã€‚ æ¨¡å¼ä¼˜ç¼ºç‚¹ä¼˜åŠ¿ å°è£…ï¼šå°è£…ç”¨æˆ·åˆ›å»ºå¯¹è±¡å®žä¾‹çš„è¿‡ç¨‹ã€‚ è§£è€¦ï¼šä½¿ç”¨æˆ·ä¸ç”¨åŽ»å…³å¿ƒå¯¹è±¡å®žä¾‹çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå¹¶ä¸”ä¾èµ–äºŽæŠ½è±¡ã€‚ ç¼ºç‚¹ç”¨æˆ·å¾€å¾€éœ€è¦çŸ¥é“Factoryä¸­é€‰æ‹©å‚æ•°çš„æ„ä¹‰ã€‚]]></content>
    </entry>

    
  
  
</search>
